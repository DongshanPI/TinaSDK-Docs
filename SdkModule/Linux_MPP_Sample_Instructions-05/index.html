<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Tina SDK Docs Start Page."><meta name=author content=100askTeam><link href=https://github.com/DongshanPI/TinaSDK-Docs.git/SdkModule/Linux_MPP_Sample_Instructions-05/ rel=canonical><link href=../Linux_MPP_Sample_Instructions-04/ rel=prev><link href=../Linux_MPP_Sample_Instructions-06/ rel=next><link rel=icon href=../../favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>测试方法 - 全志Linux Tina-SDK开发完全手册</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-LZX4K52CZ1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-LZX4K52CZ1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-LZX4K52CZ1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#8-sample class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=https://tina.100ask.net title="全志Linux Tina-SDK开发完全手册" class="md-header__button md-logo" aria-label="全志Linux Tina-SDK开发完全手册" data-md-component=logo> <svg id=图层_1 data-name="图层 1" xmlns=http://www.w3.org/2000/svg viewbox="0 0 400 400"><defs><style>.cls-1{fill:#151f45;fill-rule:evenodd;}</style></defs><title>东山派1号LOGO定稿</title><path class=cls-1 d=M339.43,62.45A195.41,195.41,0,0,0,61.92,337.64l-.08.2.55.27.67.67A195.41,195.41,0,1,0,339.43,62.45ZM208.26,19.36a181,181,0,0,1,121.26,53c2.44,2.48,4.83,5,7.15,7.59H208.26Zm0,166.87h44.23v-14H208.26v-35.9H269l5.19,0c11.24-.11,20.56-.23,30.47,6.14,20.17,12.89,15.49,40.5,15.49,40.57l-.08.44c-3.18,34.71-41.83,31.18-42,31.18l-.55,0H208.26ZM19.89,200.62A181.39,181.39,0,0,1,194.22,19.36V80H149.68c-4,0-6.06,0-8.22-.08-11-.23-23.75-.47-33.26,1.77C100.61,83.45,92.12,86.91,85,93.52s-12.58,16.31-13.88,30.35h.08a10.59,10.59,0,0,0-.36,1.53c-.15,1.34-.35,3.23-.43,5.51-.39,11.71,2,34.28,23.28,47.3,14.43,8.8,28.58,8.49,43.6,8.14,2.24,0,4.52-.12,8.49-.12h48.4v28.31H20.4C20.05,209.94,19.89,205.3,19.89,200.62Zm174.33-64.33v35.9h-48.4c-1.88,0-5.34.12-8.76.2-12.9.27-25.09.55-36-6.14C85.83,157,84.13,140.11,84.45,131.34l0-1.22.12,0,.47-5C86,115,89.76,108.22,94.59,103.7s11.13-7.08,16.79-8.42c8-1.84,19.74-1.65,29.84-1.45,3.7.08,7.32.16,8.46.16h44.54v28.27H152.67v14ZM22,228.57H194.22v19.07A157.63,157.63,0,0,0,68.88,324.59,180.64,180.64,0,0,1,22,228.57ZM294.92,356c-.59.4-1.18.75-1.81,1.1-.9.55-1.85,1.11-2.79,1.58a6.64,6.64,0,0,1-.95.55,181.66,181.66,0,0,1-176.3,0c-.27-.16-.59-.32-.86-.47-.91-.51-1.81-1.07-2.72-1.58l-2-1.18a180,180,0,0,1-28.31-21.15,143.82,143.82,0,0,1,248.49-4.09A179.72,179.72,0,0,1,294.92,356Zm42.74-35.78a158,158,0,0,0-129.4-72.85V228.57h69.12c4.6.32,52.1,2.52,56.58-43.6.36-2.36,5.27-37.08-21.74-54.38-13.41-8.61-24.65-8.49-38.14-8.33H208.26V94H348a181.41,181.41,0,0,1-10.34,226.19Z /><path class=cls-1 d=M294.92,356a30,30,0,0,1-3.93-2c-11.52-5-17.07-9.2-21.43-12.94-2.28-1.92-6.84-6.13-8.26-8.14-8.81-12.58-9.75-9.86-12-6-1.14,2-8.1,9.59-9.87,11.16a58,58,0,0,1-15.29,9.6,58.91,58.91,0,0,1-31.81,3.93c-33.81-5.35-34.68-28.23-45.1-27.48-3.77,10.34-23.51,25.4-36.25,30.43-1.1.43-2.24.9-3.46,1.37-1.53.59-3.11,1.18-4.8,1.69l-6,1.66c-2.52,1-1.14.35-2.28,1.33,1.37.75-.32.4,1.69.47,2.71.08,10-2.67,13.4-4l1-.39c5.46-2.16,9.55-4.64,13.76-6.8l-8.81,6.45c-.47.31-1.33.82-1.65,1l-1.53,1.3-.59.51,1.45,0,65.7-1.54-8.8-4.24c-2.84-1.77-7.16-5.35-8.65-7.9,15.09,14.15,42.73,17.45,64.12,9.55,4.76-1.77,13.37-6.84,15.77-9.52-6.09,8.22-11.8,9.17-18.13,12.47-1.73.86-.9.39-1.8,1.1l68.09.12h1.5a7.13,7.13,0,0,0-.55-.55c-2.68-2.4-8.34-4.88-11-8.1,3.81,1.69,8.65,4.28,13.8,6.52a62.09,62.09,0,0,0,11.28,3.74,15.82,15.82,0,0,0,2,.24c1.93-.08.47.19,1.77-.44C306,358.79,299.4,357.61,294.92,356Zm-83-76.51c-1.53-2.32-2.83-4.36-4.48-7.35-8.34-15.34-9.87,2.32-22.14,16.12-7.55,8.49-22.1,19.66-32.16,22.84,1.18.95-1.46,5.47,11.6-2.75,3.77-2.36,5.86-3.81,9.16-5.86a.3.3,0,0,1-.16-.08c-.16-.15.12-.74.87-1.73a22.41,22.41,0,0,1,2.08-1.81c1-.74,2-1.49,3-2.16a24,24,0,0,1,4.05-2.2,24.51,24.51,0,0,1,4.95-1.61,24.85,24.85,0,0,1,5-.47h28.74A102.79,102.79,0,0,1,211.88,279.45Zm-24.14,18.76a20.53,20.53,0,0,0-4.41.82,34,34,0,0,0-5.11,1.93,29.38,29.38,0,0,1-3.14,1.37c-1.46,3.23-1.54,2.72-8,7.24-3.18,2.24-7.47,4.24-10.26,6.72,3.07,5.58,12.07,11.29,18.09,14.31,1.3.63,2.71,1.26,4.21,1.85a7.93,7.93,0,0,1,2.12-3.89l3.07-3.3a18.45,18.45,0,0,0,2.47-4.53,39.27,39.27,0,0,0,1.89-6.21A65.14,65.14,0,0,0,189.9,307c.28-2.71.43-4.91.43-6.6v-2.28C189.62,298.13,188.8,298.17,187.74,298.21Zm61.06,14.94.78-1.3a59.82,59.82,0,0,1-11.08-5.94c-.47-.27-.91-.59-1.38-.86-1.22-.75-2.44-1.62-3.66-2.52-.59-.43-.94-.71-.94-.71-2.28-1.81-4.56-3.81-6.76-5.93v2.24h-10.7c-.47,1.81-.82,3.3-1,4.44a53.25,53.25,0,0,0-.63,5.7,71.55,71.55,0,0,0-.23,8.22c0,2.12.15,4.17.35,6.21s.43,3.74.71,5.15a4.23,4.23,0,0,0,1.06,2.6,2.37,2.37,0,0,0,1.34.43,5.31,5.31,0,0,0,2-.47c1-.36,1.57-.63,2-.83a1.43,1.43,0,0,1,.94-.23,1.21,1.21,0,0,1,.71.51c.12.27-.28.7-1.3,1.33a13.2,13.2,0,0,1-1.53.83c-.59.27-1.54.75-2.83,1.41s-2.28,1.18-2.95,1.54a15.09,15.09,0,0,1-1.85.86,1.27,1.27,0,0,1-1.38-.08c-.19-.07-.43-.43-.7-1a12,12,0,0,1-.67-3.3c-.2-1.61-.32-2.95-.4-4.09s-.07-3.34-.11-6.57,0-5.54.11-7a65.82,65.82,0,0,1,1.11-7.7,35.56,35.56,0,0,1,1.53-5.74l.82-2.24h-19c0,.94,0,2.12,0,3.61s-.08,3.86-.2,7.08-.43,6.53-.87,9.75a58.42,58.42,0,0,1-1.73,8.46,30.58,30.58,0,0,1-2.28,6,6.57,6.57,0,0,1-1.29,1.89,58.67,58.67,0,0,0,15.61,2,63,63,0,0,0,26.18-6.33,51.9,51.9,0,0,0,16.16-12l0-.08a7.77,7.77,0,0,1,.63-.66l.08-.08c.23-.28.51-.55.74-.87a7.6,7.6,0,0,0,.56-.59l0,0c-6.88-5.38-16.67-9.24-19.7-15.76,6.72,4.24,11.44,8.1,19.58,11.79A10.52,10.52,0,0,0,248.8,313.15Z /><path class=cls-1 d=M94.4,356.25s1.51,13.27,20.32,7,0,.6,0,.6L152.2,340l-46.33,16.24Z /><polygon class=cls-1 points="285.18 360.33 299.87 364.24 295.9 358.28 280.17 349.47 276.37 351.72 285.18 360.33"/><path class=cls-1 d=M153.67,312.3l6.26,7.88,18.67-4.47-1.21-13-1.32-.66s-3,.14-3,.72S153.67,312.3,153.67,312.3Z /><path class=cls-1 d=M249.32,312.18l-.81,1.34c-.57.9-1.38,2.13-2.23,3.23a7.4,7.4,0,0,1-.52.65c-.25.33-.53.61-.77.9l-.08.08a6.48,6.48,0,0,0-.65.7l0,.08c-.69.61.44-.86.44-.86l-22.8-9.51,2.47-9.11,7.41,2.09,1,.73c1.25.94,2.51,1.84,3.76,2.61.49.29.93.62,1.42.9A61.07,61.07,0,0,0,249.32,312.18Z /><path class=cls-1 d=M109.89,361.78s154.27-.06,184.2,2.46l-8.8-7.65L244,340l-28.67,15.32H186.72L156.21,340s-17.87,12.11-18,12.12S109.89,361.78,109.89,361.78Z /></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 全志Linux Tina-SDK开发完全手册 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 测试方法 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label=选择当前语言> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=/en/ hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=/zh/ hreflang=zh class=md-select__link> 中文 </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/DongshanPI/TinaSDK-Docs/ title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> DongshanPI/TinaSDK-Docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> 0.站点指南 </a> </li> <li class=md-tabs__item> <a href=../Linux_SystemSoftware_DevelopmentGuide-01/ class=md-tabs__link> 1.构建工具使用 </a> </li> <li class=md-tabs__item> <a href=../Linux_U-boot_DevelopmentGuide-01/ class=md-tabs__link> 2.Bootloader开发 </a> </li> <li class=md-tabs__item> <a href=../Linux_SID_DevelopmentGuide-01/ class=md-tabs__link> 3.Linux驱动开发 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../Linux_PWM_DevelopmentGuide-01/ class=md-tabs__link> 4.基础组件软件库 </a> </li> <li class=md-tabs__item> <a href=../Linux_Deploy_DevelopmentGuide-01/ class=md-tabs__link> 5.系统开发 </a> </li> <li class=md-tabs__item> <a href=../../ProjectActualCombat/GUI-LvglExample-01/ class=md-tabs__link> 6.应用示例与项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://tina.100ask.net title="全志Linux Tina-SDK开发完全手册" class="md-nav__button md-logo" aria-label="全志Linux Tina-SDK开发完全手册" data-md-component=logo> <svg id=图层_1 data-name="图层 1" xmlns=http://www.w3.org/2000/svg viewbox="0 0 400 400"><defs><style>.cls-1{fill:#151f45;fill-rule:evenodd;}</style></defs><title>东山派1号LOGO定稿</title><path class=cls-1 d=M339.43,62.45A195.41,195.41,0,0,0,61.92,337.64l-.08.2.55.27.67.67A195.41,195.41,0,1,0,339.43,62.45ZM208.26,19.36a181,181,0,0,1,121.26,53c2.44,2.48,4.83,5,7.15,7.59H208.26Zm0,166.87h44.23v-14H208.26v-35.9H269l5.19,0c11.24-.11,20.56-.23,30.47,6.14,20.17,12.89,15.49,40.5,15.49,40.57l-.08.44c-3.18,34.71-41.83,31.18-42,31.18l-.55,0H208.26ZM19.89,200.62A181.39,181.39,0,0,1,194.22,19.36V80H149.68c-4,0-6.06,0-8.22-.08-11-.23-23.75-.47-33.26,1.77C100.61,83.45,92.12,86.91,85,93.52s-12.58,16.31-13.88,30.35h.08a10.59,10.59,0,0,0-.36,1.53c-.15,1.34-.35,3.23-.43,5.51-.39,11.71,2,34.28,23.28,47.3,14.43,8.8,28.58,8.49,43.6,8.14,2.24,0,4.52-.12,8.49-.12h48.4v28.31H20.4C20.05,209.94,19.89,205.3,19.89,200.62Zm174.33-64.33v35.9h-48.4c-1.88,0-5.34.12-8.76.2-12.9.27-25.09.55-36-6.14C85.83,157,84.13,140.11,84.45,131.34l0-1.22.12,0,.47-5C86,115,89.76,108.22,94.59,103.7s11.13-7.08,16.79-8.42c8-1.84,19.74-1.65,29.84-1.45,3.7.08,7.32.16,8.46.16h44.54v28.27H152.67v14ZM22,228.57H194.22v19.07A157.63,157.63,0,0,0,68.88,324.59,180.64,180.64,0,0,1,22,228.57ZM294.92,356c-.59.4-1.18.75-1.81,1.1-.9.55-1.85,1.11-2.79,1.58a6.64,6.64,0,0,1-.95.55,181.66,181.66,0,0,1-176.3,0c-.27-.16-.59-.32-.86-.47-.91-.51-1.81-1.07-2.72-1.58l-2-1.18a180,180,0,0,1-28.31-21.15,143.82,143.82,0,0,1,248.49-4.09A179.72,179.72,0,0,1,294.92,356Zm42.74-35.78a158,158,0,0,0-129.4-72.85V228.57h69.12c4.6.32,52.1,2.52,56.58-43.6.36-2.36,5.27-37.08-21.74-54.38-13.41-8.61-24.65-8.49-38.14-8.33H208.26V94H348a181.41,181.41,0,0,1-10.34,226.19Z /><path class=cls-1 d=M294.92,356a30,30,0,0,1-3.93-2c-11.52-5-17.07-9.2-21.43-12.94-2.28-1.92-6.84-6.13-8.26-8.14-8.81-12.58-9.75-9.86-12-6-1.14,2-8.1,9.59-9.87,11.16a58,58,0,0,1-15.29,9.6,58.91,58.91,0,0,1-31.81,3.93c-33.81-5.35-34.68-28.23-45.1-27.48-3.77,10.34-23.51,25.4-36.25,30.43-1.1.43-2.24.9-3.46,1.37-1.53.59-3.11,1.18-4.8,1.69l-6,1.66c-2.52,1-1.14.35-2.28,1.33,1.37.75-.32.4,1.69.47,2.71.08,10-2.67,13.4-4l1-.39c5.46-2.16,9.55-4.64,13.76-6.8l-8.81,6.45c-.47.31-1.33.82-1.65,1l-1.53,1.3-.59.51,1.45,0,65.7-1.54-8.8-4.24c-2.84-1.77-7.16-5.35-8.65-7.9,15.09,14.15,42.73,17.45,64.12,9.55,4.76-1.77,13.37-6.84,15.77-9.52-6.09,8.22-11.8,9.17-18.13,12.47-1.73.86-.9.39-1.8,1.1l68.09.12h1.5a7.13,7.13,0,0,0-.55-.55c-2.68-2.4-8.34-4.88-11-8.1,3.81,1.69,8.65,4.28,13.8,6.52a62.09,62.09,0,0,0,11.28,3.74,15.82,15.82,0,0,0,2,.24c1.93-.08.47.19,1.77-.44C306,358.79,299.4,357.61,294.92,356Zm-83-76.51c-1.53-2.32-2.83-4.36-4.48-7.35-8.34-15.34-9.87,2.32-22.14,16.12-7.55,8.49-22.1,19.66-32.16,22.84,1.18.95-1.46,5.47,11.6-2.75,3.77-2.36,5.86-3.81,9.16-5.86a.3.3,0,0,1-.16-.08c-.16-.15.12-.74.87-1.73a22.41,22.41,0,0,1,2.08-1.81c1-.74,2-1.49,3-2.16a24,24,0,0,1,4.05-2.2,24.51,24.51,0,0,1,4.95-1.61,24.85,24.85,0,0,1,5-.47h28.74A102.79,102.79,0,0,1,211.88,279.45Zm-24.14,18.76a20.53,20.53,0,0,0-4.41.82,34,34,0,0,0-5.11,1.93,29.38,29.38,0,0,1-3.14,1.37c-1.46,3.23-1.54,2.72-8,7.24-3.18,2.24-7.47,4.24-10.26,6.72,3.07,5.58,12.07,11.29,18.09,14.31,1.3.63,2.71,1.26,4.21,1.85a7.93,7.93,0,0,1,2.12-3.89l3.07-3.3a18.45,18.45,0,0,0,2.47-4.53,39.27,39.27,0,0,0,1.89-6.21A65.14,65.14,0,0,0,189.9,307c.28-2.71.43-4.91.43-6.6v-2.28C189.62,298.13,188.8,298.17,187.74,298.21Zm61.06,14.94.78-1.3a59.82,59.82,0,0,1-11.08-5.94c-.47-.27-.91-.59-1.38-.86-1.22-.75-2.44-1.62-3.66-2.52-.59-.43-.94-.71-.94-.71-2.28-1.81-4.56-3.81-6.76-5.93v2.24h-10.7c-.47,1.81-.82,3.3-1,4.44a53.25,53.25,0,0,0-.63,5.7,71.55,71.55,0,0,0-.23,8.22c0,2.12.15,4.17.35,6.21s.43,3.74.71,5.15a4.23,4.23,0,0,0,1.06,2.6,2.37,2.37,0,0,0,1.34.43,5.31,5.31,0,0,0,2-.47c1-.36,1.57-.63,2-.83a1.43,1.43,0,0,1,.94-.23,1.21,1.21,0,0,1,.71.51c.12.27-.28.7-1.3,1.33a13.2,13.2,0,0,1-1.53.83c-.59.27-1.54.75-2.83,1.41s-2.28,1.18-2.95,1.54a15.09,15.09,0,0,1-1.85.86,1.27,1.27,0,0,1-1.38-.08c-.19-.07-.43-.43-.7-1a12,12,0,0,1-.67-3.3c-.2-1.61-.32-2.95-.4-4.09s-.07-3.34-.11-6.57,0-5.54.11-7a65.82,65.82,0,0,1,1.11-7.7,35.56,35.56,0,0,1,1.53-5.74l.82-2.24h-19c0,.94,0,2.12,0,3.61s-.08,3.86-.2,7.08-.43,6.53-.87,9.75a58.42,58.42,0,0,1-1.73,8.46,30.58,30.58,0,0,1-2.28,6,6.57,6.57,0,0,1-1.29,1.89,58.67,58.67,0,0,0,15.61,2,63,63,0,0,0,26.18-6.33,51.9,51.9,0,0,0,16.16-12l0-.08a7.77,7.77,0,0,1,.63-.66l.08-.08c.23-.28.51-.55.74-.87a7.6,7.6,0,0,0,.56-.59l0,0c-6.88-5.38-16.67-9.24-19.7-15.76,6.72,4.24,11.44,8.1,19.58,11.79A10.52,10.52,0,0,0,248.8,313.15Z /><path class=cls-1 d=M94.4,356.25s1.51,13.27,20.32,7,0,.6,0,.6L152.2,340l-46.33,16.24Z /><polygon class=cls-1 points="285.18 360.33 299.87 364.24 295.9 358.28 280.17 349.47 276.37 351.72 285.18 360.33"/><path class=cls-1 d=M153.67,312.3l6.26,7.88,18.67-4.47-1.21-13-1.32-.66s-3,.14-3,.72S153.67,312.3,153.67,312.3Z /><path class=cls-1 d=M249.32,312.18l-.81,1.34c-.57.9-1.38,2.13-2.23,3.23a7.4,7.4,0,0,1-.52.65c-.25.33-.53.61-.77.9l-.08.08a6.48,6.48,0,0,0-.65.7l0,.08c-.69.61.44-.86.44-.86l-22.8-9.51,2.47-9.11,7.41,2.09,1,.73c1.25.94,2.51,1.84,3.76,2.61.49.29.93.62,1.42.9A61.07,61.07,0,0,0,249.32,312.18Z /><path class=cls-1 d=M109.89,361.78s154.27-.06,184.2,2.46l-8.8-7.65L244,340l-28.67,15.32H186.72L156.21,340s-17.87,12.11-18,12.12S109.89,361.78,109.89,361.78Z /></svg> </a> 全志Linux Tina-SDK开发完全手册 </label> <div class=md-nav__source> <a href=https://github.com/DongshanPI/TinaSDK-Docs/ title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> DongshanPI/TinaSDK-Docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../.. class="md-nav__link "> <span class=md-ellipsis> 0.站点指南 </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> 0.站点指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../SupportHardware/ class=md-nav__link> <span class=md-ellipsis> 配套硬件 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> 1.构建工具使用 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 1.构建工具使用 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> TinaSDK_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> TinaSDK_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_SystemSoftware_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SystemSoftware_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> Tina环境搭建 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SystemSoftware_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> Tina编译与烧写 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SystemSoftware_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> uboot与kernel定制开发 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SystemSoftware_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 系统定制开发 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> 2.Bootloader开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 2.Bootloader开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> U-boot_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> U-boot_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_U-boot_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_U-boot_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 编译方法介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_U-boot_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> U-Boot功能与配置 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_U-boot_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> U-Boot常用命令介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_U-boot_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 调试方法与烧写 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_U-boot_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> 常用接口函数 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> 3.Linux驱动开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 3.Linux驱动开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> SID_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> SID_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_SID_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SID_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块描述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SID_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块设计 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SID_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 接口设计 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SID_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 可测试性与其他说明 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> GPIO_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> GPIO_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_GPIO_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GPIO_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GPIO_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块配置 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GPIO_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 模块接口说明 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GPIO_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 使用示例 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GPIO_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> MIPI_CSI_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> MIPI_CSI_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_MIPI_CSI_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MIPI_CSI_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MIPI_CSI_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> V4L2接口描述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MIPI_CSI_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 模块使用范例 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MIPI_CSI_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> MMC_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> MMC_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_MMC_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MMC_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MMC_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块接口说明 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MMC_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> <span class=md-ellipsis> RTC_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> RTC_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_RTC_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_RTC_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_RTC_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块配置介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_RTC_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 接口描述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_RTC_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 模块使用范例 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_RTC_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex=0> <span class=md-ellipsis> SPI_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> SPI_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_SPI_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SPI_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SPI_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 接口描述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SPI_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 模块使用范例 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SPI_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7> <label class=md-nav__link for=__nav_4_7 id=__nav_4_7_label tabindex=0> <span class=md-ellipsis> Standby_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_7_label aria-expanded=false> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Standby_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Standby_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Standby_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Standby_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_8> <label class=md-nav__link for=__nav_4_8 id=__nav_4_8_label tabindex=0> <span class=md-ellipsis> TWI_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_8_label aria-expanded=false> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> TWI_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_TWI_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_TWI_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_TWI_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块接口说明 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_TWI_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 模块使用范例 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_TWI_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_9> <label class=md-nav__link for=__nav_4_9 id=__nav_4_9_label tabindex=0> <span class=md-ellipsis> UART_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_9_label aria-expanded=false> <label class=md-nav__title for=__nav_4_9> <span class="md-nav__icon md-icon"></span> UART_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_UART_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_UART_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_UART_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块配置介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_UART_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 接口描述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_UART_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 模块使用范例 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_UART_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_10> <label class=md-nav__link for=__nav_4_10 id=__nav_4_10_label tabindex=0> <span class=md-ellipsis> USB_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_10_label aria-expanded=false> <label class=md-nav__title for=__nav_4_10> <span class="md-nav__icon md-icon"></span> USB_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_USB_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_USB_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_USB_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../Linux_USB_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 附录 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11> <label class=md-nav__link for=__nav_4_11 id=__nav_4_11_label tabindex=0> <span class=md-ellipsis> Key_快速配置使用指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_11_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11> <span class="md-nav__icon md-icon"></span> Key_快速配置使用指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Key_Quick_Configuration_UserGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Key_Quick_Configuration_UserGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Key_Quick_Configuration_UserGuide-03/ class=md-nav__link> <span class=md-ellipsis> GPIO-Key </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Key_Quick_Configuration_UserGuide-04/ class=md-nav__link> <span class=md-ellipsis> ADC-Key </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Key_Quick_Configuration_UserGuide-05/ class=md-nav__link> <span class=md-ellipsis> AXP-Key </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_12> <label class=md-nav__link for=__nav_4_12 id=__nav_4_12_label tabindex=0> <span class=md-ellipsis> PMU_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_12_label aria-expanded=false> <label class=md-nav__title for=__nav_4_12> <span class="md-nav__icon md-icon"></span> PMU_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_PMU_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_PMU_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_PMU_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块使用范例 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_PMU_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_13> <label class=md-nav__link for=__nav_4_13 id=__nav_4_13_label tabindex=0> <span class=md-ellipsis> Wi-Fi_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_13_label aria-expanded=false> <label class=md-nav__title for=__nav_4_13> <span class="md-nav__icon md-icon"></span> Wi-Fi_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Wi-Fi_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Wi-Fi_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi简介 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Wi-Fi_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi模组移植 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Wi-Fi_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi_manager与Softap介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Wi-Fi_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 常见问题 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> 4.基础组件软件库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> 4.基础组件软件库 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1> <label class=md-nav__link for=__nav_5_1 id=__nav_5_1_label tabindex=0> <span class=md-ellipsis> PWM_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> PWM_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_PWM_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_PWM_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2 checked> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> MPP_sample_使用说明 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=true> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> MPP_sample_使用说明 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_MPP_Sample_Instructions-01/ class=md-nav__link> <span class=md-ellipsis> 简述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MPP_Sample_Instructions-02/ class=md-nav__link> <span class=md-ellipsis> 配置编译测试 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MPP_Sample_Instructions-03/ class=md-nav__link> <span class=md-ellipsis> 分类情况 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_MPP_Sample_Instructions-04/ class=md-nav__link> <span class=md-ellipsis> 各平台支持情况 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 测试方法 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 测试方法 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#8-sample class=md-nav__link> <span class=md-ellipsis> 8 sample 的测试方法 </span> </a> <nav class=md-nav aria-label="8 sample 的测试方法"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#81 class=md-nav__link> <span class=md-ellipsis> 8.1 视频 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Linux_MPP_Sample_Instructions-06/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> Camera_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Camera_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Camera_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Camera_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Camera_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块开发 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Camera_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 模块配置 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Camera_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 模块调试常见问题 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Camera_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> camera功能测试 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> E907_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> E907_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_E907_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_E907_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 启动E907环境 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_E907_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> AMP环境搭建 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_E907_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 开发使用 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_E907_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 其他 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> LCD_调试指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> LCD_调试指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_LCD_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_LCD_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_LCD_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 硬件参数说明 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_LCD_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 调试方法 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_LCD_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../Linux_LCD_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> 总结 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex=0> <span class=md-ellipsis> Display_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Display_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块接口概述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 操作与接口说明 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 输出设备介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> IOCTL接口描述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-07/ class=md-nav__link> <span class=md-ellipsis> sysfs接口描述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-08/ class=md-nav__link> <span class=md-ellipsis> 数据结构 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Display_DevelopmentGuide-09/ class=md-nav__link> <span class=md-ellipsis> 调试 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex=0> <span class=md-ellipsis> 图形系统_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> 图形系统_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_GraphicsSystem_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GraphicsSystem_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> MiniGUI </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GraphicsSystem_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> QT </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GraphicsSystem_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> EFL与GTK+ </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GraphicsSystem_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> WebKitGtk与DirectFB </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GraphicsSystem_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> Wayland </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GraphicsSystem_DevelopmentGuide-07/ class=md-nav__link> <span class=md-ellipsis> LVGL </span> </a> </li> <li class=md-nav__item> <a href=../Linux_GraphicsSystem_DevelopmentGuide-08/ class=md-nav__link> <span class=md-ellipsis> Flutter </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_8> <label class=md-nav__link for=__nav_5_8 id=__nav_5_8_label tabindex=0> <span class=md-ellipsis> 音频_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> 音频_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_AudioFrequency_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_AudioFrequency_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_AudioFrequency_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 常用工具及调试方法 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_AudioFrequency_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 常用接口说明 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_AudioFrequency_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 开机音乐功能 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_AudioFrequency_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> 各平台音频模块注意事项 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_9> <label class=md-nav__link for=__nav_5_9 id=__nav_5_9_label tabindex=0> <span class=md-ellipsis> WiFi_RF测试_使用指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_9_label aria-expanded=false> <label class=md-nav__title for=__nav_5_9> <span class="md-nav__icon md-icon"></span> WiFi_RF测试_使用指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_WiFi_RFTest_UserGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_WiFi_RFTest_UserGuide-02/ class=md-nav__link> <span class=md-ellipsis> WiFi测试 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_WiFi_RFTest_UserGuide-03/ class=md-nav__link> <span class=md-ellipsis> XRADIO系列模组 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_WiFi_RFTest_UserGuide-04/ class=md-nav__link> <span class=md-ellipsis> RTL系列模组 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_WiFi_RFTest_UserGuide-05/ class=md-nav__link> <span class=md-ellipsis> SRRC认证 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_10> <label class=md-nav__link for=__nav_5_10 id=__nav_5_10_label tabindex=0> <span class=md-ellipsis> 各平台多媒体格式支持列表 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_10_label aria-expanded=false> <label class=md-nav__title for=__nav_5_10> <span class="md-nav__icon md-icon"></span> 各平台多媒体格式支持列表 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Support_List_Multimedia_Formats_Each_Platform-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Support_List_Multimedia_Formats_Each_Platform-02/ class=md-nav__link> <span class=md-ellipsis> 芯片 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_11> <label class=md-nav__link for=__nav_5_11 id=__nav_5_11_label tabindex=0> <span class=md-ellipsis> 配网_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_11_label aria-expanded=false> <label class=md-nav__title for=__nav_5_11> <span class="md-nav__icon md-icon"></span> 配网_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Distribution_Network_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Distribution_Network_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> wifimanager-v2.0配网 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Distribution_Network_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 测试说明 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_12> <label class=md-nav__link for=__nav_5_12 id=__nav_5_12_label tabindex=0> <span class=md-ellipsis> 网络性能_参考指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_12_label aria-expanded=false> <label class=md-nav__title for=__nav_5_12> <span class="md-nav__icon md-icon"></span> 网络性能_参考指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Network_Performance_Reference_Guide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Network_Performance_Reference_Guide-02/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi性能测试 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Network_Performance_Reference_Guide-03/ class=md-nav__link> <span class=md-ellipsis> 蓝牙与WIFI蓝牙共存测试 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> 5.系统开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> 5.系统开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1 id=__nav_6_1_label tabindex=0> <span class=md-ellipsis> 系统配置_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> 系统配置_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Deploy_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与配置介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Deploy_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 系统配置介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Deploy_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 设备树介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Deploy_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 设备树的使用与调试 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Deploy_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> 分区表说明 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> 系统调试_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> 系统调试_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_SystemDebug_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SystemDebug_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 调试方法及工具 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> 系统裁剪_参考指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> 系统裁剪_参考指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_SystemClipping_Reference_Guide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SystemClipping_Reference_Guide-02/ class=md-nav__link> <span class=md-ellipsis> 系统裁剪介绍 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> <span class=md-ellipsis> 启动优化_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> 启动优化_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_systemStartup_Optimization-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_systemStartup_Optimization-02/ class=md-nav__link> <span class=md-ellipsis> 启动速度优化简介 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_systemStartup_Optimization-03/ class=md-nav__link> <span class=md-ellipsis> Tina启动速度优化 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> <span class=md-ellipsis> SPINAND_UBI_离线烧录_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> SPINAND_UBI_离线烧录_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Spinubi_OfflineBurning_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Spinubi_OfflineBurning_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 数据布局说明 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Spinubi_OfflineBurning_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 调整内存说明 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_6> <label class=md-nav__link for=__nav_6_6 id=__nav_6_6_label tabindex=0> <span class=md-ellipsis> NOR_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> NOR_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_NOR_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_NOR_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 模块介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_NOR_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 接口描述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_NOR_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 使用例子 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_7> <label class=md-nav__link for=__nav_6_7 id=__nav_6_7_label tabindex=0> <span class=md-ellipsis> SPINAND 开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_7_label aria-expanded=false> <label class=md-nav__title for=__nav_6_7> <span class="md-nav__icon md-icon"></span> SPINAND 开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_SPINAND_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SPINAND_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 流程设计 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_SPINAND_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 模块配置 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_8> <label class=md-nav__link for=__nav_6_8 id=__nav_6_8_label tabindex=0> <span class=md-ellipsis> 存储_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_8_label aria-expanded=false> <label class=md-nav__title for=__nav_6_8> <span class="md-nav__icon md-icon"></span> 存储_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Save_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Save_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 分区管理 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Save_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 系统挂载 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Save_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 文件系统支持情况 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Save_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> UBI_VS._NFTL </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Save_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> rootfs_data及UDISK </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Save_DevelopmentGuide-07/ class=md-nav__link> <span class=md-ellipsis> 关键数据保护 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_9> <label class=md-nav__link for=__nav_6_9 id=__nav_6_9_label tabindex=0> <span class=md-ellipsis> OTA_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_9_label aria-expanded=false> <label class=md-nav__title for=__nav_6_9> <span class="md-nav__icon md-icon"></span> OTA_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_OTA_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_OTA_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> ota-burnboot介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_OTA_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> Tina_SWUpdate_OTA介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_OTA_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> Tina_misc-upgrade介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_OTA_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> Tina_upgrade_app介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_OTA_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> 注意事项与问题排查 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_10> <label class=md-nav__link for=__nav_6_10 id=__nav_6_10_label tabindex=0> <span class=md-ellipsis> syslog_使用指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_10_label aria-expanded=false> <label class=md-nav__title for=__nav_6_10> <span class="md-nav__icon md-icon"></span> syslog_使用指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_syslog_UserGuide-01/ class=md-nav__link> <span class=md-ellipsis> 基本介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_syslog_UserGuide-02/ class=md-nav__link> <span class=md-ellipsis> syslog相关软件工具 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_syslog_UserGuide-03/ class=md-nav__link> <span class=md-ellipsis> 不同syslog方案的对比 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_syslog_UserGuide-04/ class=md-nav__link> <span class=md-ellipsis> 其他注意事项 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_syslog_UserGuide-05/ class=md-nav__link> <span class=md-ellipsis> 在Tina中使用syslog </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_11> <label class=md-nav__link for=__nav_6_11 id=__nav_6_11_label tabindex=0> <span class=md-ellipsis> 安全_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_11_label aria-expanded=false> <label class=md-nav__title for=__nav_6_11> <span class="md-nav__icon md-icon"></span> 安全_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 安全系统基础 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 安全启动 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 安全操作系统 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> TA/CA开发环境 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-06/ class=md-nav__link> <span class=md-ellipsis> 安全存储 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-07/ class=md-nav__link> <span class=md-ellipsis> 安全性增强的Linux </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-08/ class=md-nav__link> <span class=md-ellipsis> 量产工具 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Security_DevelopmentGuide-09/ class=md-nav__link> <span class=md-ellipsis> 参考资料 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_12> <label class=md-nav__link for=__nav_6_12 id=__nav_6_12_label tabindex=0> <span class=md-ellipsis> 功耗管理_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_12_label aria-expanded=false> <label class=md-nav__title for=__nav_6_12> <span class="md-nav__icon md-icon"></span> 功耗管理_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Power_Consumption_Management_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Power_Consumption_Management_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> Tina功耗管理框架概述 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Power_Consumption_Management_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> Tina休眠唤醒系统简介 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Power_Consumption_Management_DevelopmentGuide-04/ class=md-nav__link> <span class=md-ellipsis> 差异化方案说明 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Power_Consumption_Management_DevelopmentGuide-05/ class=md-nav__link> <span class=md-ellipsis> FAQ问题及处理方法 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_13> <label class=md-nav__link for=__nav_6_13 id=__nav_6_13_label tabindex=0> <span class=md-ellipsis> 内存优化_开发指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_13_label aria-expanded=false> <label class=md-nav__title for=__nav_6_13> <span class="md-nav__icon md-icon"></span> 内存优化_开发指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Memory_Optimization_DevelopmentGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Memory_Optimization_DevelopmentGuide-02/ class=md-nav__link> <span class=md-ellipsis> 内存使用情况分析 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Memory_Optimization_DevelopmentGuide-03/ class=md-nav__link> <span class=md-ellipsis> 内存优化 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_14> <label class=md-nav__link for=__nav_6_14 id=__nav_6_14_label tabindex=0> <span class=md-ellipsis> 存储性能_参考指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_14_label aria-expanded=false> <label class=md-nav__title for=__nav_6_14> <span class="md-nav__icon md-icon"></span> 存储性能_参考指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Storage_Performance_Reference_Guide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Storage_Performance_Reference_Guide-02/ class=md-nav__link> <span class=md-ellipsis> 经验性能值 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Storage_Performance_Reference_Guide-03/ class=md-nav__link> <span class=md-ellipsis> 顺序与随机读写性能 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Storage_Performance_Reference_Guide-04/ class=md-nav__link> <span class=md-ellipsis> 读写性能的影响因素 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_15> <label class=md-nav__link for=__nav_6_15 id=__nav_6_15_label tabindex=0> <span class=md-ellipsis> 打包流程_说明指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_15_label aria-expanded=false> <label class=md-nav__title for=__nav_6_15> <span class="md-nav__icon md-icon"></span> 打包流程_说明指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Packaging_Process_DescriptionGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Packaging_Process_DescriptionGuide-02/ class=md-nav__link> <span class=md-ellipsis> 打包工具介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Packaging_Process_DescriptionGuide-03/ class=md-nav__link> <span class=md-ellipsis> 打包脚本分析 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Packaging_Process_DescriptionGuide-04/ class=md-nav__link> <span class=md-ellipsis> 获得打包后的分区镜像文件 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Packaging_Process_DescriptionGuide-05/ class=md-nav__link> <span class=md-ellipsis> 打包常见问题FAQ </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Packaging_Process_DescriptionGuide-06/ class=md-nav__link> <span class=md-ellipsis> 打包流程总结 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_16> <label class=md-nav__link for=__nav_6_16 id=__nav_6_16_label tabindex=0> <span class=md-ellipsis> 量产测试_使用指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_16_label aria-expanded=false> <label class=md-nav__title for=__nav_6_16> <span class="md-nav__icon md-icon"></span> 量产测试_使用指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Mass_Production_UserGuide-01/ class=md-nav__link> <span class=md-ellipsis> 概述与介绍 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Mass_Production_UserGuide-02/ class=md-nav__link> <span class=md-ellipsis> 配置 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Mass_Production_UserGuide-03/ class=md-nav__link> <span class=md-ellipsis> 测试环境搭建 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Mass_Production_UserGuide-04/ class=md-nav__link> <span class=md-ellipsis> 量产测试流程 </span> </a> </li> <li class=md-nav__item> <a href=../Linux_Mass_Production_UserGuide-05/ class=md-nav__link> <span class=md-ellipsis> 各平台Tinatest场景验证表 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> 6.应用示例与项目 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> 6.应用示例与项目 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1 id=__nav_7_1_label tabindex=0> <span class=md-ellipsis> LVGL开发实战 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> LVGL开发实战 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ProjectActualCombat/GUI-LvglExample-01/ class=md-nav__link> <span class=md-ellipsis> 2048小游戏 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#8-sample class=md-nav__link> <span class=md-ellipsis> 8 sample 的测试方法 </span> </a> <nav class=md-nav aria-label="8 sample 的测试方法"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#81 class=md-nav__link> <span class=md-ellipsis> 8.1 视频 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>测试方法</h1> <h2 id=8-sample>8 sample 的测试方法</h2> <p>本章节具体介绍 MPP 各 sample 的测试方法。主要包括：测试目的、组件依赖、测试通路、源 文件、目标文件、参数配置、测试指令、退出测试、预期结果等。</p> <h3 id=81>8.1 视频</h3> <h4 id=811-sample_drivervipp>8.1.1 sample_driverVipp</h4> <p>测试目的：</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>演示直接调用vin驱动接口获取视频帧。
<a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>该sample没有使用任何mpp组件。
</code></pre></div> <p>组件依赖： </p> <div class=highlight><pre><span></span><code><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a>无
</code></pre></div> <p>测试通路：</p> <p><img alt=image-20221120170233258 src=https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120170233258.png></p> <center><center><center>图 8-1: MPP_sample 测试通路-sample_driverVipp</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a>无 
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a>每隔若干帧保存一帧到指定的output目录。 
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a>video_device: 指定vipp设备节点，通常取值0、1、2、3（对于V853，通常取值0、4、8、12）。 
<a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a>capture_width: 指定camera采集的图像宽度。
<a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a>capture_height: 指定camera采集的图像高度。 
<a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a>pixel_format: 指定camera采集的图像格式。 
<a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a>fps: 指定camera采集的帧率。
<a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a>test_frame_count: 指定测试采集的frame总数，0表示无限。 
<a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a>store_count: 指定保存的图像数量。 
<a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a>store_interval: 指定保存图像的周期，即每n帧图像保存1帧。
<a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a>frame_saving_path: 指定保存图像的目录，该目录要确保存在。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a># cd /mnt/extsd/
<a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a># ./sample_driverVipp # 需要逐个指定参数。
<a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a>或者一次性指定所有测试参数
<a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a># ./sample_driverVipp 0 1920 1080 8 60 0 10 60 /mnt/extsd/
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a>Melis上该sample的位置：
<a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a>melis\source\ekernel\subsys\avframework\v4l2\drivers\media\platform\sunxi-vin\
<a href=#__codelineno-6-3 id=__codelineno-6-3 name=__codelineno-6-3></a>sample_driverVipp
<a href=#__codelineno-6-4 id=__codelineno-6-4 name=__codelineno-6-4></a>测试方法：
<a href=#__codelineno-6-5 id=__codelineno-6-5 name=__codelineno-6-5></a>sample_driverVipp 0 1920 1080 8 60 0 10 60 /mnt/E/
</code></pre></div> #### 8.1.2 sample_virvi 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a>演示采集图像帧，最多可支持4路vipp采集。
<a href=#__codelineno-7-2 id=__codelineno-7-2 name=__codelineno-7-2></a>该sample测试mpi_vi组件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a>mpp_vi
</code></pre></div> 测试通路： ![image-20221120170355890](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120170355890.png) <center>图 8-2: MPP_sample 测试通路-sample_virvi</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a>1. 连续YUV文件
<a href=#__codelineno-10-2 id=__codelineno-10-2 name=__codelineno-10-2></a>/mnt/extsd/test.yuv
<a href=#__codelineno-10-3 id=__codelineno-10-3 name=__codelineno-10-3></a>2. 单帧YUV文件
<a href=#__codelineno-10-4 id=__codelineno-10-4 name=__codelineno-10-4></a>存放在指定路径/mnt/extsd 下面
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a>最多支持4路vipp采集，这4路的参数可单独配置。
<a href=#__codelineno-11-2 id=__codelineno-11-2 name=__codelineno-11-2></a>第0路vipp的参数配置
<a href=#__codelineno-11-3 id=__codelineno-11-3 name=__codelineno-11-3></a>dev_num_0: 指定vipp设备ID，通常取值0，表示vipp0（对于V853，通常也取值0，表示vipp0）。
<a href=#__codelineno-11-4 id=__codelineno-11-4 name=__codelineno-11-4></a>isp_dev_num_0: 指定isp设备ID，通常取值0，表示isp0。
<a href=#__codelineno-11-5 id=__codelineno-11-5 name=__codelineno-11-5></a>pic_width_0: 指定vipp采集图像的宽度。
<a href=#__codelineno-11-6 id=__codelineno-11-6 name=__codelineno-11-6></a>pic_height_0: 指定vipp采集图像的高度。
<a href=#__codelineno-11-7 id=__codelineno-11-7 name=__codelineno-11-7></a>frame_rate_0: 指定vipp采集图像的帧率。
<a href=#__codelineno-11-8 id=__codelineno-11-8 name=__codelineno-11-8></a>pic_format_0: 指定vipp采集图像的像素格式。
<a href=#__codelineno-11-9 id=__codelineno-11-9 name=__codelineno-11-9></a>color_space_0: 指定vipp采集图像的颜色空间格式。
<a href=#__codelineno-11-10 id=__codelineno-11-10 name=__codelineno-11-10></a>enable_wdr_mode_0: 指定vipp采集图像是否开启WDR。
<a href=#__codelineno-11-11 id=__codelineno-11-11 name=__codelineno-11-11></a>drop_frm_num_0: 指定vipp开始前丢弃的帧数。
<a href=#__codelineno-11-12 id=__codelineno-11-12 name=__codelineno-11-12></a>第1路vipp的参数配置
<a href=#__codelineno-11-13 id=__codelineno-11-13 name=__codelineno-11-13></a>dev_num_1: 指定vipp设备ID，通常取值1，表示vipp1（对于V853，通常取值4，表示vipp4）。
<a href=#__codelineno-11-14 id=__codelineno-11-14 name=__codelineno-11-14></a>isp_dev_num_1: 指定isp设备ID，通常取值0，表示isp0。
<a href=#__codelineno-11-15 id=__codelineno-11-15 name=__codelineno-11-15></a>pic_width_1: 指定vipp采集图像的宽度。
<a href=#__codelineno-11-16 id=__codelineno-11-16 name=__codelineno-11-16></a>pic_height_1: 指定vipp采集图像的高度。
<a href=#__codelineno-11-17 id=__codelineno-11-17 name=__codelineno-11-17></a>frame_rate_1: 指定vipp采集图像的帧率。
<a href=#__codelineno-11-18 id=__codelineno-11-18 name=__codelineno-11-18></a>pic_format_1: 指定vipp采集图像的像素格式。
<a href=#__codelineno-11-19 id=__codelineno-11-19 name=__codelineno-11-19></a>color_space_1: 指定vipp采集图像的颜色空间格式。
<a href=#__codelineno-11-20 id=__codelineno-11-20 name=__codelineno-11-20></a>enable_wdr_mode_1: 指定vipp采集图像是否开启WDR。
<a href=#__codelineno-11-21 id=__codelineno-11-21 name=__codelineno-11-21></a>drop_frm_num_1: 指定vipp开始前丢弃的帧数。
<a href=#__codelineno-11-22 id=__codelineno-11-22 name=__codelineno-11-22></a>第2路vipp的参数配置
<a href=#__codelineno-11-23 id=__codelineno-11-23 name=__codelineno-11-23></a>dev_num_2: 指定vipp设备ID，通常取值2，表示vipp2（对于V853，通常取值8，表示vipp8）。
<a href=#__codelineno-11-24 id=__codelineno-11-24 name=__codelineno-11-24></a>isp_dev_num_2: 指定isp设备ID，通常取值0，表示isp0。
<a href=#__codelineno-11-25 id=__codelineno-11-25 name=__codelineno-11-25></a>pic_width_2: 指定vipp采集图像的宽度。
<a href=#__codelineno-11-26 id=__codelineno-11-26 name=__codelineno-11-26></a>pic_height_2: 指定vipp采集图像的高度。
<a href=#__codelineno-11-27 id=__codelineno-11-27 name=__codelineno-11-27></a>frame_rate_2: 指定vipp采集图像的帧率。
<a href=#__codelineno-11-28 id=__codelineno-11-28 name=__codelineno-11-28></a>pic_format_2: 指定vipp采集图像的像素格式。
<a href=#__codelineno-11-29 id=__codelineno-11-29 name=__codelineno-11-29></a>color_space_2: 指定vipp采集图像的颜色空间格式。
<a href=#__codelineno-11-30 id=__codelineno-11-30 name=__codelineno-11-30></a>enable_wdr_mode_2: 指定vipp采集图像是否开启WDR。
<a href=#__codelineno-11-31 id=__codelineno-11-31 name=__codelineno-11-31></a>drop_frm_num_2: 指定vipp开始前丢弃的帧数。
<a href=#__codelineno-11-32 id=__codelineno-11-32 name=__codelineno-11-32></a>第3路vipp的参数配置
<a href=#__codelineno-11-33 id=__codelineno-11-33 name=__codelineno-11-33></a>dev_num_3: 指定vipp设备ID，通常取值3，表示vipp3（对于V853，通常取值12，表示vipp12）。
<a href=#__codelineno-11-34 id=__codelineno-11-34 name=__codelineno-11-34></a>isp_dev_num_3: 指定isp设备ID，通常取值0，表示isp0。
<a href=#__codelineno-11-35 id=__codelineno-11-35 name=__codelineno-11-35></a>pic_width_3: 指定vipp采集图像的宽度。
<a href=#__codelineno-11-36 id=__codelineno-11-36 name=__codelineno-11-36></a>pic_height_3: 指定vipp采集图像的高度。
<a href=#__codelineno-11-37 id=__codelineno-11-37 name=__codelineno-11-37></a>frame_rate_3: 指定vipp采集图像的帧率。
<a href=#__codelineno-11-38 id=__codelineno-11-38 name=__codelineno-11-38></a>pic_format_3: 指定vipp采集图像的像素格式。
<a href=#__codelineno-11-39 id=__codelineno-11-39 name=__codelineno-11-39></a>color_space_3: 指定vipp采集图像的颜色空间格式。
<a href=#__codelineno-11-40 id=__codelineno-11-40 name=__codelineno-11-40></a>enable_wdr_mode_3: 指定vipp采集图像是否开启WDR。
<a href=#__codelineno-11-41 id=__codelineno-11-41 name=__codelineno-11-41></a>drop_frm_num_3: 指定vipp开始前丢弃的帧数。
<a href=#__codelineno-11-42 id=__codelineno-11-42 name=__codelineno-11-42></a>指定需要保存哪一路vipp的YUV数据，以及保存的帧数和文件
<a href=#__codelineno-11-43 id=__codelineno-11-43 name=__codelineno-11-43></a>save_pic_dev: 保存指定vipp的YUV数据。
<a href=#__codelineno-11-44 id=__codelineno-11-44 name=__codelineno-11-44></a>yuv_frm_count: 指定保存的图像帧数。
<a href=#__codelineno-11-45 id=__codelineno-11-45 name=__codelineno-11-45></a>yuv_file: 指定保存的路径和文件名。
<a href=#__codelineno-11-46 id=__codelineno-11-46 name=__codelineno-11-46></a>保存 save_pic_dev 指定vipp的单帧YUV数据的总帧数、间隔和位置
<a href=#__codelineno-11-47 id=__codelineno-11-47 name=__codelineno-11-47></a>raw_store_count: 指定保存单帧YUV数据的总帧数。
<a href=#__codelineno-11-48 id=__codelineno-11-48 name=__codelineno-11-48></a>raw_store_interval: 指定保存单帧YUV数据的间隔，单位: 帧。
<a href=#__codelineno-11-49 id=__codelineno-11-49 name=__codelineno-11-49></a>store_dir: 指定保存单帧YUV数据的位置。
<a href=#__codelineno-11-50 id=__codelineno-11-50 name=__codelineno-11-50></a>指定保存 YUV 的 buffer 长度和个数
<a href=#__codelineno-11-51 id=__codelineno-11-51 name=__codelineno-11-51></a>save_pic_buffer_len: 指定保存 YUV 的 buffer 长度，默认值0，表示根据像素格式和分辨率自动换算 buffer 长
<a href=#__codelineno-11-52 id=__codelineno-11-52 name=__codelineno-11-52></a>度。
<a href=#__codelineno-11-53 id=__codelineno-11-53 name=__codelineno-11-53></a>save_pic_buffer_num: 指定保存 YUV 的 buffer 个数。
<a href=#__codelineno-11-54 id=__codelineno-11-54 name=__codelineno-11-54></a>test_duration: 测试时间，单位: s。
</code></pre></div> 测试指令: 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a># cd /mnt/extsd/
<a href=#__codelineno-12-2 id=__codelineno-12-2 name=__codelineno-12-2></a>#  # ./sample_virvi -path ./sample_virvi.conf 
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a># sample_virvi -path ./mnt/E/sample_virvi.conf 
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-14-1 id=__codelineno-14-1 name=__codelineno-14-1></a>测试达到设定的时间后自动退出测试，或者按 “ctrl + c” 提前结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-15-1 id=__codelineno-15-1 name=__codelineno-15-1></a>1.测试程序运行正常，测试过程没有异常打印。 
<a href=#__codelineno-15-2 id=__codelineno-15-2 name=__codelineno-15-2></a>
<a href=#__codelineno-15-3 id=__codelineno-15-3 name=__codelineno-15-3></a>2.使用 YUView 软件查看测试生成的 YUV 文件正常。 
</code></pre></div> #### 8.1.3 sample_virvi2vo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a>演示采集+预览。
<a href=#__codelineno-16-2 id=__codelineno-16-2 name=__codelineno-16-2></a>该sample测试mpi_vi和mpi_vo组件的绑定组合。
<a href=#__codelineno-16-3 id=__codelineno-16-3 name=__codelineno-16-3></a>创建mpi_vi和mpi_vo，将它们绑定，再分别启动。mpi_vi采集图像，直接传输给mpi_vo显示。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a>mpp_vi
<a href=#__codelineno-17-2 id=__codelineno-17-2 name=__codelineno-17-2></a>mpp_hw_display
<a href=#__codelineno-17-3 id=__codelineno-17-3 name=__codelineno-17-3></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120170432649](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120170432649.png) <center>图 8-3: MPP_sample 测试通路-sample_virvi2vo</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a>无 
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a>无 
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-20-1 id=__codelineno-20-1 name=__codelineno-20-1></a>以下配置支持测试：3路vipp采集+vo不同layer同时预览，再加上ui显示。
<a href=#__codelineno-20-2 id=__codelineno-20-2 name=__codelineno-20-2></a>vipp0采集 + vo layer0预览的配置
<a href=#__codelineno-20-3 id=__codelineno-20-3 name=__codelineno-20-3></a>capture_width: 指定vipp0采集图像的宽度。
<a href=#__codelineno-20-4 id=__codelineno-20-4 name=__codelineno-20-4></a>capture_height: 指定vipp0采集图像的高度。
<a href=#__codelineno-20-5 id=__codelineno-20-5 name=__codelineno-20-5></a>display_x: 指定vo显示输出图像的x坐标。
<a href=#__codelineno-20-6 id=__codelineno-20-6 name=__codelineno-20-6></a>display_y: 指定vo显示输出图像的y坐标。
<a href=#__codelineno-20-7 id=__codelineno-20-7 name=__codelineno-20-7></a>display_width: 指定vo显示输出图像的宽度。
<a href=#__codelineno-20-8 id=__codelineno-20-8 name=__codelineno-20-8></a>display_height: 指定vo显示输出图像的高度。
<a href=#__codelineno-20-9 id=__codelineno-20-9 name=__codelineno-20-9></a>layer_num: 指定vo显示的层数，通常取值为0，表示vo的layer0。
<a href=#__codelineno-20-10 id=__codelineno-20-10 name=__codelineno-20-10></a>dev_num: 指定vipp设备号，通常取值为0，表示vipp0（对于V853，通常取值为0，表示vipp0）。
<a href=#__codelineno-20-11 id=__codelineno-20-11 name=__codelineno-20-11></a>vipp4采集 + vo layer4预览的配置
<a href=#__codelineno-20-12 id=__codelineno-20-12 name=__codelineno-20-12></a>capture_width2: 指定vipp0采集图像的宽度。
<a href=#__codelineno-20-13 id=__codelineno-20-13 name=__codelineno-20-13></a>capture_height2: 指定vipp0采集图像的高度。
<a href=#__codelineno-20-14 id=__codelineno-20-14 name=__codelineno-20-14></a>display_x2: 指定vo显示输出图像的x坐标。
<a href=#__codelineno-20-15 id=__codelineno-20-15 name=__codelineno-20-15></a>display_y2: 指定vo显示输出图像的y坐标。
<a href=#__codelineno-20-16 id=__codelineno-20-16 name=__codelineno-20-16></a>display_width2: 指定vo显示输出图像的宽度。
<a href=#__codelineno-20-17 id=__codelineno-20-17 name=__codelineno-20-17></a>display_height2: 指定vo显示输出图像的高度。
<a href=#__codelineno-20-18 id=__codelineno-20-18 name=__codelineno-20-18></a>layer_num2: 指定vo显示的层数，通常取值为4，表示vo的layer4。
<a href=#__codelineno-20-19 id=__codelineno-20-19 name=__codelineno-20-19></a>dev_num2: 指定vipp设备号，通常取值为1，表示vipp1（对于V853，通常取值为4，表示vipp4）。
<a href=#__codelineno-20-20 id=__codelineno-20-20 name=__codelineno-20-20></a>vipp8采集 + vo layer8预览的配置
<a href=#__codelineno-20-21 id=__codelineno-20-21 name=__codelineno-20-21></a>capture_width3: 指定vipp0采集图像的宽度。
<a href=#__codelineno-20-22 id=__codelineno-20-22 name=__codelineno-20-22></a>capture_height3: 指定vipp0采集图像的高度。
<a href=#__codelineno-20-23 id=__codelineno-20-23 name=__codelineno-20-23></a>display_x3: 指定vo显示输出图像的x坐标。
<a href=#__codelineno-20-24 id=__codelineno-20-24 name=__codelineno-20-24></a>display_y3: 指定vo显示输出图像的y坐标。
<a href=#__codelineno-20-25 id=__codelineno-20-25 name=__codelineno-20-25></a>display_width3: 指定vo显示输出图像的宽度。
<a href=#__codelineno-20-26 id=__codelineno-20-26 name=__codelineno-20-26></a>display_height3: 指定vo显示输出图像的高度。
<a href=#__codelineno-20-27 id=__codelineno-20-27 name=__codelineno-20-27></a>layer_num3: 指定vo显示的层数，通常取值为8，表示vo的layer8。
<a href=#__codelineno-20-28 id=__codelineno-20-28 name=__codelineno-20-28></a>dev_num3: 指定vipp设备号，通常取值为2，表示vipp2（对于V853，通常取值为8，表示vipp8）。
<a href=#__codelineno-20-29 id=__codelineno-20-29 name=__codelineno-20-29></a>add_ui_layer: 是否增加UI层，默认0，表示不增加。
<a href=#__codelineno-20-30 id=__codelineno-20-30 name=__codelineno-20-30></a>ui_test_layer: 指定UI显示的layer。
<a href=#__codelineno-20-31 id=__codelineno-20-31 name=__codelineno-20-31></a>ui_display_width: 指定UI显示的宽度。
<a href=#__codelineno-20-32 id=__codelineno-20-32 name=__codelineno-20-32></a>ui_display_height: 指定UI显示的高度。
<a href=#__codelineno-20-33 id=__codelineno-20-33 name=__codelineno-20-33></a>disp_type: 指定显示设备类型，比如：lcd、hdmi、cvbs。
<a href=#__codelineno-20-34 id=__codelineno-20-34 name=__codelineno-20-34></a>pic_format: 指定像素格式。
<a href=#__codelineno-20-35 id=__codelineno-20-35 name=__codelineno-20-35></a>frame_rate: 指定帧率，单位: fps。
<a href=#__codelineno-20-36 id=__codelineno-20-36 name=__codelineno-20-36></a>test_duration: 测试时间，单位: s。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-21-1 id=__codelineno-21-1 name=__codelineno-21-1></a># cd /mnt/extsd/
<a href=#__codelineno-21-2 id=__codelineno-21-2 name=__codelineno-21-2></a># ./sample_virvi2vo -path ./sample_virvi2vo.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a># sample_virvi2vo -path ./mnt/E/sample_virvi2vo.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-23-1 id=__codelineno-23-1 name=__codelineno-23-1></a>测试达到设定的时间后自动退出测试，或者按 “ctrl + c” 提前结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-24-2 id=__codelineno-24-2 name=__codelineno-24-2></a>2. 屏幕实时显示视频图像正常，无卡顿、花屏等。
</code></pre></div> #### 8.1.4 sample_virvi2vo_zoom 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-25-1 id=__codelineno-25-1 name=__codelineno-25-1></a>演示直接使用pi_vi和mpi_vo组件实现图像的缩放，可支持4K图像缩放。
<a href=#__codelineno-25-2 id=__codelineno-25-2 name=__codelineno-25-2></a>该sample测试mpi_vi和mpi_vo组件的非绑定。
<a href=#__codelineno-25-3 id=__codelineno-25-3 name=__codelineno-25-3></a>mpi_vi采集图像，经过缩放算法处理后，把指定区域送给mpi_vo显示。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-26-1 id=__codelineno-26-1 name=__codelineno-26-1></a>mpp_vi
<a href=#__codelineno-26-2 id=__codelineno-26-2 name=__codelineno-26-2></a>mpp_hw_display
<a href=#__codelineno-26-3 id=__codelineno-26-3 name=__codelineno-26-3></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120170458268](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120170458268.png) <center>图 8-4: MPP_sample 测试通路-sample_virvi2vo_zoom</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-27-1 id=__codelineno-27-1 name=__codelineno-27-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-28-1 id=__codelineno-28-1 name=__codelineno-28-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-29-1 id=__codelineno-29-1 name=__codelineno-29-1></a>capture_width: 指定camera采集图像的宽度。
<a href=#__codelineno-29-2 id=__codelineno-29-2 name=__codelineno-29-2></a>capture_height: 指定camera采集图像的高度。
<a href=#__codelineno-29-3 id=__codelineno-29-3 name=__codelineno-29-3></a>display_width: 指定vo显示输出图像的宽度。
<a href=#__codelineno-29-4 id=__codelineno-29-4 name=__codelineno-29-4></a>display_height: 指定vo显示输出图像的高度。
<a href=#__codelineno-29-5 id=__codelineno-29-5 name=__codelineno-29-5></a>dev_num: 指定vipp设备号。
<a href=#__codelineno-29-6 id=__codelineno-29-6 name=__codelineno-29-6></a>disp_type: 指定vo显示设备类型（hdmi, lcd, cvbs）。
<a href=#__codelineno-29-7 id=__codelineno-29-7 name=__codelineno-29-7></a>pic_format: 指定camera采集的图像像素格式。
<a href=#__codelineno-29-8 id=__codelineno-29-8 name=__codelineno-29-8></a>frame_rate: 指定camera采集的帧率，单位: fps。
<a href=#__codelineno-29-9 id=__codelineno-29-9 name=__codelineno-29-9></a>test_duration: 指定测试时间，单位: s。
<a href=#__codelineno-29-10 id=__codelineno-29-10 name=__codelineno-29-10></a>zoom_speed: 缩放的速度，一般建议设置为10。值越小，速度越快。
<a href=#__codelineno-29-11 id=__codelineno-29-11 name=__codelineno-29-11></a>zoom_max_cnt: 缩放的次数。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-30-1 id=__codelineno-30-1 name=__codelineno-30-1></a># cd /mnt/extsd/
<a href=#__codelineno-30-2 id=__codelineno-30-2 name=__codelineno-30-2></a># ./sample_virvi2vo_zoom -path ./sample_virvi2vo_zoom.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-31-1 id=__codelineno-31-1 name=__codelineno-31-1></a># sample_virvi2vo_zoom -path /mnt/E/sample_virvi2vo_zoom.conf
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-32-1 id=__codelineno-32-1 name=__codelineno-32-1></a>达到缩放次数或指定测试时间后自动退出测试，或者按 “ctrl + c” 提前结束测试
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-33-1 id=__codelineno-33-1 name=__codelineno-33-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-33-2 id=__codelineno-33-2 name=__codelineno-33-2></a>2. 屏幕实时显示视频图像缩放效果正常，无卡顿、花屏等。
</code></pre></div> #### 8.1.5 sample_vi_reset 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-34-1 id=__codelineno-34-1 name=__codelineno-34-1></a>该sample 演示vi 组件的reset 流程。 
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-35-1 id=__codelineno-35-1 name=__codelineno-35-1></a>无 
</code></pre></div> 测试通路： ![image-20221120172327049](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172327049.png) <center>图 8-5: MPP_sample 测试通路-sample_vi_reset</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-36-1 id=__codelineno-36-1 name=__codelineno-36-1></a>无 
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-37-1 id=__codelineno-37-1 name=__codelineno-37-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-38-1 id=__codelineno-38-1 name=__codelineno-38-1></a>test_count: 指定测试的次数。
<a href=#__codelineno-38-2 id=__codelineno-38-2 name=__codelineno-38-2></a>指定测试vipp id的起止范围
<a href=#__codelineno-38-3 id=__codelineno-38-3 name=__codelineno-38-3></a>vipp_id_start: 指定测试起始的vipp id，通常取值0，表示vipp0（对于V853，表示vipp0）。
<a href=#__codelineno-38-4 id=__codelineno-38-4 name=__codelineno-38-4></a>vipp_id_end: 指定测试结束的vipp id，通常取值3，表示vipp3（对于V853，表示vipp12）。对于V853，由于当前
<a href=#__codelineno-38-5 id=__codelineno-38-5 name=__codelineno-38-5></a>vipp12被LDC（直方图均衡）功能占用，无法测试，故实测时取值2。即测试前3个vipp。
<a href=#__codelineno-38-6 id=__codelineno-38-6 name=__codelineno-38-6></a>注：通过修改isp配置，关闭LDC功能后，可以测试全部4个vipp。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-39-1 id=__codelineno-39-1 name=__codelineno-39-1></a># cd /mnt/extsd/ 
<a href=#__codelineno-39-2 id=__codelineno-39-2 name=__codelineno-39-2></a># ./sample_vi_reset 
</code></pre></div> 【Melis】 暂不支持。 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-40-1 id=__codelineno-40-1 name=__codelineno-40-1></a>到达测试次数后自动退出测试，或者按 “ctrl + c” 提前结束测试。 
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-41-1 id=__codelineno-41-1 name=__codelineno-41-1></a>1. 测试程序运行正常，测试过程没有异常打印。
</code></pre></div> #### 8.1.6 sample_isposd 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-42-1 id=__codelineno-42-1 name=__codelineno-42-1></a>该sample测试mpi_vi和mpi_venc组件绑定。
<a href=#__codelineno-42-2 id=__codelineno-42-2 name=__codelineno-42-2></a>创建mpi_vi和mpi_venc，将它们绑定，再分别启动。mpi_vi采集图像，调用mpi_vi相关接口获取实时的ISP参数添加overlay到VENC通道。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-43-1 id=__codelineno-43-1 name=__codelineno-43-1></a>mpp_vi
<a href=#__codelineno-43-2 id=__codelineno-43-2 name=__codelineno-43-2></a>mpp_venc
<a href=#__codelineno-43-3 id=__codelineno-43-3 name=__codelineno-43-3></a>mpp_system_rgb_ctrl
</code></pre></div> 测试通路： ![image-20221120172512591](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172512591.png) <center>图 8-6: MPP_sample 测试通路-sample_isposd</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-44-1 id=__codelineno-44-1 name=__codelineno-44-1></a>无 
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-45-1 id=__codelineno-45-1 name=__codelineno-45-1></a> /mnt/extsd/testRegion.h264 
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-46-1 id=__codelineno-46-1 name=__codelineno-46-1></a>capture_width: 指定camera采集图像的宽度。
<a href=#__codelineno-46-2 id=__codelineno-46-2 name=__codelineno-46-2></a>capture_height: 指定camera采集图像的高度。
<a href=#__codelineno-46-3 id=__codelineno-46-3 name=__codelineno-46-3></a>pic_format: 指定camera采集图像的像素格式。
<a href=#__codelineno-46-4 id=__codelineno-46-4 name=__codelineno-46-4></a>frame_rate: 指定camera采集的帧率。
<a href=#__codelineno-46-5 id=__codelineno-46-5 name=__codelineno-46-5></a>test_duration: 指定测试时间，单位: s。
<a href=#__codelineno-46-6 id=__codelineno-46-6 name=__codelineno-46-6></a>overlay_x,overlay_y,overlay_w,overlay_h: 指定overlay类型的region参数。
<a href=#__codelineno-46-7 id=__codelineno-46-7 name=__codelineno-46-7></a>cover_x,cover_y,cover_w,cover_h: 指定cover类型的region参数。
<a href=#__codelineno-46-8 id=__codelineno-46-8 name=__codelineno-46-8></a>add_venc_channel: 指定是否选择VENC通道，默认0，表示不选择编码通道。
<a href=#__codelineno-46-9 id=__codelineno-46-9 name=__codelineno-46-9></a>encoder_count: 保存编码视频的帧数。
<a href=#__codelineno-46-10 id=__codelineno-46-10 name=__codelineno-46-10></a>bit_rate: 指定编码的码率，单位: bps。
<a href=#__codelineno-46-11 id=__codelineno-46-11 name=__codelineno-46-11></a>encoder_type: 指定编码类型（H.265、H.264、MJPEG）。
<a href=#__codelineno-46-12 id=__codelineno-46-12 name=__codelineno-46-12></a>output_file_path: 指定编码视频的保存路径。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-47-1 id=__codelineno-47-1 name=__codelineno-47-1></a># cd /mnt/extsd/
<a href=#__codelineno-47-2 id=__codelineno-47-2 name=__codelineno-47-2></a># ./sample_isposd -path ./sample_isposd.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-48-1 id=__codelineno-48-1 name=__codelineno-48-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-49-1 id=__codelineno-49-1 name=__codelineno-49-1></a>到达测试时间后自动退出测试，或者按 “ctrl + c” 提前结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-50-1 id=__codelineno-50-1 name=__codelineno-50-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-50-2 id=__codelineno-50-2 name=__codelineno-50-2></a>2. 生成的编码文件 testRegion.h264 的osd效果正常，且位置正确。
</code></pre></div> #### 8.1.7 sample_vin_isp_test 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-51-1 id=__codelineno-51-1 name=__codelineno-51-1></a>该sample 用于测试ISP通路，是通过调用 isp 接口抓图的 demo
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-52-1 id=__codelineno-52-1 name=__codelineno-52-1></a>无 
</code></pre></div> 测试通路： ![image-20221120172530947](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172530947.png) <center>图 8-7: MPP_sample 测试通路-sample_vin_isp_test</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-53-1 id=__codelineno-53-1 name=__codelineno-53-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-54-1 id=__codelineno-54-1 name=__codelineno-54-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-55-1 id=__codelineno-55-1 name=__codelineno-55-1></a>参数1：选择通道
<a href=#__codelineno-55-2 id=__codelineno-55-2 name=__codelineno-55-2></a>参数2：分辨率宽
<a href=#__codelineno-55-3 id=__codelineno-55-3 name=__codelineno-55-3></a>参数3：分辨率高
<a href=#__codelineno-55-4 id=__codelineno-55-4 name=__codelineno-55-4></a>参数4：保存路径
<a href=#__codelineno-55-5 id=__codelineno-55-5 name=__codelineno-55-5></a>参数5：保存帧数
<a href=#__codelineno-55-6 id=__codelineno-55-6 name=__codelineno-55-6></a>参数6：测试次数
<a href=#__codelineno-55-7 id=__codelineno-55-7 name=__codelineno-55-7></a>参数7：FPS
<a href=#__codelineno-55-8 id=__codelineno-55-8 name=__codelineno-55-8></a>参数8：WDR开关
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-56-1 id=__codelineno-56-1 name=__codelineno-56-1></a># cd /mnt/extsd/
<a href=#__codelineno-56-2 id=__codelineno-56-2 name=__codelineno-56-2></a># ./sample_vin_isp_test
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-57-1 id=__codelineno-57-1 name=__codelineno-57-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-58-1 id=__codelineno-58-1 name=__codelineno-58-1></a>测试达到指定次数后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-59-1 id=__codelineno-59-1 name=__codelineno-59-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-59-2 id=__codelineno-59-2 name=__codelineno-59-2></a>2. 使用YUView 软件分析生成的YUV文件正常。
</code></pre></div> #### 8.1.8 sample_region 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-60-1 id=__codelineno-60-1 name=__codelineno-60-1></a>演示vipp和venc的osd功能。对于V459和V833，vipp只支持orl，venc只支持overlay和cover。
<a href=#__codelineno-60-2 id=__codelineno-60-2 name=__codelineno-60-2></a>该sample测试mpi_vi和mpi_vo组件或者mpi_vi和mpi_venc组件绑定。
<a href=#__codelineno-60-3 id=__codelineno-60-3 name=__codelineno-60-3></a>创建mpi_vi和mpi_vo，将它们绑定，再分别启动。mpi_vi采集图像，添加overlay和cover不同的region到VI通道，传输给mpi_vo显示。
<a href=#__codelineno-60-4 id=__codelineno-60-4 name=__codelineno-60-4></a>也可以选择加入mpi_vi和mpi_venc组件绑定，把region添加到VENC通道上，保存编码后的视频数据文件，可以用VLC播放。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-61-1 id=__codelineno-61-1 name=__codelineno-61-1></a>无
</code></pre></div> 测试通路： ![image-20221120172548521](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172548521.png) <center>图 8-8: MPP_sample 测试通路-sample_regio</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-62-1 id=__codelineno-62-1 name=__codelineno-62-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-63-1 id=__codelineno-63-1 name=__codelineno-63-1></a>/mnt/extsd/testRegion.h264
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-64-1 id=__codelineno-64-1 name=__codelineno-64-1></a>online_en: 指定是否开启在线编码，默认0，表示不开启在线编码，即当前为离线编码。
<a href=#__codelineno-64-2 id=__codelineno-64-2 name=__codelineno-64-2></a>online_share_buf_num: 指定在线编码的共享buffer个数（1或2），默认2，表示2个buffer。注意该配置仅当配置在
<a href=#__codelineno-64-3 id=__codelineno-64-3 name=__codelineno-64-3></a>线模式时才生效。
<a href=#__codelineno-64-4 id=__codelineno-64-4 name=__codelineno-64-4></a>vipp_dev: 指定vipp设备号，默认0，表示vipp0。
<a href=#__codelineno-64-5 id=__codelineno-64-5 name=__codelineno-64-5></a>ve_ch_id: 指定编码通道，默认0，表示venc ch0。
<a href=#__codelineno-64-6 id=__codelineno-64-6 name=__codelineno-64-6></a>rgn_attach_to_vi: 指定是否测试vipp的osd，默认1，表示测试vipp的osd，其实主要是测试vipp orl功能。
<a href=#__codelineno-64-7 id=__codelineno-64-7 name=__codelineno-64-7></a>add_venc_channel: 指定是否进行编码，默认yes，表示vipp采集后图像后送给venc编码。
<a href=#__codelineno-64-8 id=__codelineno-64-8 name=__codelineno-64-8></a>rgn_attach_to_ve: 指定是否测试编码osd，默认1，表示测试编码osd。注意该配置仅当配置add_venc_channel=yes
<a href=#__codelineno-64-9 id=__codelineno-64-9 name=__codelineno-64-9></a>时才生效。
<a href=#__codelineno-64-10 id=__codelineno-64-10 name=__codelineno-64-10></a>change_disp_attr_enable: 指定开启/关闭改变osd显示位置测试，默认1，表示开启该测试。
<a href=#__codelineno-64-11 id=__codelineno-64-11 name=__codelineno-64-11></a>以下编码相关参数仅当配置add_venc_channel=yes时生效
<a href=#__codelineno-64-12 id=__codelineno-64-12 name=__codelineno-64-12></a>encoder_count: 指定编码的总帧数。
<a href=#__codelineno-64-13 id=__codelineno-64-13 name=__codelineno-64-13></a>bit_rate: 指定编码的码率，单位: bps。
<a href=#__codelineno-64-14 id=__codelineno-64-14 name=__codelineno-64-14></a>encoder_type: 指定编码格式（H.264、H265）。
<a href=#__codelineno-64-15 id=__codelineno-64-15 name=__codelineno-64-15></a>output_file_path: 指定编码文件的存放路径。
<a href=#__codelineno-64-16 id=__codelineno-64-16 name=__codelineno-64-16></a>配置vipp采集参数
<a href=#__codelineno-64-17 id=__codelineno-64-17 name=__codelineno-64-17></a>capture_width: 指定camera采集图像的宽度。
<a href=#__codelineno-64-18 id=__codelineno-64-18 name=__codelineno-64-18></a>capture_height: 指定camera采集图像的高度。
<a href=#__codelineno-64-19 id=__codelineno-64-19 name=__codelineno-64-19></a>pic_format: 指定像素格式（nv21,nv12,yu12,yv12; aw_lbc_2_5x,aw_lbc_2_0x,aw_lbc_1_5x,aw_lbc_1_0x
<a href=#__codelineno-64-20 id=__codelineno-64-20 name=__codelineno-64-20></a>）。
<a href=#__codelineno-64-21 id=__codelineno-64-21 name=__codelineno-64-21></a>frame_rate: 指定帧率，单位: fps。
<a href=#__codelineno-64-22 id=__codelineno-64-22 name=__codelineno-64-22></a>注：当设置以下显示的宽度和高度为0时，表示不显示。
<a href=#__codelineno-64-23 id=__codelineno-64-23 name=__codelineno-64-23></a>disp_width: 指定显示的宽度。
<a href=#__codelineno-64-24 id=__codelineno-64-24 name=__codelineno-64-24></a>disp_height: 指定显示的高度。
<a href=#__codelineno-64-25 id=__codelineno-64-25 name=__codelineno-64-25></a>bitmap_format: 指定位图的格式（ARGB8888、ARGB1555）。
<a href=#__codelineno-64-26 id=__codelineno-64-26 name=__codelineno-64-26></a>注：当设置以下overlay、cover、orl的宽度和高度为0时，表示不进行该项测试。
<a href=#__codelineno-64-27 id=__codelineno-64-27 name=__codelineno-64-27></a>overlay_x: 指定overlay的x坐标。
<a href=#__codelineno-64-28 id=__codelineno-64-28 name=__codelineno-64-28></a>overlay_y: 指定overlay的y坐标。
<a href=#__codelineno-64-29 id=__codelineno-64-29 name=__codelineno-64-29></a>overlay_w: 指定overlay的宽度。
<a href=#__codelineno-64-30 id=__codelineno-64-30 name=__codelineno-64-30></a>overlay_h: 指定overlay的高度。
<a href=#__codelineno-64-31 id=__codelineno-64-31 name=__codelineno-64-31></a>cover_x: 指定cover的x坐标。
<a href=#__codelineno-64-32 id=__codelineno-64-32 name=__codelineno-64-32></a>cover_y: 指定cover的y坐标。
<a href=#__codelineno-64-33 id=__codelineno-64-33 name=__codelineno-64-33></a>cover_w: 指定cover的宽度。
<a href=#__codelineno-64-34 id=__codelineno-64-34 name=__codelineno-64-34></a>cover_h: 指定cover的高度。
<a href=#__codelineno-64-35 id=__codelineno-64-35 name=__codelineno-64-35></a>orl_x: 指定orl矩形的x坐标。
<a href=#__codelineno-64-36 id=__codelineno-64-36 name=__codelineno-64-36></a>orl_y: 指定orl矩形的y坐标。
<a href=#__codelineno-64-37 id=__codelineno-64-37 name=__codelineno-64-37></a>orl_w: 指定orl矩形的宽度。
<a href=#__codelineno-64-38 id=__codelineno-64-38 name=__codelineno-64-38></a>orl_h: 指定orl矩形的高度。
<a href=#__codelineno-64-39 id=__codelineno-64-39 name=__codelineno-64-39></a>orl_thick: 指定orl线条的宽度，单位: 像素个数，默认2，表示2个像素的宽度。
<a href=#__codelineno-64-40 id=__codelineno-64-40 name=__codelineno-64-40></a>test_duration: 指定测试时间，单位: s。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-65-1 id=__codelineno-65-1 name=__codelineno-65-1></a>\# cd /mnt/extsd/ # ./sample_region -path ./sample_region.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-66-1 id=__codelineno-66-1 name=__codelineno-66-1></a># sample_region -path ./mnt/E/sample_region.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-67-1 id=__codelineno-67-1 name=__codelineno-67-1></a>测试达到设定的时间后自动退出测试，或者按 “ctrl + c” 提前结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-68-1 id=__codelineno-68-1 name=__codelineno-68-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-68-2 id=__codelineno-68-2 name=__codelineno-68-2></a>2. 生成的编码文件 testRegion.h264 的osd效果正常，且位置正确。
<a href=#__codelineno-68-3 id=__codelineno-68-3 name=__codelineno-68-3></a>3. 屏幕实时显示Camera 采集的视频图像，同时，显示一个绿色的框。
</code></pre></div> #### 8.1.9 sample_venc 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-69-1 id=__codelineno-69-1 name=__codelineno-69-1></a>该sample 演示从yuv(sample中格式限定为yuv420p)原始数据文件xxx.yuv中读取视频帧，编码，将取得的编码往输出
<a href=#__codelineno-69-2 id=__codelineno-69-2 name=__codelineno-69-2></a>文件里面直接写。生成裸码流视频文件。
<a href=#__codelineno-69-3 id=__codelineno-69-3 name=__codelineno-69-3></a>注意：
<a href=#__codelineno-69-4 id=__codelineno-69-4 name=__codelineno-69-4></a>如果是h264或h265编码sample会自动在目标文件的开始加上spspps信息，其他格式则不加。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-70-1 id=__codelineno-70-1 name=__codelineno-70-1></a>mpp_venc
</code></pre></div> 测试通路： ![image-20221120172626867](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172626867.png) <center>图 8-9: MPP_sample 测试通路-sample_venc</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-71-1 id=__codelineno-71-1 name=__codelineno-71-1></a>/mnt/extsd/test.yuv
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-72-1 id=__codelineno-72-1 name=__codelineno-72-1></a>/mnt/extsd/test.raw
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-73-1 id=__codelineno-73-1 name=__codelineno-73-1></a>src_file: 指定原始yuv文件的路径。
<a href=#__codelineno-73-2 id=__codelineno-73-2 name=__codelineno-73-2></a>src_width: 指定原始视频的宽度。
<a href=#__codelineno-73-3 id=__codelineno-73-3 name=__codelineno-73-3></a>src_height: 指定原始视频的高度。
<a href=#__codelineno-73-4 id=__codelineno-73-4 name=__codelineno-73-4></a>dst_file: 指定生成的裸码流视频文件路径。
<a href=#__codelineno-73-5 id=__codelineno-73-5 name=__codelineno-73-5></a>dst_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-73-6 id=__codelineno-73-6 name=__codelineno-73-6></a>dst_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-73-7 id=__codelineno-73-7 name=__codelineno-73-7></a>src_pixfmt: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型:
<a href=#__codelineno-73-8 id=__codelineno-73-8 name=__codelineno-73-8></a>aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-73-9 id=__codelineno-73-9 name=__codelineno-73-9></a>color_space: 指定颜色空间（jpeg, rec709, rec709_part_range）。
<a href=#__codelineno-73-10 id=__codelineno-73-10 name=__codelineno-73-10></a>encoder: 指定编码格式（H.264、H.265、MJPEG）。
<a href=#__codelineno-73-11 id=__codelineno-73-11 name=__codelineno-73-11></a>profile: 指定编码质量，对于H264，建议配置High（2），对于H265，建议配置Main（0）。
<a href=#__codelineno-73-12 id=__codelineno-73-12 name=__codelineno-73-12></a>framerate: 指定帧率，单位: fps。
<a href=#__codelineno-73-13 id=__codelineno-73-13 name=__codelineno-73-13></a>bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-73-14 id=__codelineno-73-14 name=__codelineno-73-14></a>rotate: 指定编码旋转角度（0, 90, 180, 270），顺时针方向。
<a href=#__codelineno-73-15 id=__codelineno-73-15 name=__codelineno-73-15></a>rc_mode: 指定码率控制模式（0:CBR, 1:VBR, 2:FIXQP, 3:QPMAP）。
<a href=#__codelineno-73-16 id=__codelineno-73-16 name=__codelineno-73-16></a>gop_mode: 指定GOP模式（0:NormalP, 1:DualP, 2:SmartP）。
<a href=#__codelineno-73-17 id=__codelineno-73-17 name=__codelineno-73-17></a>gop_size: 指定GOP大小，当前只针对H265有效，取值范围[1, 63]。
<a href=#__codelineno-73-18 id=__codelineno-73-18 name=__codelineno-73-18></a>product_mode: 指定产品类型（0:Normal, 1:IPC）。
<a href=#__codelineno-73-19 id=__codelineno-73-19 name=__codelineno-73-19></a>sensor_type: 指定sensor类型（0:DisWdr, 1:EnWdr）。
<a href=#__codelineno-73-20 id=__codelineno-73-20 name=__codelineno-73-20></a>key_frame_interval: 指定I帧间隔。
<a href=#__codelineno-73-21 id=__codelineno-73-21 name=__codelineno-73-21></a>VBR、CBR模式，编码参数。
<a href=#__codelineno-73-22 id=__codelineno-73-22 name=__codelineno-73-22></a>init_qp: 指定初始QP值，取值范围(0, 51)。
<a href=#__codelineno-73-23 id=__codelineno-73-23 name=__codelineno-73-23></a>min_i_qp: 指定I帧最小QP值，取值范围(0, 51)。
<a href=#__codelineno-73-24 id=__codelineno-73-24 name=__codelineno-73-24></a>max_i_qp: 指定I帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-73-25 id=__codelineno-73-25 name=__codelineno-73-25></a>min_p_qp: 指定P帧最小QP值，取值范围(0, 51)。
<a href=#__codelineno-73-26 id=__codelineno-73-26 name=__codelineno-73-26></a>max_p_qp: 指定P帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-73-27 id=__codelineno-73-27 name=__codelineno-73-27></a>FIXQP模式，编码参数
<a href=#__codelineno-73-28 id=__codelineno-73-28 name=__codelineno-73-28></a>i_qp: 指定I帧的QP值，取值范围(0, 51)
<a href=#__codelineno-73-29 id=__codelineno-73-29 name=__codelineno-73-29></a>p_qp: 指定P帧的QP值，取值范围(0, 51)
<a href=#__codelineno-73-30 id=__codelineno-73-30 name=__codelineno-73-30></a>VBR模式，编码参数
<a href=#__codelineno-73-31 id=__codelineno-73-31 name=__codelineno-73-31></a>moving_th：指定mb16x16中MAD的阈值，取值范围[0, 31]。
<a href=#__codelineno-73-32 id=__codelineno-73-32 name=__codelineno-73-32></a>quality: 指定静态P帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-73-33 id=__codelineno-73-33 name=__codelineno-73-33></a>p_bits_coef: 指定移动P帧的位系数，取值范围[1, 50]。
<a href=#__codelineno-73-34 id=__codelineno-73-34 name=__codelineno-73-34></a>i_bits_coef: 指定I帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-73-35 id=__codelineno-73-35 name=__codelineno-73-35></a>test_duration: 测试时间，单位: s。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-74-1 id=__codelineno-74-1 name=__codelineno-74-1></a># cd /mnt/extsd/
<a href=#__codelineno-74-2 id=__codelineno-74-2 name=__codelineno-74-2></a># ./sample_venc -path ./sample_venc.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-75-1 id=__codelineno-75-1 name=__codelineno-75-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-76-1 id=__codelineno-76-1 name=__codelineno-76-1></a>测试达到设定的时间后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-77-1 id=__codelineno-77-1 name=__codelineno-77-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-77-2 id=__codelineno-77-2 name=__codelineno-77-2></a>2. 使用VLC 软件播放裸码流文件test.raw正常。
</code></pre></div> #### 8.1.10 sample_venc2muxer 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-78-1 id=__codelineno-78-1 name=__codelineno-78-1></a>从yuv原始数据文件xxx.yuv中读取视频帧，编码，并由muxer进行封装生成相应的视频输出文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-79-1 id=__codelineno-79-1 name=__codelineno-79-1></a>mpp_venc
<a href=#__codelineno-79-2 id=__codelineno-79-2 name=__codelineno-79-2></a>mpp_muxer
</code></pre></div> 测试通路： ![image-20221120172643094](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172643094.png) <center>图 8-10: MPP_sample 测试通路-sample_venc2muxer</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-80-1 id=__codelineno-80-1 name=__codelineno-80-1></a>/mnt/extsd/1080p.yuv
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-81-1 id=__codelineno-81-1 name=__codelineno-81-1></a>/mnt/extsd/1080p.mp4
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-82-1 id=__codelineno-82-1 name=__codelineno-82-1></a>yuv_src_file: 指定原始yuv文件的路径。
<a href=#__codelineno-82-2 id=__codelineno-82-2 name=__codelineno-82-2></a>yuv_src_size: 指定原始视频文件的视频大小，如1080p。
<a href=#__codelineno-82-3 id=__codelineno-82-3 name=__codelineno-82-3></a>视频源的region区域，当设置region_w=0时，不开启该功能。
<a href=#__codelineno-82-4 id=__codelineno-82-4 name=__codelineno-82-4></a>以下宽高和坐标要求16对齐。
<a href=#__codelineno-82-5 id=__codelineno-82-5 name=__codelineno-82-5></a>region_x: 指定region区域的x坐标。
<a href=#__codelineno-82-6 id=__codelineno-82-6 name=__codelineno-82-6></a>region_y: 指定region区域的y坐标。
<a href=#__codelineno-82-7 id=__codelineno-82-7 name=__codelineno-82-7></a>region_w: 指定region区域的宽度。
<a href=#__codelineno-82-8 id=__codelineno-82-8 name=__codelineno-82-8></a>region_h: 指定region区域的高度。
<a href=#__codelineno-82-9 id=__codelineno-82-9 name=__codelineno-82-9></a>yuv_src_pixfmt: 指定像素格式（nv21）。
<a href=#__codelineno-82-10 id=__codelineno-82-10 name=__codelineno-82-10></a>video_dst_file: 指定生成的视频文件路径。
<a href=#__codelineno-82-11 id=__codelineno-82-11 name=__codelineno-82-11></a>video_size: 指定生成的视频文件视频大小，如1080p。
<a href=#__codelineno-82-12 id=__codelineno-82-12 name=__codelineno-82-12></a>video_encoder: 指定视频编码格式（H.264、H.265、MJPEG）。
<a href=#__codelineno-82-13 id=__codelineno-82-13 name=__codelineno-82-13></a>profile: 指定编码质量，对于H264，建议配置High（2），对于H265，建议配置Main（0）。
<a href=#__codelineno-82-14 id=__codelineno-82-14 name=__codelineno-82-14></a>rc_mode: 指定码率控制模式（0:CBR, 1:VBR, 2:FIXQP, 3:QPMAP）。
<a href=#__codelineno-82-15 id=__codelineno-82-15 name=__codelineno-82-15></a>video_framerate: 指定生成视频文件的帧率，单位: fps。
<a href=#__codelineno-82-16 id=__codelineno-82-16 name=__codelineno-82-16></a>video_bitrate: 指定生成视频文件的码率，单位: bps。
<a href=#__codelineno-82-17 id=__codelineno-82-17 name=__codelineno-82-17></a>video_duration: 指定生成一个视频文件的最大持续时间（如：每个视频文件长度一分钟），单位: s。
<a href=#__codelineno-82-18 id=__codelineno-82-18 name=__codelineno-82-18></a>media_file_format: 指定视频文件的封装格式，支持mp4和ts。
<a href=#__codelineno-82-19 id=__codelineno-82-19 name=__codelineno-82-19></a>test_duration: 指定测试时间，单位: s。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-83-1 id=__codelineno-83-1 name=__codelineno-83-1></a># cd /mnt/extsd/
<a href=#__codelineno-83-2 id=__codelineno-83-2 name=__codelineno-83-2></a># ./sample_venc2muxer -path ./sample_venc2muxer.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-84-1 id=__codelineno-84-1 name=__codelineno-84-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-85-1 id=__codelineno-85-1 name=__codelineno-85-1></a>测试达到设定的时间后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-86-1 id=__codelineno-86-1 name=__codelineno-86-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-86-2 id=__codelineno-86-2 name=__codelineno-86-2></a>2. 使用VLC 软件播放生成的mp4文件正常。
</code></pre></div> #### 8.1.11 sample_virvi2venc 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-87-1 id=__codelineno-87-1 name=__codelineno-87-1></a>该sample测试mpi_vi和mpi_venc组件的绑定组合。创建mpi_vi和mpi_venc，将它们绑定，再分别启动。
<a href=#__codelineno-87-2 id=__codelineno-87-2 name=__codelineno-87-2></a>mpi_vi采集图像，直接传输给mpi_venc进行编码。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-88-1 id=__codelineno-88-1 name=__codelineno-88-1></a>mpp_vi
<a href=#__codelineno-88-2 id=__codelineno-88-2 name=__codelineno-88-2></a>mpp_venc
</code></pre></div> 测试通路： ![image-20221120172701504](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172701504.png) <center>图 8-11: MPP_sample 测试通路-sample_virvi2venc</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-89-1 id=__codelineno-89-1 name=__codelineno-89-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-90-1 id=__codelineno-90-1 name=__codelineno-90-1></a>/mnt/extsd/test.raw
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-91-1 id=__codelineno-91-1 name=__codelineno-91-1></a>online_en: 指定是否开启在线编码，默认0，表示不开启在线编码，即当前为离线编码。
<a href=#__codelineno-91-2 id=__codelineno-91-2 name=__codelineno-91-2></a>online_share_buf_num: 指定在线编码的共享buffer个数（1或2），默认2，表示2个buffer。注意该配置仅当配置在
<a href=#__codelineno-91-3 id=__codelineno-91-3 name=__codelineno-91-3></a>线模式时才生效。
<a href=#__codelineno-91-4 id=__codelineno-91-4 name=__codelineno-91-4></a>vipp_id: 指定vipp设备号，默认0，表示vipp0。
<a href=#__codelineno-91-5 id=__codelineno-91-5 name=__codelineno-91-5></a>wdr_en: 指定是否开启WDR，默认0，表示不开WDR。
<a href=#__codelineno-91-6 id=__codelineno-91-6 name=__codelineno-91-6></a>drop_frm_num: 指定丢帧个数，对于离线编码是vipp丢帧，对于在线编码是ve编码前丢帧。
<a href=#__codelineno-91-7 id=__codelineno-91-7 name=__codelineno-91-7></a>src_width: 指定原始视频的宽度。
<a href=#__codelineno-91-8 id=__codelineno-91-8 name=__codelineno-91-8></a>src_height: 指定原始视频的高度。
<a href=#__codelineno-91-9 id=__codelineno-91-9 name=__codelineno-91-9></a>vi_buffer_num: 指定VI的buffer个数，仅对离线编码有效。
<a href=#__codelineno-91-10 id=__codelineno-91-10 name=__codelineno-91-10></a>saturation_change: 指定饱和度改变的值，默认0，表示不调整。取值范围[-256, 512]。
<a href=#__codelineno-91-11 id=__codelineno-91-11 name=__codelineno-91-11></a>src_pixfmt: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型:
<a href=#__codelineno-91-12 id=__codelineno-91-12 name=__codelineno-91-12></a>aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-91-13 id=__codelineno-91-13 name=__codelineno-91-13></a>color_space: 指定颜色空间（jpeg, rec709, rec709_part_range）。
<a href=#__codelineno-91-14 id=__codelineno-91-14 name=__codelineno-91-14></a>venc_ch_id: 指定编码通道，默认0，表示venc ch0。
<a href=#__codelineno-91-15 id=__codelineno-91-15 name=__codelineno-91-15></a>video_dst_file: 指定编码文件的存放路径。
<a href=#__codelineno-91-16 id=__codelineno-91-16 name=__codelineno-91-16></a>video_framerate: 指定帧率，单位: fps。
<a href=#__codelineno-91-17 id=__codelineno-91-17 name=__codelineno-91-17></a>video_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-91-18 id=__codelineno-91-18 name=__codelineno-91-18></a>video_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-91-19 id=__codelineno-91-19 name=__codelineno-91-19></a>video_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-91-20 id=__codelineno-91-20 name=__codelineno-91-20></a>video_encoder: 指定编码格式（H.264、H.265、MJPEG）。
<a href=#__codelineno-91-21 id=__codelineno-91-21 name=__codelineno-91-21></a>profile: 指定编码质量，对于H264，建议配置High（2），对于H265，建议配置Main（0）。
<a href=#__codelineno-91-22 id=__codelineno-91-22 name=__codelineno-91-22></a>ve_freq: 指定VE的频率，默认0，表示300MHz，单位: MHz。
<a href=#__codelineno-91-23 id=__codelineno-91-23 name=__codelineno-91-23></a>product_mode: 指定产品类型（0:Normal, 1:IPC）。
<a href=#__codelineno-91-24 id=__codelineno-91-24 name=__codelineno-91-24></a>sensor_type: 指定sensor类型（0:DisWdr, 1:EnWdr）。
<a href=#__codelineno-91-25 id=__codelineno-91-25 name=__codelineno-91-25></a>key_frame_interval: 指定I帧间隔。
<a href=#__codelineno-91-26 id=__codelineno-91-26 name=__codelineno-91-26></a>enable_gdc: 指定是否开启GDC功能，默认0，表示不开GDC。
<a href=#__codelineno-91-27 id=__codelineno-91-27 name=__codelineno-91-27></a>rc_mode: 指定码率控制模式（0:CBR, 1:VBR, 2:FIXQP, 3:QPMAP）。
<a href=#__codelineno-91-28 id=__codelineno-91-28 name=__codelineno-91-28></a>VBR、CBR模式，编码参数
<a href=#__codelineno-91-29 id=__codelineno-91-29 name=__codelineno-91-29></a>init_qp: 指定初始QP值，取值范围(0, 51)。
<a href=#__codelineno-91-30 id=__codelineno-91-30 name=__codelineno-91-30></a>min_i_qp: 指定I帧最小QP值，取值范围(0, 51)。FIXQP模式时，取其值为i_qp。
<a href=#__codelineno-91-31 id=__codelineno-91-31 name=__codelineno-91-31></a>max_i_qp: 指定I帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-91-32 id=__codelineno-91-32 name=__codelineno-91-32></a>min_p_qp: 指定P帧最小QP值，取值范围(0, 51)。FIXQP模式时，取其值为p_qp。
<a href=#__codelineno-91-33 id=__codelineno-91-33 name=__codelineno-91-33></a>max_p_qp: 指定P帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-91-34 id=__codelineno-91-34 name=__codelineno-91-34></a>mb_qp_limit_en: 指定是否开启mb qp限制，默认0，表示不开启。
<a href=#__codelineno-91-35 id=__codelineno-91-35 name=__codelineno-91-35></a>VBR模式，编码参数
<a href=#__codelineno-91-36 id=__codelineno-91-36 name=__codelineno-91-36></a>moving_th：指定mb16x16中MAD的阈值，取值范围[0, 31]。
<a href=#__codelineno-91-37 id=__codelineno-91-37 name=__codelineno-91-37></a>quality: 指定静态P帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-91-38 id=__codelineno-91-38 name=__codelineno-91-38></a>p_bits_coef: 指定移动P帧的位系数，取值范围[1, 50]。
<a href=#__codelineno-91-39 id=__codelineno-91-39 name=__codelineno-91-39></a>i_bits_coef: 指定I帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-91-40 id=__codelineno-91-40 name=__codelineno-91-40></a>gop_mode: 指定GOP模式（0:NormalP, 1:DualP, 2:SmartP）。
<a href=#__codelineno-91-41 id=__codelineno-91-41 name=__codelineno-91-41></a>gop_size: 指定GOP大小，当前只针对H265有效，取值范围[1, 63]。
<a href=#__codelineno-91-42 id=__codelineno-91-42 name=__codelineno-91-42></a>高级跳帧参数
<a href=#__codelineno-91-43 id=__codelineno-91-43 name=__codelineno-91-43></a>AdvancedRef_Base: 设置该值大于0表示开启高级跳帧功能，等于0表示关闭高级跳帧功能。
<a href=#__codelineno-91-44 id=__codelineno-91-44 name=__codelineno-91-44></a>AdvancedRef_Enhance: 设置Enhance为5。
<a href=#__codelineno-91-45 id=__codelineno-91-45 name=__codelineno-91-45></a>AdvancedRef_RefBaseEn: 设置该值为1表示开启参考帧，等于0表示关闭参考帧。
<a href=#__codelineno-91-46 id=__codelineno-91-46 name=__codelineno-91-46></a>enable_fast_enc: 指定是否开启快速编码，默认0，表示不开启。
<a href=#__codelineno-91-47 id=__codelineno-91-47 name=__codelineno-91-47></a>encode_rotate: 指定编码旋转角度（0, 90, 180, 270），顺时针方向。
<a href=#__codelineno-91-48 id=__codelineno-91-48 name=__codelineno-91-48></a>mirror: 指定编码镜像是否开启，默认0，表示不开启。取值范围[0, 1]。
<a href=#__codelineno-91-49 id=__codelineno-91-49 name=__codelineno-91-49></a>video_duration: 指定生成一个视频文件的最大持续时间（如：每个视频文件长度一分钟），单位: s。
<a href=#__codelineno-91-50 id=__codelineno-91-50 name=__codelineno-91-50></a>test_duration: 指定测试时间，单位: s。
<a href=#__codelineno-91-51 id=__codelineno-91-51 name=__codelineno-91-51></a>color2grey: 指定是否开启彩转灰功能，默认"no"，表示不开启。取值范围[“no”, "yes"]。
<a href=#__codelineno-91-52 id=__codelineno-91-52 name=__codelineno-91-52></a>2D降噪参数配置
<a href=#__codelineno-91-53 id=__codelineno-91-53 name=__codelineno-91-53></a>2dnr_en: 编码器2DNR使能，默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-91-54 id=__codelineno-91-54 name=__codelineno-91-54></a>2dnr_strength_y: 亮度降噪强度系数。该值越大，滤波强度越高。默认127，取值范围[0, 255]。
<a href=#__codelineno-91-55 id=__codelineno-91-55 name=__codelineno-91-55></a>2dnr_strength_c: 色度降噪强度系数。该值越大，滤波强度越高。默认127，取值范围[0, 255]。
<a href=#__codelineno-91-56 id=__codelineno-91-56 name=__codelineno-91-56></a>2dnr_threshold_y: 亮度邻域像素降噪开关阈值。该值越大，越容易触发2d滤波。默认7，取值范围[0, 15]。
<a href=#__codelineno-91-57 id=__codelineno-91-57 name=__codelineno-91-57></a>2dnr_threshold_c: 色度邻域像素降噪开关阈值。该值越大，越容易触发2d滤波。默认7，取值范围[0, 15]。
<a href=#__codelineno-91-58 id=__codelineno-91-58 name=__codelineno-91-58></a>3D降噪参数配置
<a href=#__codelineno-91-59 id=__codelineno-91-59 name=__codelineno-91-59></a>3dnr_en: 编码器3DNR使能，默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-91-60 id=__codelineno-91-60 name=__codelineno-91-60></a>3dnr_pix_level_en: 3d滤波权重系数自适应修正开关。默认0，表示不开启。取值范围[0, 1]。
<a href=#__codelineno-91-61 id=__codelineno-91-61 name=__codelineno-91-61></a>3dnr_smooth_en: 像素级3x3平滑滤波使能。默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-91-62 id=__codelineno-91-62 name=__codelineno-91-62></a>3dnr_pix_diff_th: 仅当3d_adjust_pix_level_enable为1时生效，自适应修正幅度阈值。该值越大，滤波强度越
<a href=#__codelineno-91-63 id=__codelineno-91-63 name=__codelineno-91-63></a>高。默认6，取值范围[0, 31]。
<a href=#__codelineno-91-64 id=__codelineno-91-64 name=__codelineno-91-64></a>3dnr_max_mv_th: 源图像素块运动矢量最大阈值，单个像素块仅当其水平和垂直MV皆小于该阈值，才会进行3d滤波。该值
<a href=#__codelineno-91-65 id=__codelineno-91-65 name=__codelineno-91-65></a>越大，越容易触发3d滤波。默认2，取值范围[0, 63]。
<a href=#__codelineno-91-66 id=__codelineno-91-66 name=__codelineno-91-66></a>3dnr_max_mad_th: 源图与参考图之间像素块的MAD最大阈值，单个像素块仅当其MAD值小于该阈值，才会进行3d滤波。该
<a href=#__codelineno-91-67 id=__codelineno-91-67 name=__codelineno-91-67></a>值越大，越容易触发3d滤波。默认11，取值范围[0, 63]。
<a href=#__codelineno-91-68 id=__codelineno-91-68 name=__codelineno-91-68></a>3dnr_min_coef: 3d滤波权重系数的最小阈值。该值越小，自适应3d滤波的强度上限越高。默认14，取值范围[0, 3
<a href=#__codelineno-91-69 id=__codelineno-91-69 name=__codelineno-91-69></a>dnr_max_coef]。
<a href=#__codelineno-91-70 id=__codelineno-91-70 name=__codelineno-91-70></a>3dnr_max_coef: 3d滤波权重系数的最大阈值。该值越大，自适应3d滤波的强度下限越低。默认16，取值范围[3
<a href=#__codelineno-91-71 id=__codelineno-91-71 name=__codelineno-91-71></a>dnr_min_coef, 16]。
<a href=#__codelineno-91-72 id=__codelineno-91-72 name=__codelineno-91-72></a>ROI测试参数配置
<a href=#__codelineno-91-73 id=__codelineno-91-73 name=__codelineno-91-73></a>roi_num: 指定ROI的个数，默认0，表示不开启ROI测试。取值范围[0, 8]。
<a href=#__codelineno-91-74 id=__codelineno-91-74 name=__codelineno-91-74></a>roi_qp: 指定ROI区域的QP值，默认50，表示最差质量。取值范围(0, 51)。
<a href=#__codelineno-91-75 id=__codelineno-91-75 name=__codelineno-91-75></a>roi_BgFrameRateEnable: 指定是否开启非ROI区域低帧率编码，默认0，表示不开启。
<a href=#__codelineno-91-76 id=__codelineno-91-76 name=__codelineno-91-76></a>roi_BgFrameRateAttenuation: 指定非ROI区域的帧率衰减比例，默认3，表示非ROI区域的帧率是正常帧率的1/3。
<a href=#__codelineno-91-77 id=__codelineno-91-77 name=__codelineno-91-77></a>IntraRefresh_BlockNum: 指定P帧帧内刷新的block个数，默认0，表示不开启P帧帧内刷新功能。
<a href=#__codelineno-91-78 id=__codelineno-91-78 name=__codelineno-91-78></a>orl_num: 指定ORL(Object Rectangle Label)的个数，取值范围[0,16]。
<a href=#__codelineno-91-79 id=__codelineno-91-79 name=__codelineno-91-79></a>配置vbv buffer大小和vbv buffer阈值大小
<a href=#__codelineno-91-80 id=__codelineno-91-80 name=__codelineno-91-80></a>vbvBufferSize: 指定vbv buffer大小，默认0，表示由mpp middleware自行计算并设置给编码器，大于0，表示由
<a href=#__codelineno-91-81 id=__codelineno-91-81 name=__codelineno-91-81></a>app设置。
<a href=#__codelineno-91-82 id=__codelineno-91-82 name=__codelineno-91-82></a>vbvThreshSize: 指定vbv buffer阈值大小，默认0，表示由mpp middleware自行计算并设置给编码器，大于0，表示
<a href=#__codelineno-91-83 id=__codelineno-91-83 name=__codelineno-91-83></a>由app设置。
<a href=#__codelineno-91-84 id=__codelineno-91-84 name=__codelineno-91-84></a>裁剪编码参数设置
<a href=#__codelineno-91-85 id=__codelineno-91-85 name=__codelineno-91-85></a>crop_en: 指定是否开启裁剪编码，默认0，表示不开启。
<a href=#__codelineno-91-86 id=__codelineno-91-86 name=__codelineno-91-86></a>crop_rect_x: 指定裁剪区域的x坐标。
<a href=#__codelineno-91-87 id=__codelineno-91-87 name=__codelineno-91-87></a>crop_rect_y: 指定裁剪区域的y坐标。
<a href=#__codelineno-91-88 id=__codelineno-91-88 name=__codelineno-91-88></a>crop_rect_w: 指定裁剪区域的宽度。
<a href=#__codelineno-91-89 id=__codelineno-91-89 name=__codelineno-91-89></a>crop_rect_h: 指定裁剪区域的高度。
<a href=#__codelineno-91-90 id=__codelineno-91-90 name=__codelineno-91-90></a>vui_timing_info_present_flag: 指定是否添加VUI信息，默认0，表示不添加。
<a href=#__codelineno-91-91 id=__codelineno-91-91 name=__codelineno-91-91></a>encpp_disable: 指定是否禁用encpp新通路，默认0，表示不禁用。
<a href=#__codelineno-91-92 id=__codelineno-91-92 name=__codelineno-91-92></a>super_frm_mode: 指定超级帧模式，默认0，表示不启用。（0:none, 1:discarded, 2:re-encode）。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-92-1 id=__codelineno-92-1 name=__codelineno-92-1></a># cd /mnt/extsd/
<a href=#__codelineno-92-2 id=__codelineno-92-2 name=__codelineno-92-2></a># ./sample_virvi2venc -path ./sample_virvi2venc.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-93-1 id=__codelineno-93-1 name=__codelineno-93-1></a># sample_virvi2venc -path ./mnt/E/sample_virvi2venc.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-94-1 id=__codelineno-94-1 name=__codelineno-94-1></a>测试达到设定的时间后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-95-1 id=__codelineno-95-1 name=__codelineno-95-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-95-2 id=__codelineno-95-2 name=__codelineno-95-2></a>2. 使用VLC 软件播放生成的裸码流文件/mnt/extsd/test.raw正常。
</code></pre></div> #### 8.1.12 sample_timelapse 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-96-1 id=__codelineno-96-1 name=__codelineno-96-1></a>演示缩时录影。
<a href=#__codelineno-96-2 id=__codelineno-96-2 name=__codelineno-96-2></a>从camera节点取vi输入数据，对venc组件设置取帧间隔，设置编码帧率，并对数据进行编码封装，生成对应的视频输出文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-97-1 id=__codelineno-97-1 name=__codelineno-97-1></a>mpp_vi
<a href=#__codelineno-97-2 id=__codelineno-97-2 name=__codelineno-97-2></a>mpp_venc
<a href=#__codelineno-97-3 id=__codelineno-97-3 name=__codelineno-97-3></a>mpp_muxer
</code></pre></div> 测试通路： ![image-20221120172720694](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172720694.png) <center><center>图 8-12: MPP_sample 测试通路-sample_timelapse</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-98-1 id=__codelineno-98-1 name=__codelineno-98-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-99-1 id=__codelineno-99-1 name=__codelineno-99-1></a>/mnt/extsd/timelapse.mp4
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-100-1 id=__codelineno-100-1 name=__codelineno-100-1></a>vipp_index: 获取视频数据的VIPP设备号，默认0，表示vipp0。通常取值0/1/2/3，（对于V853，通常取值0/4/8/12）。
<a href=#__codelineno-100-2 id=__codelineno-100-2 name=__codelineno-100-2></a>vipp_width: vipp输出视频图像的宽度。
<a href=#__codelineno-100-3 id=__codelineno-100-3 name=__codelineno-100-3></a>vipp_height: vipp输出视频图像的高度。
<a href=#__codelineno-100-4 id=__codelineno-100-4 name=__codelineno-100-4></a>vipp_frame_rate: vipp的采集帧率，单位: fps。
<a href=#__codelineno-100-5 id=__codelineno-100-5 name=__codelineno-100-5></a>timelapse: 缩时录影模式下取帧的帧间隔，单位: us。
<a href=#__codelineno-100-6 id=__codelineno-100-6 name=__codelineno-100-6></a>video_frame_rate: 编码帧率，即设置编码文件的播放帧率。
<a href=#__codelineno-100-7 id=__codelineno-100-7 name=__codelineno-100-7></a>video_duration: 编码文件的播放时长。
<a href=#__codelineno-100-8 id=__codelineno-100-8 name=__codelineno-100-8></a>video_bitrate: 编码码率，单位: Mbps。
<a href=#__codelineno-100-9 id=__codelineno-100-9 name=__codelineno-100-9></a>video_file_path: 编码文件的存储路径。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-101-1 id=__codelineno-101-1 name=__codelineno-101-1></a># cd /mnt/extsd/
<a href=#__codelineno-101-2 id=__codelineno-101-2 name=__codelineno-101-2></a># ./sample_timelapse -path ./sample_timelapse.conf  
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-102-1 id=__codelineno-102-1 name=__codelineno-102-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-103-1 id=__codelineno-103-1 name=__codelineno-103-1></a>最终自动退出测试，默认测试时间有点长，可以按“ctrl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-104-1 id=__codelineno-104-1 name=__codelineno-104-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-104-2 id=__codelineno-104-2 name=__codelineno-104-2></a>2. 使用VLC 软件播放生成的mp4文件/mnt/extsd/timelapse.mp4正常。
</code></pre></div> #### 8.1.13 sample_virvi2venc2muxer 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-105-1 id=__codelineno-105-1 name=__codelineno-105-1></a>从camera 节点取vi 输入数据，并对数据进行编码封装，生成对应的视频输出文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-106-1 id=__codelineno-106-1 name=__codelineno-106-1></a>mpi_vi
<a href=#__codelineno-106-2 id=__codelineno-106-2 name=__codelineno-106-2></a>mpp_venc
<a href=#__codelineno-106-3 id=__codelineno-106-3 name=__codelineno-106-3></a>mpp_muxer
</code></pre></div> 测试通路： ![image-20221120172731258](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120172731258.png) <center>图 8-13: MPP_sample 测试通路-sample_virvi2venc2muxer</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-107-1 id=__codelineno-107-1 name=__codelineno-107-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-108-1 id=__codelineno-108-1 name=__codelineno-108-1></a>/mnt/extsd/test.mp4
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-109-1 id=__codelineno-109-1 name=__codelineno-109-1></a>online_en: 指定是否开启在线编码，默认0，表示不开启在线编码，即当前为离线编码。
<a href=#__codelineno-109-2 id=__codelineno-109-2 name=__codelineno-109-2></a>online_share_buf_num: 指定在线编码的共享buffer个数（1或2），默认2，表示2个buffer。注意该配置仅当配置在
<a href=#__codelineno-109-3 id=__codelineno-109-3 name=__codelineno-109-3></a>线模式时才生效。
<a href=#__codelineno-109-4 id=__codelineno-109-4 name=__codelineno-109-4></a>vipp_id: 指定vipp设备号，默认0，表示vipp0。
<a href=#__codelineno-109-5 id=__codelineno-109-5 name=__codelineno-109-5></a>wdr_en: 指定是否开启WDR，默认0，表示不开WDR。
<a href=#__codelineno-109-6 id=__codelineno-109-6 name=__codelineno-109-6></a>drop_frm_num: 指定丢帧个数，对于离线编码是vipp丢帧，对于在线编码是ve编码前丢帧。
<a href=#__codelineno-109-7 id=__codelineno-109-7 name=__codelineno-109-7></a>src_width: 指定原始视频的宽度。
<a href=#__codelineno-109-8 id=__codelineno-109-8 name=__codelineno-109-8></a>src_height: 指定原始视频的高度。
<a href=#__codelineno-109-9 id=__codelineno-109-9 name=__codelineno-109-9></a>vi_buffer_num: 指定VI的buffer个数，仅对离线编码有效。
<a href=#__codelineno-109-10 id=__codelineno-109-10 name=__codelineno-109-10></a>saturation_change: 指定饱和度改变的值，默认0，表示不调整。取值范围[-256, 512]。
<a href=#__codelineno-109-11 id=__codelineno-109-11 name=__codelineno-109-11></a>src_pixfmt: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型:
<a href=#__codelineno-109-12 id=__codelineno-109-12 name=__codelineno-109-12></a>aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-109-13 id=__codelineno-109-13 name=__codelineno-109-13></a>color_space: 指定颜色空间（jpeg, rec709, rec709_part_range）。
<a href=#__codelineno-109-14 id=__codelineno-109-14 name=__codelineno-109-14></a>venc_ch_id: 指定编码通道，默认0，表示venc ch0。
<a href=#__codelineno-109-15 id=__codelineno-109-15 name=__codelineno-109-15></a>video_dst_file: 指定编码文件的存放路径。
<a href=#__codelineno-109-16 id=__codelineno-109-16 name=__codelineno-109-16></a>add_repair_info: 指定是否为mp4文件添加文件修复信息。默认0，表示不添加。
<a href=#__codelineno-109-17 id=__codelineno-109-17 name=__codelineno-109-17></a>frmsTag_backup_interval: 指定mp4文件修复的frame tag备份的时间间隔，单位:us。
<a href=#__codelineno-109-18 id=__codelineno-109-18 name=__codelineno-109-18></a>dst_file_max_cnt: 指定muxer封装mp4文件，最多保留的文件个数。默认3，表示最多只允许保留3个mp4文件。
<a href=#__codelineno-109-19 id=__codelineno-109-19 name=__codelineno-109-19></a>video_framerate: 指定帧率，单位: fps。
<a href=#__codelineno-109-20 id=__codelineno-109-20 name=__codelineno-109-20></a>video_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-109-21 id=__codelineno-109-21 name=__codelineno-109-21></a>video_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-109-22 id=__codelineno-109-22 name=__codelineno-109-22></a>video_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-109-23 id=__codelineno-109-23 name=__codelineno-109-23></a>video_encoder: 指定编码格式（H.264、H.265、MJPEG）。
<a href=#__codelineno-109-24 id=__codelineno-109-24 name=__codelineno-109-24></a>profile: 指定编码质量，对于H264，建议配置High（2），对于H265，建议配置Main（0）。
<a href=#__codelineno-109-25 id=__codelineno-109-25 name=__codelineno-109-25></a>ve_freq: 指定VE的频率，默认0，表示300MHz，单位: MHz。
<a href=#__codelineno-109-26 id=__codelineno-109-26 name=__codelineno-109-26></a>product_mode: 指定产品类型（0:Normal, 1:IPC）。
<a href=#__codelineno-109-27 id=__codelineno-109-27 name=__codelineno-109-27></a>sensor_type: 指定sensor类型（0:DisWdr, 1:EnWdr）。
<a href=#__codelineno-109-28 id=__codelineno-109-28 name=__codelineno-109-28></a>key_frame_interval: 指定I帧间隔。
<a href=#__codelineno-109-29 id=__codelineno-109-29 name=__codelineno-109-29></a>enable_gdc: 指定是否开启GDC功能，默认0，表示不开GDC。
<a href=#__codelineno-109-30 id=__codelineno-109-30 name=__codelineno-109-30></a>rc_mode: 指定码率控制模式（0:CBR, 1:VBR, 2:FIXQP, 3:QPMAP）。
<a href=#__codelineno-109-31 id=__codelineno-109-31 name=__codelineno-109-31></a>VBR、CBR模式，编码参数
<a href=#__codelineno-109-32 id=__codelineno-109-32 name=__codelineno-109-32></a>init_qp: 指定初始QP值，取值范围(0, 51)。
<a href=#__codelineno-109-33 id=__codelineno-109-33 name=__codelineno-109-33></a>min_i_qp: 指定I帧最小QP值，取值范围(0, 51)。FIXQP模式时，取其值为i_qp。
<a href=#__codelineno-109-34 id=__codelineno-109-34 name=__codelineno-109-34></a>max_i_qp: 指定I帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-109-35 id=__codelineno-109-35 name=__codelineno-109-35></a>min_p_qp: 指定P帧最小QP值，取值范围(0, 51)。FIXQP模式时，取其值为p_qp。
<a href=#__codelineno-109-36 id=__codelineno-109-36 name=__codelineno-109-36></a>max_p_qp: 指定P帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-109-37 id=__codelineno-109-37 name=__codelineno-109-37></a>mb_qp_limit_en: 指定是否开启mb qp限制，默认0，表示不开启。
<a href=#__codelineno-109-38 id=__codelineno-109-38 name=__codelineno-109-38></a>VBR模式，编码参数
<a href=#__codelineno-109-39 id=__codelineno-109-39 name=__codelineno-109-39></a>moving_th：指定mb16x16中MAD的阈值，取值范围[0, 31]。
<a href=#__codelineno-109-40 id=__codelineno-109-40 name=__codelineno-109-40></a>quality: 指定静态P帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-109-41 id=__codelineno-109-41 name=__codelineno-109-41></a>p_bits_coef: 指定移动P帧的位系数，取值范围[1, 50]。
<a href=#__codelineno-109-42 id=__codelineno-109-42 name=__codelineno-109-42></a>i_bits_coef: 指定I帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-109-43 id=__codelineno-109-43 name=__codelineno-109-43></a>gop_mode: 指定GOP模式（0:NormalP, 1:DualP, 2:SmartP）。
<a href=#__codelineno-109-44 id=__codelineno-109-44 name=__codelineno-109-44></a>gop_size: 指定GOP大小，当前只针对H265有效，取值范围[1, 63]。
<a href=#__codelineno-109-45 id=__codelineno-109-45 name=__codelineno-109-45></a>高级跳帧参数
<a href=#__codelineno-109-46 id=__codelineno-109-46 name=__codelineno-109-46></a>AdvancedRef_Base: 设置该值大于0表示开启高级跳帧功能，等于0表示关闭高级跳帧功能。
<a href=#__codelineno-109-47 id=__codelineno-109-47 name=__codelineno-109-47></a>AdvancedRef_Enhance: 设置Enhance为5。
<a href=#__codelineno-109-48 id=__codelineno-109-48 name=__codelineno-109-48></a>AdvancedRef_RefBaseEn: 设置该值为1表示开启参考帧，等于0表示关闭参考帧。
<a href=#__codelineno-109-49 id=__codelineno-109-49 name=__codelineno-109-49></a>enable_fast_enc: 指定是否开启快速编码，默认0，表示不开启。
<a href=#__codelineno-109-50 id=__codelineno-109-50 name=__codelineno-109-50></a>encode_rotate: 指定编码旋转角度（0, 90, 180, 270），顺时针方向。
<a href=#__codelineno-109-51 id=__codelineno-109-51 name=__codelineno-109-51></a>mirror: 指定编码镜像是否开启，默认0，表示不开启。取值范围[0, 1]。
<a href=#__codelineno-109-52 id=__codelineno-109-52 name=__codelineno-109-52></a>video_duration: 指定生成一个视频文件的最大持续时间（如：每个视频文件长度一分钟），单位: s。
<a href=#__codelineno-109-53 id=__codelineno-109-53 name=__codelineno-109-53></a>test_duration: 指定测试时间，单位: s。
<a href=#__codelineno-109-54 id=__codelineno-109-54 name=__codelineno-109-54></a>color2grey: 指定是否开启彩转灰功能，默认"no"，表示不开启。取值范围[“no”, "yes"]。
<a href=#__codelineno-109-55 id=__codelineno-109-55 name=__codelineno-109-55></a>2D降噪参数配置。
<a href=#__codelineno-109-56 id=__codelineno-109-56 name=__codelineno-109-56></a>2dnr_en: 编码器2DNR使能，默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-109-57 id=__codelineno-109-57 name=__codelineno-109-57></a>2dnr_strength_y: 亮度降噪强度系数。该值越大，滤波强度越高。默认127，取值范围[0, 255]。
<a href=#__codelineno-109-58 id=__codelineno-109-58 name=__codelineno-109-58></a>2dnr_strength_c: 色度降噪强度系数。该值越大，滤波强度越高。默认127，取值范围[0, 255]。
<a href=#__codelineno-109-59 id=__codelineno-109-59 name=__codelineno-109-59></a>2dnr_threshold_y: 亮度邻域像素降噪开关阈值。该值越大，越容易触发2d滤波。默认7，取值范围[0, 15]。
<a href=#__codelineno-109-60 id=__codelineno-109-60 name=__codelineno-109-60></a>2dnr_threshold_c: 色度邻域像素降噪开关阈值。该值越大，越容易触发2d滤波。默认7，取值范围[0, 15]。
<a href=#__codelineno-109-61 id=__codelineno-109-61 name=__codelineno-109-61></a>3D降噪参数配置
<a href=#__codelineno-109-62 id=__codelineno-109-62 name=__codelineno-109-62></a>3dnr_en: 编码器3DNR使能，默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-109-63 id=__codelineno-109-63 name=__codelineno-109-63></a>3dnr_pix_level_en: 3d滤波权重系数自适应修正开关。默认0，表示不开启。取值范围[0, 1]。
<a href=#__codelineno-109-64 id=__codelineno-109-64 name=__codelineno-109-64></a>3dnr_smooth_en: 像素级3x3平滑滤波使能。默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-109-65 id=__codelineno-109-65 name=__codelineno-109-65></a>3dnr_pix_diff_th: 仅当3d_adjust_pix_level_enable为1时生效，自适应修正幅度阈值。该值越大，滤波强度越
<a href=#__codelineno-109-66 id=__codelineno-109-66 name=__codelineno-109-66></a>高。默认6，取值范围[0, 31]。
<a href=#__codelineno-109-67 id=__codelineno-109-67 name=__codelineno-109-67></a>3dnr_max_mv_th: 源图像素块运动矢量最大阈值，单个像素块仅当其水平和垂直MV皆小于该阈值，才会进行3d滤波。该值
<a href=#__codelineno-109-68 id=__codelineno-109-68 name=__codelineno-109-68></a>越大，越容易触发3d滤波。默认2，取值范围[0, 63]。
<a href=#__codelineno-109-69 id=__codelineno-109-69 name=__codelineno-109-69></a>3dnr_max_mad_th: 源图与参考图之间像素块的MAD最大阈值，单个像素块仅当其MAD值小于该阈值，才会进行3d滤波。该
<a href=#__codelineno-109-70 id=__codelineno-109-70 name=__codelineno-109-70></a>值越大，越容易触发3d滤波。默认11，取值范围[0, 63]。
<a href=#__codelineno-109-71 id=__codelineno-109-71 name=__codelineno-109-71></a>3dnr_min_coef: 3d滤波权重系数的最小阈值。该值越小，自适应3d滤波的强度上限越高。默认14，取值范围[0, 3
<a href=#__codelineno-109-72 id=__codelineno-109-72 name=__codelineno-109-72></a>dnr_max_coef]。
<a href=#__codelineno-109-73 id=__codelineno-109-73 name=__codelineno-109-73></a>3dnr_max_coef: 3d滤波权重系数的最大阈值。该值越大，自适应3d滤波的强度下限越低。默认16，取值范围[3
<a href=#__codelineno-109-74 id=__codelineno-109-74 name=__codelineno-109-74></a>dnr_min_coef, 16]。
<a href=#__codelineno-109-75 id=__codelineno-109-75 name=__codelineno-109-75></a>ROI测试参数配置
<a href=#__codelineno-109-76 id=__codelineno-109-76 name=__codelineno-109-76></a>roi_num: 指定ROI的个数，默认0，表示不开启ROI测试。取值范围[0, 8]。
<a href=#__codelineno-109-77 id=__codelineno-109-77 name=__codelineno-109-77></a>roi_qp: 指定ROI区域的QP值，默认50，表示最差质量。取值范围(0, 51)。
<a href=#__codelineno-109-78 id=__codelineno-109-78 name=__codelineno-109-78></a>roi_BgFrameRateEnable: 指定是否开启非ROI区域低帧率编码，默认0，表示不开启。
<a href=#__codelineno-109-79 id=__codelineno-109-79 name=__codelineno-109-79></a>roi_BgFrameRateAttenuation: 指定非ROI区域的帧率衰减比例，默认3，表示非ROI区域的帧率是正常帧率的1/3。
<a href=#__codelineno-109-80 id=__codelineno-109-80 name=__codelineno-109-80></a>IntraRefresh_BlockNum: 指定P帧帧内刷新的block个数，默认0，表示不开启P帧帧内刷新功能。
<a href=#__codelineno-109-81 id=__codelineno-109-81 name=__codelineno-109-81></a>orl_num: 指定ORL(Object Rectangle Label)的个数，取值范围[0,16]。
<a href=#__codelineno-109-82 id=__codelineno-109-82 name=__codelineno-109-82></a>配置vbv buffer大小和vbv buffer阈值大小
<a href=#__codelineno-109-83 id=__codelineno-109-83 name=__codelineno-109-83></a>vbvBufferSize: 指定vbv buffer大小，默认0，表示由mpp middleware自行计算并设置给编码器，大于0，表示由
<a href=#__codelineno-109-84 id=__codelineno-109-84 name=__codelineno-109-84></a>app设置。
<a href=#__codelineno-109-85 id=__codelineno-109-85 name=__codelineno-109-85></a>vbvThreshSize: 指定vbv buffer阈值大小，默认0，表示由mpp middleware自行计算并设置给编码器，大于0，表示
<a href=#__codelineno-109-86 id=__codelineno-109-86 name=__codelineno-109-86></a>由app设置。
<a href=#__codelineno-109-87 id=__codelineno-109-87 name=__codelineno-109-87></a>裁剪编码参数设置
<a href=#__codelineno-109-88 id=__codelineno-109-88 name=__codelineno-109-88></a>crop_en: 指定是否开启裁剪编码，默认0，表示不开启。
<a href=#__codelineno-109-89 id=__codelineno-109-89 name=__codelineno-109-89></a>crop_rect_x: 指定裁剪区域的x坐标。
<a href=#__codelineno-109-90 id=__codelineno-109-90 name=__codelineno-109-90></a>crop_rect_y: 指定裁剪区域的y坐标。
<a href=#__codelineno-109-91 id=__codelineno-109-91 name=__codelineno-109-91></a>crop_rect_w: 指定裁剪区域的宽度。
<a href=#__codelineno-109-92 id=__codelineno-109-92 name=__codelineno-109-92></a>crop_rect_h: 指定裁剪区域的高度。
<a href=#__codelineno-109-93 id=__codelineno-109-93 name=__codelineno-109-93></a>vui_timing_info_present_flag: 指定是否添加VUI信息，默认0，表示不添加。
<a href=#__codelineno-109-94 id=__codelineno-109-94 name=__codelineno-109-94></a>encpp_disable: 指定是否禁用encpp新通路，默认0，表示不禁用。
<a href=#__codelineno-109-95 id=__codelineno-109-95 name=__codelineno-109-95></a>super_frm_mode: 指定超级帧模式，默认0，表示不启用。（0:none, 1:discarded, 2:re-encode）。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-110-1 id=__codelineno-110-1 name=__codelineno-110-1></a># cd /mnt/extsd/
<a href=#__codelineno-110-2 id=__codelineno-110-2 name=__codelineno-110-2></a># ./sample_virvi2venc2muxer -path ./sample_virvi2venc2muxer.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-111-1 id=__codelineno-111-1 name=__codelineno-111-1></a># sample_virvi2venc2muxer -path ./mnt/E/sample_virvi2venc2muxer.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-112-1 id=__codelineno-112-1 name=__codelineno-112-1></a>测试达到设定的时间后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-113-1 id=__codelineno-113-1 name=__codelineno-113-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-113-2 id=__codelineno-113-2 name=__codelineno-113-2></a>2. 使用VLC 软件播放生成的mp4文件正常。
</code></pre></div> #### 8.1.14 sample_multi_vi2venc2muxer 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-114-1 id=__codelineno-114-1 name=__codelineno-114-1></a>最多允许4路编码加1路jpeg拍照。每个编码通道都可以选择vipp，以及timelapse模式等。
<a href=#__codelineno-114-2 id=__codelineno-114-2 name=__codelineno-114-2></a>默认的配置如下：
<a href=#__codelineno-114-3 id=__codelineno-114-3 name=__codelineno-114-3></a>VIPP0-&gt;venc0-&gt;muxerGrp0：bufferNum=5，采集分辨率1920x1080，格式LBC2.5，h264编码帧率30，码率1Mbit/
<a href=#__codelineno-114-4 id=__codelineno-114-4 name=__codelineno-114-4></a>s，threshSize：w*h/10, 普通NormalP编码，vbv缓存1秒。
<a href=#__codelineno-114-5 id=__codelineno-114-5 name=__codelineno-114-5></a>VIPP1-&gt;venc1-&gt;muxerGrp1: bufferNum=5，采集分辨率640x480，格式NV21，h264编码帧率30，码率500Kbit/s
<a href=#__codelineno-114-6 id=__codelineno-114-6 name=__codelineno-114-6></a>，threshSize：w*h/10, 普通NormalP编码，vbv缓存1秒。
<a href=#__codelineno-114-7 id=__codelineno-114-7 name=__codelineno-114-7></a>VIPP1-&gt;venc2-&gt;muxerGrp2: h264编码帧率30，码率500Kbit/s，threshSize：w*h/10，普通NormalP编码，vbv
<a href=#__codelineno-114-8 id=__codelineno-114-8 name=__codelineno-114-8></a>缓存1秒，timelapse = 200ms。
<a href=#__codelineno-114-9 id=__codelineno-114-9 name=__codelineno-114-9></a>VIPP1-&gt;venc3-&gt;muxerGrp3: h264编码帧率30，码率500Kbit/s，threshSize：w*h/10，普通NormalP编码，vbv
<a href=#__codelineno-114-10 id=__codelineno-114-10 name=__codelineno-114-10></a>缓存1秒，timelapse = 1000ms。
<a href=#__codelineno-114-11 id=__codelineno-114-11 name=__codelineno-114-11></a>VIPP0-&gt;venc_jpeg：每隔30秒拍照一张。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-115-1 id=__codelineno-115-1 name=__codelineno-115-1></a>mpp_vi
<a href=#__codelineno-115-2 id=__codelineno-115-2 name=__codelineno-115-2></a>mpp_venc
<a href=#__codelineno-115-3 id=__codelineno-115-3 name=__codelineno-115-3></a>mpp_muxer
</code></pre></div> 测试通路： ![image-20221120173040894](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173040894.png) <center>图 8-14: MPP_sample 测试通路-sample_multi_vi2venc2muxer</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-116-1 id=__codelineno-116-1 name=__codelineno-116-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-117-1 id=__codelineno-117-1 name=__codelineno-117-1></a>/mnt/extsd/1080p_1.mp4
<a href=#__codelineno-117-2 id=__codelineno-117-2 name=__codelineno-117-2></a>/mnt/extsd/1080p_2.mp4
<a href=#__codelineno-117-3 id=__codelineno-117-3 name=__codelineno-117-3></a>/mnt/extsd/1080p_3.mp4
<a href=#__codelineno-117-4 id=__codelineno-117-4 name=__codelineno-117-4></a>/mnt/extsd/1080p_4.mp4
<a href=#__codelineno-117-5 id=__codelineno-117-5 name=__codelineno-117-5></a>/mnt/extsd/360p_1.mp4
<a href=#__codelineno-117-6 id=__codelineno-117-6 name=__codelineno-117-6></a>/mnt/extsd/360p_2.mp4
<a href=#__codelineno-117-7 id=__codelineno-117-7 name=__codelineno-117-7></a>/mnt/extsd/360p_3.mp4
<a href=#__codelineno-117-8 id=__codelineno-117-8 name=__codelineno-117-8></a>/mnt/extsd/360p_4.mp4
<a href=#__codelineno-117-9 id=__codelineno-117-9 name=__codelineno-117-9></a>/mnt/extsd/timelapse_first.mp4
<a href=#__codelineno-117-10 id=__codelineno-117-10 name=__codelineno-117-10></a>/mnt/extsd/timelapse_second.mp4
<a href=#__codelineno-117-11 id=__codelineno-117-11 name=__codelineno-117-11></a>/mnt/extsd/1080p_1.jpeg
<a href=#__codelineno-117-12 id=__codelineno-117-12 name=__codelineno-117-12></a>/mnt/extsd/1080p_2.jpeg
<a href=#__codelineno-117-13 id=__codelineno-117-13 name=__codelineno-117-13></a>/mnt/extsd/1080p_3.jpeg
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-118-1 id=__codelineno-118-1 name=__codelineno-118-1></a>vipp0：第1条vpp通路的vipp设备号。
<a href=#__codelineno-118-2 id=__codelineno-118-2 name=__codelineno-118-2></a>vipp0_format：图像采集格式。
<a href=#__codelineno-118-3 id=__codelineno-118-3 name=__codelineno-118-3></a>vipp0_capture_width：图像采集宽度。
<a href=#__codelineno-118-4 id=__codelineno-118-4 name=__codelineno-118-4></a>vipp0_capture_height：图像采集高度。
<a href=#__codelineno-118-5 id=__codelineno-118-5 name=__codelineno-118-5></a>vipp0_framerate：图像采集帧率，单位: fps。
<a href=#__codelineno-118-6 id=__codelineno-118-6 name=__codelineno-118-6></a>vipp1：第2条vpp通路的vipp设备号。
<a href=#__codelineno-118-7 id=__codelineno-118-7 name=__codelineno-118-7></a>vipp1_format：图像采集格式。
<a href=#__codelineno-118-8 id=__codelineno-118-8 name=__codelineno-118-8></a>vipp1_capture_width：图像采集宽度。
<a href=#__codelineno-118-9 id=__codelineno-118-9 name=__codelineno-118-9></a>vipp1_capture_height：图像采集高度。
<a href=#__codelineno-118-10 id=__codelineno-118-10 name=__codelineno-118-10></a>vipp1_framerate：图像采集帧率，单位: fps。
<a href=#__codelineno-118-11 id=__codelineno-118-11 name=__codelineno-118-11></a>主码流
<a href=#__codelineno-118-12 id=__codelineno-118-12 name=__codelineno-118-12></a>videoA_vipp：视频编码通路连接的vipp设备号。
<a href=#__codelineno-118-13 id=__codelineno-118-13 name=__codelineno-118-13></a>videoA_file：录制的视频文件路径。
<a href=#__codelineno-118-14 id=__codelineno-118-14 name=__codelineno-118-14></a>videoA_file_cnt：循环录制允许的最大文件数目，超过就开始删除最早的文件。
<a href=#__codelineno-118-15 id=__codelineno-118-15 name=__codelineno-118-15></a>videoA_framerate：编码目标帧率，单位: fps。
<a href=#__codelineno-118-16 id=__codelineno-118-16 name=__codelineno-118-16></a>videoA_bitrate：编码码率，单位: bps。
<a href=#__codelineno-118-17 id=__codelineno-118-17 name=__codelineno-118-17></a>videoA_width；编码输出宽度。
<a href=#__codelineno-118-18 id=__codelineno-118-18 name=__codelineno-118-18></a>videoA_height：编码输出高度。
<a href=#__codelineno-118-19 id=__codelineno-118-19 name=__codelineno-118-19></a>videoA_encoder：编码格式。
<a href=#__codelineno-118-20 id=__codelineno-118-20 name=__codelineno-118-20></a>videoA_rc_mode；码率模式，0:CBR 1:VBR。
<a href=#__codelineno-118-21 id=__codelineno-118-21 name=__codelineno-118-21></a>videoA_duration：文件时长。
<a href=#__codelineno-118-22 id=__codelineno-118-22 name=__codelineno-118-22></a>videoA_timelapse：timelapse模式，-1:禁止timelapse; 0:慢摄影; &gt;0:timelapse模式, 数值为采集帧的帧间
<a href=#__codelineno-118-23 id=__codelineno-118-23 name=__codelineno-118-23></a>隔，单位us。
<a href=#__codelineno-118-24 id=__codelineno-118-24 name=__codelineno-118-24></a>子码流
<a href=#__codelineno-118-25 id=__codelineno-118-25 name=__codelineno-118-25></a>videoB_vipp：视频编码通路连接的vipp设备号。
<a href=#__codelineno-118-26 id=__codelineno-118-26 name=__codelineno-118-26></a>videoB_file：录制的视频文件路径。
<a href=#__codelineno-118-27 id=__codelineno-118-27 name=__codelineno-118-27></a>videoB_file_cnt：循环录制允许的最大文件数目，超过就开始删除最早的文件。
<a href=#__codelineno-118-28 id=__codelineno-118-28 name=__codelineno-118-28></a>videoB_framerate：编码目标帧率，单位: fps。
<a href=#__codelineno-118-29 id=__codelineno-118-29 name=__codelineno-118-29></a>videoB_bitrate：编码码率，单位: bps。
<a href=#__codelineno-118-30 id=__codelineno-118-30 name=__codelineno-118-30></a>videoB_width；编码输出宽度。
<a href=#__codelineno-118-31 id=__codelineno-118-31 name=__codelineno-118-31></a>videoB_height：编码输出高度。
<a href=#__codelineno-118-32 id=__codelineno-118-32 name=__codelineno-118-32></a>videoB_encoder：编码格式。
<a href=#__codelineno-118-33 id=__codelineno-118-33 name=__codelineno-118-33></a>videoB_rc_mode；码率模式，0:CBR 1:VBR。
<a href=#__codelineno-118-34 id=__codelineno-118-34 name=__codelineno-118-34></a>videoB_duration：文件时长。
<a href=#__codelineno-118-35 id=__codelineno-118-35 name=__codelineno-118-35></a>videoB_timelapse：timelapse模式，-1:禁止timelapse; 0:慢摄影; &gt;0:timelapse模式, 数值为采集帧的帧间
<a href=#__codelineno-118-36 id=__codelineno-118-36 name=__codelineno-118-36></a>隔，单位us。
<a href=#__codelineno-118-37 id=__codelineno-118-37 name=__codelineno-118-37></a>缩时录影1
<a href=#__codelineno-118-38 id=__codelineno-118-38 name=__codelineno-118-38></a>videoC_vipp：视频编码通路连接的vipp设备号。
<a href=#__codelineno-118-39 id=__codelineno-118-39 name=__codelineno-118-39></a>videoC_file：录制的视频文件路径。
<a href=#__codelineno-118-40 id=__codelineno-118-40 name=__codelineno-118-40></a>videoC_file_cnt：循环录制允许的最大文件数目，超过就开始删除最早的文件。
<a href=#__codelineno-118-41 id=__codelineno-118-41 name=__codelineno-118-41></a>videoC_framerate：编码目标帧率，单位: fps。
<a href=#__codelineno-118-42 id=__codelineno-118-42 name=__codelineno-118-42></a>videoC_bitrate：编码码率，单位: bps。
<a href=#__codelineno-118-43 id=__codelineno-118-43 name=__codelineno-118-43></a>videoC_width；编码输出宽度。
<a href=#__codelineno-118-44 id=__codelineno-118-44 name=__codelineno-118-44></a>videoC_height：编码输出高度。
<a href=#__codelineno-118-45 id=__codelineno-118-45 name=__codelineno-118-45></a>videoC_encoder：编码格式。
<a href=#__codelineno-118-46 id=__codelineno-118-46 name=__codelineno-118-46></a>videoC_rc_mode；码率模式，0:CBR 1:VBR。
<a href=#__codelineno-118-47 id=__codelineno-118-47 name=__codelineno-118-47></a>videoC_duration：文件时长。
<a href=#__codelineno-118-48 id=__codelineno-118-48 name=__codelineno-118-48></a>videoC_timelapse：timelapse模式，-1:禁止timelapse; 0:慢摄影; &gt;0:timelapse模式, 数值为采集帧的帧间
<a href=#__codelineno-118-49 id=__codelineno-118-49 name=__codelineno-118-49></a>隔，单位us。
<a href=#__codelineno-118-50 id=__codelineno-118-50 name=__codelineno-118-50></a>缩时录影2
<a href=#__codelineno-118-51 id=__codelineno-118-51 name=__codelineno-118-51></a>videoD_vipp：视频编码通路连接的vipp设备号。
<a href=#__codelineno-118-52 id=__codelineno-118-52 name=__codelineno-118-52></a>videoD_file：录制的视频文件路径。
<a href=#__codelineno-118-53 id=__codelineno-118-53 name=__codelineno-118-53></a>videoD_file_cnt：循环录制允许的最大文件数目，超过就开始删除最早的文件。
<a href=#__codelineno-118-54 id=__codelineno-118-54 name=__codelineno-118-54></a>videoD_framerate：编码目标帧率，单位: fps。
<a href=#__codelineno-118-55 id=__codelineno-118-55 name=__codelineno-118-55></a>videoD_bitrate：编码码率，单位: bps。
<a href=#__codelineno-118-56 id=__codelineno-118-56 name=__codelineno-118-56></a>videoD_width；编码输出宽度。
<a href=#__codelineno-118-57 id=__codelineno-118-57 name=__codelineno-118-57></a>videoD_height：编码输出高度。
<a href=#__codelineno-118-58 id=__codelineno-118-58 name=__codelineno-118-58></a>videoD_encoder：编码格式。
<a href=#__codelineno-118-59 id=__codelineno-118-59 name=__codelineno-118-59></a>videoD_rc_mode；码率模式，0:CBR 1:VBR。
<a href=#__codelineno-118-60 id=__codelineno-118-60 name=__codelineno-118-60></a>videoD_duration：文件时长。
<a href=#__codelineno-118-61 id=__codelineno-118-61 name=__codelineno-118-61></a>videoD_timelapse：timelapse模式，-1:禁止timelapse; 0:慢摄影; &gt;0:timelapse模式, 数值为采集帧的帧间
<a href=#__codelineno-118-62 id=__codelineno-118-62 name=__codelineno-118-62></a>隔，单位us。
<a href=#__codelineno-118-63 id=__codelineno-118-63 name=__codelineno-118-63></a>JPEG拍照
<a href=#__codelineno-118-64 id=__codelineno-118-64 name=__codelineno-118-64></a>videoE_vipp: 拍照通路连接的vipp设备号。
<a href=#__codelineno-118-65 id=__codelineno-118-65 name=__codelineno-118-65></a>videoE_file_jpeg: 拍照的图片路径。
<a href=#__codelineno-118-66 id=__codelineno-118-66 name=__codelineno-118-66></a>videoE_file_jpeg_cnt: 拍照的图片张数。
<a href=#__codelineno-118-67 id=__codelineno-118-67 name=__codelineno-118-67></a>videoE_width：编码输出宽度。
<a href=#__codelineno-118-68 id=__codelineno-118-68 name=__codelineno-118-68></a>videoE_height：编码输出高度。
<a href=#__codelineno-118-69 id=__codelineno-118-69 name=__codelineno-118-69></a>videoE_encoder：编码格式。
<a href=#__codelineno-118-70 id=__codelineno-118-70 name=__codelineno-118-70></a>videoE_photo_interval：拍照时间间隔，单位: s。
<a href=#__codelineno-118-71 id=__codelineno-118-71 name=__codelineno-118-71></a>test_duration：测试时间，单位: s。0表示无限时长。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-119-1 id=__codelineno-119-1 name=__codelineno-119-1></a># cd /mnt/extsd/
<a href=#__codelineno-119-2 id=__codelineno-119-2 name=__codelineno-119-2></a># ./sample_multi_vi2venc2muxer -path ./sample_multi_vi2venc2muxer.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-120-1 id=__codelineno-120-1 name=__codelineno-120-1></a># sample_multi_vi2venc2muxer -path ./mnt/E/sample_multi_vi2venc2muxer.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-121-1 id=__codelineno-121-1 name=__codelineno-121-1></a>到达设定的测试时长后会自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-122-1 id=__codelineno-122-1 name=__codelineno-122-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-122-2 id=__codelineno-122-2 name=__codelineno-122-2></a>2. 使用VLC 软件播放生成的mp4文件正常。
</code></pre></div> #### 8.1.15 sample_rtsp 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-123-1 id=__codelineno-123-1 name=__codelineno-123-1></a>演示视频编码后的rtsp传输的场景。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-124-1 id=__codelineno-124-1 name=__codelineno-124-1></a>mpp_vi
<a href=#__codelineno-124-2 id=__codelineno-124-2 name=__codelineno-124-2></a>mpp_venc
<a href=#__codelineno-124-3 id=__codelineno-124-3 name=__codelineno-124-3></a>mpp_system_rtsp
</code></pre></div> 测试通路： ![image-20221120173139208](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173139208.png) <center>图 8-15: MPP_sample 测试通路-sample_rtsp</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-125-1 id=__codelineno-125-1 name=__codelineno-125-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-126-1 id=__codelineno-126-1 name=__codelineno-126-1></a>AW_VirviEncoder.H26
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-127-1 id=__codelineno-127-1 name=__codelineno-127-1></a>主码流
<a href=#__codelineno-127-2 id=__codelineno-127-2 name=__codelineno-127-2></a>main_vipp: 指定vipp设备号，默认0，表示vipp0。
<a href=#__codelineno-127-3 id=__codelineno-127-3 name=__codelineno-127-3></a>main_src_width: 指定原始视频的宽度。
<a href=#__codelineno-127-4 id=__codelineno-127-4 name=__codelineno-127-4></a>main_src_height: 指定原始视频的高度。
<a href=#__codelineno-127-5 id=__codelineno-127-5 name=__codelineno-127-5></a>main_pixel_format: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型
<a href=#__codelineno-127-6 id=__codelineno-127-6 name=__codelineno-127-6></a>: aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-127-7 id=__codelineno-127-7 name=__codelineno-127-7></a>main_wdr_enable: 指定是否开启WDR，默认0，表示不开WDR。
<a href=#__codelineno-127-8 id=__codelineno-127-8 name=__codelineno-127-8></a>main_vi_buf_num: 指定VI的buffer个数，仅对离线编码有效。
<a href=#__codelineno-127-9 id=__codelineno-127-9 name=__codelineno-127-9></a>main_src_frame_rate: 指定vipp采集的帧率，单位: fps。
<a href=#__codelineno-127-10 id=__codelineno-127-10 name=__codelineno-127-10></a>main_viChn: 指定vi虚通道号，默认0，表示vi ch0。配置为-1表示不测试主码流。
<a href=#__codelineno-127-11 id=__codelineno-127-11 name=__codelineno-127-11></a>main_venc_chn: 指定ve通道号，默认0，表示ve ch0。配置为-1表示不测试主码流。
<a href=#__codelineno-127-12 id=__codelineno-127-12 name=__codelineno-127-12></a>main_encode_type: 指定编码格式（H.264、H.265）。
<a href=#__codelineno-127-13 id=__codelineno-127-13 name=__codelineno-127-13></a>main_encode_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-127-14 id=__codelineno-127-14 name=__codelineno-127-14></a>main_encode_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-127-15 id=__codelineno-127-15 name=__codelineno-127-15></a>main_encode_frame_rate: 指定编码视频的帧率，单位: fps。
<a href=#__codelineno-127-16 id=__codelineno-127-16 name=__codelineno-127-16></a>main_encode_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-127-17 id=__codelineno-127-17 name=__codelineno-127-17></a>main_file_path: 指定编码裸流文件的存放路径。若不指定，则不会保存到文件。
<a href=#__codelineno-127-18 id=__codelineno-127-18 name=__codelineno-127-18></a>main_online_en: 指定是否开启在线编码，默认0，表示不开启在线编码，即当前为离线编码。
<a href=#__codelineno-127-19 id=__codelineno-127-19 name=__codelineno-127-19></a>main_online_share_buf_num: 指定在线编码的共享buffer个数（1或2），默认2，表示2个buffer。注意该配置仅当
<a href=#__codelineno-127-20 id=__codelineno-127-20 name=__codelineno-127-20></a>配置在线模式时才生效。
<a href=#__codelineno-127-21 id=__codelineno-127-21 name=__codelineno-127-21></a>main_encpp_disable: 指定是否禁用encpp新通路，默认0，表示不禁用。
<a href=#__codelineno-127-22 id=__codelineno-127-22 name=__codelineno-127-22></a>子码流
<a href=#__codelineno-127-23 id=__codelineno-127-23 name=__codelineno-127-23></a>sub_vipp: 指定vipp设备号，默认1，表示vipp1（对于V853，表示vipp4）。
<a href=#__codelineno-127-24 id=__codelineno-127-24 name=__codelineno-127-24></a>sub_vipp_crop_en: 指定是否开启vipp crop功能。默认1，表示开启。
<a href=#__codelineno-127-25 id=__codelineno-127-25 name=__codelineno-127-25></a>sub_vipp_crop_rect_x: 指定vipp crop的x坐标。
<a href=#__codelineno-127-26 id=__codelineno-127-26 name=__codelineno-127-26></a>sub_vipp_crop_rect_y: 指定vipp crop的y坐标。
<a href=#__codelineno-127-27 id=__codelineno-127-27 name=__codelineno-127-27></a>sub_vipp_crop_rect_w: 指定vipp crop的宽度。
<a href=#__codelineno-127-28 id=__codelineno-127-28 name=__codelineno-127-28></a>sub_vipp_crop_rect_h: 指定vipp crop的高度。
<a href=#__codelineno-127-29 id=__codelineno-127-29 name=__codelineno-127-29></a>sub_src_width: 指定原始视频的宽度。
<a href=#__codelineno-127-30 id=__codelineno-127-30 name=__codelineno-127-30></a>sub_src_height: 指定原始视频的高度。
<a href=#__codelineno-127-31 id=__codelineno-127-31 name=__codelineno-127-31></a>sub_pixel_format: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型:
<a href=#__codelineno-127-32 id=__codelineno-127-32 name=__codelineno-127-32></a>aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-127-33 id=__codelineno-127-33 name=__codelineno-127-33></a>sub_wdr_enable: 指定是否开启WDR，默认0，表示不开WDR。
<a href=#__codelineno-127-34 id=__codelineno-127-34 name=__codelineno-127-34></a>sub_vi_buf_num: 指定VI的buffer个数，仅对离线编码有效。
<a href=#__codelineno-127-35 id=__codelineno-127-35 name=__codelineno-127-35></a>sub_src_frame_rate: 指定vipp采集的帧率，单位: fps。
<a href=#__codelineno-127-36 id=__codelineno-127-36 name=__codelineno-127-36></a>sub_viChn: 指定vi虚通道号，默认0，表示vi ch0。配置为-1表示不测试子码流。
<a href=#__codelineno-127-37 id=__codelineno-127-37 name=__codelineno-127-37></a>sub_venc_chn: 指定ve通道号，默认1，表示ve ch1。配置为-1表示不测试子码流。
<a href=#__codelineno-127-38 id=__codelineno-127-38 name=__codelineno-127-38></a>sub_encode_type: 指定编码格式（H.264、H.265）。
<a href=#__codelineno-127-39 id=__codelineno-127-39 name=__codelineno-127-39></a>sub_encode_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-127-40 id=__codelineno-127-40 name=__codelineno-127-40></a>sub_encode_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-127-41 id=__codelineno-127-41 name=__codelineno-127-41></a>sub_encode_frame_rate: 指定编码视频的帧率，单位: fps。
<a href=#__codelineno-127-42 id=__codelineno-127-42 name=__codelineno-127-42></a>sub_encode_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-127-43 id=__codelineno-127-43 name=__codelineno-127-43></a>sub_file_path: 指定编码裸流文件的存放路径。若不指定，则不会保存到文件。
<a href=#__codelineno-127-44 id=__codelineno-127-44 name=__codelineno-127-44></a>sub_encpp_disable: 指定是否禁用encpp新通路，默认0，表示不禁用。
<a href=#__codelineno-127-45 id=__codelineno-127-45 name=__codelineno-127-45></a>缩时录影
<a href=#__codelineno-127-46 id=__codelineno-127-46 name=__codelineno-127-46></a>lapse_viChn: 指定vi虚通道号，默认1，表示vi ch1。配置为-1表示不测试子码流。
<a href=#__codelineno-127-47 id=__codelineno-127-47 name=__codelineno-127-47></a>lapse_venc_chn: 指定ve通道号，默认2，表示ve ch2。配置为-1表示不测试子码流。
<a href=#__codelineno-127-48 id=__codelineno-127-48 name=__codelineno-127-48></a>lapse_encode_type: 指定编码格式（H.264、H.265）。
<a href=#__codelineno-127-49 id=__codelineno-127-49 name=__codelineno-127-49></a>lapse_encode_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-127-50 id=__codelineno-127-50 name=__codelineno-127-50></a>lapse_encode_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-127-51 id=__codelineno-127-51 name=__codelineno-127-51></a>lapse_encode_frame_rate: 指定编码视频的帧率，单位: fps。
<a href=#__codelineno-127-52 id=__codelineno-127-52 name=__codelineno-127-52></a>lapse_encode_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-127-53 id=__codelineno-127-53 name=__codelineno-127-53></a>lapse_file_path: 指定编码裸流文件的存放路径。若不指定，则不会保存到文件。
<a href=#__codelineno-127-54 id=__codelineno-127-54 name=__codelineno-127-54></a>lapse_time: 指定缩时录影的帧间隔时间，单位: ms。
<a href=#__codelineno-127-55 id=__codelineno-127-55 name=__codelineno-127-55></a>lapse_encpp_disable: 指定是否禁用encpp新通路，默认0，表示不禁用。
<a href=#__codelineno-127-56 id=__codelineno-127-56 name=__codelineno-127-56></a>ISP2VE联动机制参数配置
<a href=#__codelineno-127-57 id=__codelineno-127-57 name=__codelineno-127-57></a>isp_ve_linkage_enable: 指定是否开启ISP2VE联动机制。默认0，表示不开启。
<a href=#__codelineno-127-58 id=__codelineno-127-58 name=__codelineno-127-58></a>isp_ve_linkage_test_stream: 指定ISP2VE联动机制应用到哪一路，默认0，表示主码流。（0:main stream, 1:
<a href=#__codelineno-127-59 id=__codelineno-127-59 name=__codelineno-127-59></a>sub stream, 2:lapse stream）
<a href=#__codelineno-127-60 id=__codelineno-127-60 name=__codelineno-127-60></a>ve2isp_param_update_interval: 指定ISP2VE联动参数更新的时间间隔，单位: ms。
<a href=#__codelineno-127-61 id=__codelineno-127-61 name=__codelineno-127-61></a>rtsp_net_type: 指定RTSP网络类型。默认1，表示以太网。（0: "lo", 1: "eth0", 2: "br0", 3: "wlan0"）
<a href=#__codelineno-127-62 id=__codelineno-127-62 name=__codelineno-127-62></a>test_duration: 测试时间，单位: s。0表示无限时长。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-128-1 id=__codelineno-128-1 name=__codelineno-128-1></a>1. 将sample_rtsp和sample_rtsp.conf放到sd卡根目录。
<a href=#__codelineno-128-2 id=__codelineno-128-2 name=__codelineno-128-2></a>2. 将sd卡挂载到机器上。
<a href=#__codelineno-128-3 id=__codelineno-128-3 name=__codelineno-128-3></a>3. 执行测试指令
<a href=#__codelineno-128-4 id=__codelineno-128-4 name=__codelineno-128-4></a>cd /mnt/extsd/
<a href=#__codelineno-128-5 id=__codelineno-128-5 name=__codelineno-128-5></a>./sample_rtsp -path ./sample_rtsp.conf
<a href=#__codelineno-128-6 id=__codelineno-128-6 name=__codelineno-128-6></a>打印中会提示播放链接。
<a href=#__codelineno-128-7 id=__codelineno-128-7 name=__codelineno-128-7></a>4. 在PC 上使用VLC 播放rtsp 链接
<a href=#__codelineno-128-8 id=__codelineno-128-8 name=__codelineno-128-8></a>rtsp://192.168.10.1:8554/ch0
<a href=#__codelineno-128-9 id=__codelineno-128-9 name=__codelineno-128-9></a>rtsp://192.168.10.1:8554/ch1
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-129-1 id=__codelineno-129-1 name=__codelineno-129-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-130-1 id=__codelineno-130-1 name=__codelineno-130-1></a>按“ctrl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-131-1 id=__codelineno-131-1 name=__codelineno-131-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-131-2 id=__codelineno-131-2 name=__codelineno-131-2></a>2. 通过VLC 可以正常播放rtsp 链接。
</code></pre></div> #### 8.1.16 sample_CodecParallel 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-132-1 id=__codelineno-132-1 name=__codelineno-132-1></a>演示同编同解。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-133-1 id=__codelineno-133-1 name=__codelineno-133-1></a>mpp_vi
<a href=#__codelineno-133-2 id=__codelineno-133-2 name=__codelineno-133-2></a>mpp_venc
<a href=#__codelineno-133-3 id=__codelineno-133-3 name=__codelineno-133-3></a>mpp_demuxer
<a href=#__codelineno-133-4 id=__codelineno-133-4 name=__codelineno-133-4></a>mpp_vdec
<a href=#__codelineno-133-5 id=__codelineno-133-5 name=__codelineno-133-5></a>mpp_muxer
<a href=#__codelineno-133-6 id=__codelineno-133-6 name=__codelineno-133-6></a>mpp_hw_display
<a href=#__codelineno-133-7 id=__codelineno-133-7 name=__codelineno-133-7></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120173547722](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173547722.png) <center>图 8-16: MPP_sample 测试通路-sample_CodecParallel</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-134-1 id=__codelineno-134-1 name=__codelineno-134-1></a>/mnt/extsd/test.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-135-1 id=__codelineno-135-1 name=__codelineno-135-1></a>/mnt/extsd/1080p.mp4
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-136-1 id=__codelineno-136-1 name=__codelineno-136-1></a># 通用配置
<a href=#__codelineno-136-2 id=__codelineno-136-2 name=__codelineno-136-2></a>test_duration：指定测试时间
<a href=#__codelineno-136-3 id=__codelineno-136-3 name=__codelineno-136-3></a># 录制配置
<a href=#__codelineno-136-4 id=__codelineno-136-4 name=__codelineno-136-4></a>record_vipp_id：指定VIPP设备号
<a href=#__codelineno-136-5 id=__codelineno-136-5 name=__codelineno-136-5></a>record_vipp_format：指定camera采集的图像格式
<a href=#__codelineno-136-6 id=__codelineno-136-6 name=__codelineno-136-6></a>record_vipp_capture_width：指定camera采集的图像宽度
<a href=#__codelineno-136-7 id=__codelineno-136-7 name=__codelineno-136-7></a>record_vipp_capture_height：指定camera采集的图像高度
<a href=#__codelineno-136-8 id=__codelineno-136-8 name=__codelineno-136-8></a>record_vipp_frame_rate：指定camera采集的帧率
<a href=#__codelineno-136-9 id=__codelineno-136-9 name=__codelineno-136-9></a>record_dest_file：指定录制文件的路径
<a href=#__codelineno-136-10 id=__codelineno-136-10 name=__codelineno-136-10></a>record_video_file_format：指定视频封装格式
<a href=#__codelineno-136-11 id=__codelineno-136-11 name=__codelineno-136-11></a>record_video_frame_rate：指定视频编码的帧率
<a href=#__codelineno-136-12 id=__codelineno-136-12 name=__codelineno-136-12></a>record_video_bitrate：指定视频编码的码率
<a href=#__codelineno-136-13 id=__codelineno-136-13 name=__codelineno-136-13></a>record_video_width：指定视频编码的图像宽度
<a href=#__codelineno-136-14 id=__codelineno-136-14 name=__codelineno-136-14></a>record_video_heigth：指定视频编码的图像高度
<a href=#__codelineno-136-15 id=__codelineno-136-15 name=__codelineno-136-15></a>record_video_encoder_type：指定视频编码格式
<a href=#__codelineno-136-16 id=__codelineno-136-16 name=__codelineno-136-16></a>record_video_rc_mode：指定视频编码的码率控制模式
<a href=#__codelineno-136-17 id=__codelineno-136-17 name=__codelineno-136-17></a>record_video_duration：指定视频编码的图像宽度
<a href=#__codelineno-136-18 id=__codelineno-136-18 name=__codelineno-136-18></a># 预览配置
<a href=#__codelineno-136-19 id=__codelineno-136-19 name=__codelineno-136-19></a>preview_vipp_id：指定VIPP设备号
<a href=#__codelineno-136-20 id=__codelineno-136-20 name=__codelineno-136-20></a>preview_vipp_format：指定camera采集的图像格式
<a href=#__codelineno-136-21 id=__codelineno-136-21 name=__codelineno-136-21></a>preview_vipp_capture_width：指定camera采集的图像宽度
<a href=#__codelineno-136-22 id=__codelineno-136-22 name=__codelineno-136-22></a>preview_vipp_capture_height：指定camera采集的图像高度
<a href=#__codelineno-136-23 id=__codelineno-136-23 name=__codelineno-136-23></a>preview_vipp_frame_rate：指定camera采集的帧率
<a href=#__codelineno-136-24 id=__codelineno-136-24 name=__codelineno-136-24></a>preview_vo_dev_id：指定VO设备号
<a href=#__codelineno-136-25 id=__codelineno-136-25 name=__codelineno-136-25></a>preview_vo_display_x：指定输出图像的X 轴位置
<a href=#__codelineno-136-26 id=__codelineno-136-26 name=__codelineno-136-26></a>preview_vo_display_y：指定输出图像的Y 轴位置
<a href=#__codelineno-136-27 id=__codelineno-136-27 name=__codelineno-136-27></a>preview_vo_display_width：指定输出图像宽度
<a href=#__codelineno-136-28 id=__codelineno-136-28 name=__codelineno-136-28></a>preview_vo_display_height：指定输出图像高度
<a href=#__codelineno-136-29 id=__codelineno-136-29 name=__codelineno-136-29></a>preview_vo_layer_num：指定图像显示的图层
<a href=#__codelineno-136-30 id=__codelineno-136-30 name=__codelineno-136-30></a>preview_vo_disp_type：指定显示设备（hdmi, lcd, cvbs）
<a href=#__codelineno-136-31 id=__codelineno-136-31 name=__codelineno-136-31></a># 播放配置
<a href=#__codelineno-136-32 id=__codelineno-136-32 name=__codelineno-136-32></a>play_src_file：指定原始视频文件的路径
<a href=#__codelineno-136-33 id=__codelineno-136-33 name=__codelineno-136-33></a>play_vo_dev_id：指定VO设备号
<a href=#__codelineno-136-34 id=__codelineno-136-34 name=__codelineno-136-34></a>play_vo_display_x：指定输出图像的X 轴位置
<a href=#__codelineno-136-35 id=__codelineno-136-35 name=__codelineno-136-35></a>play_vo_display_y：指定输出图像的Y 轴位置
<a href=#__codelineno-136-36 id=__codelineno-136-36 name=__codelineno-136-36></a>play_vo_display_width：指定输出图像宽度
<a href=#__codelineno-136-37 id=__codelineno-136-37 name=__codelineno-136-37></a>play_vo_display_height：指定输出图像高度
<a href=#__codelineno-136-38 id=__codelineno-136-38 name=__codelineno-136-38></a>play_vo_layer_num：指定图像显示的图层
<a href=#__codelineno-136-39 id=__codelineno-136-39 name=__codelineno-136-39></a>play_vo_disp_type：指定显示设备（hdmi, lcd, cvbs）
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-137-1 id=__codelineno-137-1 name=__codelineno-137-1></a># cd /mnt/extsd/
<a href=#__codelineno-137-2 id=__codelineno-137-2 name=__codelineno-137-2></a># ./sample_CodecParallel -path ./sample_CodecParallel.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-138-1 id=__codelineno-138-1 name=__codelineno-138-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-139-1 id=__codelineno-139-1 name=__codelineno-139-1></a>1. 达到设定的测试时间后，自动退出测试。
<a href=#__codelineno-139-2 id=__codelineno-139-2 name=__codelineno-139-2></a>2. 播放完test.mp4 文件后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-140-1 id=__codelineno-140-1 name=__codelineno-140-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-140-2 id=__codelineno-140-2 name=__codelineno-140-2></a>2. LCD屏幕一半显示预览画面，一半显示播放画面，同时会生成编码文件1080p.mp4。
</code></pre></div> #### 8.1.17 sample_vdec 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-141-1 id=__codelineno-141-1 name=__codelineno-141-1></a>连续解码jpg格式图片或者h264裸码流，然后保存为yuv格式文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-142-1 id=__codelineno-142-1 name=__codelineno-142-1></a>mpp_vdec
</code></pre></div> 测试通路： ![image-20221120173607272](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173607272.png) <center>图 8-17: MPP_sample 测试通路-sample_vdec</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-143-1 id=__codelineno-143-1 name=__codelineno-143-1></a>/mnt/extsd/vbs1.h264
<a href=#__codelineno-143-2 id=__codelineno-143-2 name=__codelineno-143-2></a>/mnt/extsd/vbs1.len
<a href=#__codelineno-143-3 id=__codelineno-143-3 name=__codelineno-143-3></a>/mnt/extsd/vbs2.h265
<a href=#__codelineno-143-4 id=__codelineno-143-4 name=__codelineno-143-4></a>/mnt/extsd/vbs2.len
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-144-1 id=__codelineno-144-1 name=__codelineno-144-1></a>/mnt/extsd/h264.yuv
<a href=#__codelineno-144-2 id=__codelineno-144-2 name=__codelineno-144-2></a>/mnt/extsd/h265.yuv
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-145-1 id=__codelineno-145-1 name=__codelineno-145-1></a>vdecoder_format: 指定解码格式，jpeg或者h264。
<a href=#__codelineno-145-2 id=__codelineno-145-2 name=__codelineno-145-2></a>yuv_file_path: 指定解码后生成的yuv文件的路径。
<a href=#__codelineno-145-3 id=__codelineno-145-3 name=__codelineno-145-3></a>jpeg_file_path: 指定原jpg图片路径，该文件必须为jpeg格式的文件。
<a href=#__codelineno-145-4 id=__codelineno-145-4 name=__codelineno-145-4></a>h264_vbs_path: 指定原264裸码流路径。
<a href=#__codelineno-145-5 id=__codelineno-145-5 name=__codelineno-145-5></a>h264_len_path: 指定原264裸码流祯大小描述文件路径。
<a href=#__codelineno-145-6 id=__codelineno-145-6 name=__codelineno-145-6></a>h265_vbs_path: 指定原265裸码流路径。
<a href=#__codelineno-145-7 id=__codelineno-145-7 name=__codelineno-145-7></a>h265_len_path: 指定原265裸码流祯大小描述文件路径。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-146-1 id=__codelineno-146-1 name=__codelineno-146-1></a># cd /mnt/extsd/
<a href=#__codelineno-146-2 id=__codelineno-146-2 name=__codelineno-146-2></a># ./sample_vdec -path ./sample_vdec.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-147-1 id=__codelineno-147-1 name=__codelineno-147-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-148-1 id=__codelineno-148-1 name=__codelineno-148-1></a>文件解码完后会自动结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-149-1 id=__codelineno-149-1 name=__codelineno-149-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-149-2 id=__codelineno-149-2 name=__codelineno-149-2></a>2. 使用YUView 软件查看生成的YUV文件正常。
</code></pre></div> #### 8.1.18 sample_demux2vdec 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-150-1 id=__codelineno-150-1 name=__codelineno-150-1></a>该sample演示从原始视频文件（如：xxx.mp4）中分离出视频数据帧并解码生成yuv文件。 
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-151-1 id=__codelineno-151-1 name=__codelineno-151-1></a>mpp_demuxer mpp_vdec 
</code></pre></div> 测试通路： ![image-20221120173635176](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173635176.png) <center>图 8-18: MPP_sample 测试通路-sample_demux2vdec</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-152-1 id=__codelineno-152-1 name=__codelineno-152-1></a>/mnt/extsd/test.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-153-1 id=__codelineno-153-1 name=__codelineno-153-1></a>/mnt/extsd/y.yuv
<a href=#__codelineno-153-2 id=__codelineno-153-2 name=__codelineno-153-2></a>/mnt/extsd/u.yuv
<a href=#__codelineno-153-3 id=__codelineno-153-3 name=__codelineno-153-3></a>/mnt/extsd/v.yuv
<a href=#__codelineno-153-4 id=__codelineno-153-4 name=__codelineno-153-4></a>/mnt/extsd/yuv.yuv
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-154-1 id=__codelineno-154-1 name=__codelineno-154-1></a>src_file: 指定原始视频文件的路径。
<a href=#__codelineno-154-2 id=__codelineno-154-2 name=__codelineno-154-2></a>src_size: 指定原始视频文件的视频大小，如1080p。
<a href=#__codelineno-154-3 id=__codelineno-154-3 name=__codelineno-154-3></a>seek_position: 指定原始视频文件的开始解析位置，单位: ms。
<a href=#__codelineno-154-4 id=__codelineno-154-4 name=__codelineno-154-4></a>y_dst_file: 视频数据帧解码出来y数据分量。
<a href=#__codelineno-154-5 id=__codelineno-154-5 name=__codelineno-154-5></a>u_dst_file: 视频数据帧解码出来u数据分量。
<a href=#__codelineno-154-6 id=__codelineno-154-6 name=__codelineno-154-6></a>v_dst_file: 视频数据帧解码出来v数据分量。
<a href=#__codelineno-154-7 id=__codelineno-154-7 name=__codelineno-154-7></a>yuv_dst_file: 视频数据帧解码出来对应的yuv数据文件。
<a href=#__codelineno-154-8 id=__codelineno-154-8 name=__codelineno-154-8></a>test_duration: 测试时间，单位: s。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-155-1 id=__codelineno-155-1 name=__codelineno-155-1></a># cd /mnt/extsd/
<a href=#__codelineno-155-2 id=__codelineno-155-2 name=__codelineno-155-2></a># ./sample_demux2vdec -path ./sample_demux2vdec.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-156-1 id=__codelineno-156-1 name=__codelineno-156-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-157-1 id=__codelineno-157-1 name=__codelineno-157-1></a>测试完文件test.mp4，可以自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-158-1 id=__codelineno-158-1 name=__codelineno-158-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-158-2 id=__codelineno-158-2 name=__codelineno-158-2></a>2. 使用YUView 软件查看生成的YUV文件正常。
</code></pre></div> #### 8.1.19 sample_demux2vdec_saveFrame 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-159-1 id=__codelineno-159-1 name=__codelineno-159-1></a>该sample演示从原始视频文件（如：264.mp4）中分离出视频数据帧并解码生成yuv文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-160-1 id=__codelineno-160-1 name=__codelineno-160-1></a>mpp_demuxer
<a href=#__codelineno-160-2 id=__codelineno-160-2 name=__codelineno-160-2></a>mpp_vdec
</code></pre></div> 测试通路： ![image-20221120173657904](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173657904.png) <center>图 8-19: MPP_sample 测试通路-sample_demux2vdec_saveFrame</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-161-1 id=__codelineno-161-1 name=__codelineno-161-1></a>/mnt/extsd/test.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-162-1 id=__codelineno-162-1 name=__codelineno-162-1></a>/mnt/extsd/sample_demux2vdec_saveFrame_Files/frame[1920x1088][00].nv21
<a href=#__codelineno-162-2 id=__codelineno-162-2 name=__codelineno-162-2></a>/mnt/extsd/sample_demux2vdec_saveFrame_Files/frame[1920x1088][01].nv21
<a href=#__codelineno-162-3 id=__codelineno-162-3 name=__codelineno-162-3></a>/mnt/extsd/sample_demux2vdec_saveFrame_Files/frame[1920x1088][02].nv21
<a href=#__codelineno-162-4 id=__codelineno-162-4 name=__codelineno-162-4></a>/mnt/extsd/sample_demux2vdec_saveFrame_Files/frame[1920x1088][03].nv21
<a href=#__codelineno-162-5 id=__codelineno-162-5 name=__codelineno-162-5></a>/mnt/extsd/sample_demux2vdec_saveFrame_Files/frame[1920x1088][04].nv21
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-163-1 id=__codelineno-163-1 name=__codelineno-163-1></a>src_file: 指定原始视频文件的路径。
<a href=#__codelineno-163-2 id=__codelineno-163-2 name=__codelineno-163-2></a>seek_position: 指定原始视频文件的开始解析位置，单位: ms。
<a href=#__codelineno-163-3 id=__codelineno-163-3 name=__codelineno-163-3></a>save_num: 保存视频帧的数量。
<a href=#__codelineno-163-4 id=__codelineno-163-4 name=__codelineno-163-4></a>dst_dir: 保存视频帧的目录。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-164-1 id=__codelineno-164-1 name=__codelineno-164-1></a># cd /mnt/extsd/
<a href=#__codelineno-164-2 id=__codelineno-164-2 name=__codelineno-164-2></a># ./sample_demux2vdec_saveFrame -path ./sample_demux2vdec_saveFrame.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-165-1 id=__codelineno-165-1 name=__codelineno-165-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-166-1 id=__codelineno-166-1 name=__codelineno-166-1></a>测试完文件test.mp4，可以自动退出测试。测试时间会比较长，可以按“ctrl + c” 退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-167-1 id=__codelineno-167-1 name=__codelineno-167-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-167-2 id=__codelineno-167-2 name=__codelineno-167-2></a>2. 使用YUView 软件查看生成的YUV文件正常。
</code></pre></div> #### 8.1.20 sample_demux2vdec2vo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-168-1 id=__codelineno-168-1 name=__codelineno-168-1></a>该sample演示解码视频文件（如：xxx.mp4）并从LCD上显示出来。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-169-1 id=__codelineno-169-1 name=__codelineno-169-1></a>mpp_demuxer
<a href=#__codelineno-169-2 id=__codelineno-169-2 name=__codelineno-169-2></a>mpp_vdec
<a href=#__codelineno-169-3 id=__codelineno-169-3 name=__codelineno-169-3></a>mpp_hw_display
<a href=#__codelineno-169-4 id=__codelineno-169-4 name=__codelineno-169-4></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120173714067](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173714067.png) <center>图 8-20: MPP_sample 测试通路-sample_demux2vdec2vo</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-170-1 id=__codelineno-170-1 name=__codelineno-170-1></a>/mnt/extsd/test.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-171-1 id=__codelineno-171-1 name=__codelineno-171-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-172-1 id=__codelineno-172-1 name=__codelineno-172-1></a>src_file: 指定原始视频文件的路径。
<a href=#__codelineno-172-2 id=__codelineno-172-2 name=__codelineno-172-2></a>seek_position: 指定原始视频文件的开始解析位置，单位: ms。
<a href=#__codelineno-172-3 id=__codelineno-172-3 name=__codelineno-172-3></a>test_duration: 测试时间，单位: s。
<a href=#__codelineno-172-4 id=__codelineno-172-4 name=__codelineno-172-4></a>display_x: 显示区域的x坐标。
<a href=#__codelineno-172-5 id=__codelineno-172-5 name=__codelineno-172-5></a>display_y: 显示区域的y坐标。
<a href=#__codelineno-172-6 id=__codelineno-172-6 name=__codelineno-172-6></a>display_width: 显示区域的宽度。
<a href=#__codelineno-172-7 id=__codelineno-172-7 name=__codelineno-172-7></a>display_height: 显示区域的高度。
<a href=#__codelineno-172-8 id=__codelineno-172-8 name=__codelineno-172-8></a>ve_freq: 指定VE的频率，默认0，表示300MHz，单位: MHz。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-173-1 id=__codelineno-173-1 name=__codelineno-173-1></a># cd /mnt/extsd/
<a href=#__codelineno-173-2 id=__codelineno-173-2 name=__codelineno-173-2></a># ./sample_demux2vdec2vo -path ./sample_demux2vdec2vo.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-174-1 id=__codelineno-174-1 name=__codelineno-174-1></a># sample_demux2vdec2vo -path ./mnt/E/sample_demux2vdec2vo.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-175-1 id=__codelineno-175-1 name=__codelineno-175-1></a>测试完文件test.mp4，可以自动退出测试。可以按“ctrl + c” 退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-176-1 id=__codelineno-176-1 name=__codelineno-176-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-176-2 id=__codelineno-176-2 name=__codelineno-176-2></a>2. LCD 显示视频播放正常。
</code></pre></div> #### 8.1.21 sample_vencQpMap 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-177-1 id=__codelineno-177-1 name=__codelineno-177-1></a>演示调用VENC MPI 接口，测试视频编码QpMap模式。
<a href=#__codelineno-177-2 id=__codelineno-177-2 name=__codelineno-177-2></a>从yuv原始数据文件xxx.yuv中读取视频帧，编码，将取得的编码往输出文件里面直接写，生成裸码流视频文件。开启QpMap
<a href=#__codelineno-177-3 id=__codelineno-177-3 name=__codelineno-177-3></a>模式下，在编码完一帧后到编码下一帧前，获取上一帧（刚已编码完成）的编码统计信息，用户需要自己处理这个信
<a href=#__codelineno-177-4 id=__codelineno-177-4 name=__codelineno-177-4></a>息，然后设定下一帧（即将送去编码）的编码方式（QP、skip和en等）。如果是H264或H265编码sample会自动在生
<a href=#__codelineno-177-5 id=__codelineno-177-5 name=__codelineno-177-5></a>成文件的开始加上spspps信息，其他格式则不加。QpMap模式只有H264和H265两种编码格式支持。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-178-1 id=__codelineno-178-1 name=__codelineno-178-1></a>mpp_venc
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-179-1 id=__codelineno-179-1 name=__codelineno-179-1></a>/mnt/extsd/test.yuv
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-180-1 id=__codelineno-180-1 name=__codelineno-180-1></a>/mnt/extsd/test.raw
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-181-1 id=__codelineno-181-1 name=__codelineno-181-1></a>test_duration: 指定测试时间。
<a href=#__codelineno-181-2 id=__codelineno-181-2 name=__codelineno-181-2></a>src_file: 指定原始yuv文件的路径。
<a href=#__codelineno-181-3 id=__codelineno-181-3 name=__codelineno-181-3></a>src_width: 指定原始视频文件的宽度。
<a href=#__codelineno-181-4 id=__codelineno-181-4 name=__codelineno-181-4></a>src_height: 指定原始视频文件的高度。
<a href=#__codelineno-181-5 id=__codelineno-181-5 name=__codelineno-181-5></a>src_pixfmt: 指定原始视频图像的像素格式。
<a href=#__codelineno-181-6 id=__codelineno-181-6 name=__codelineno-181-6></a>color_space: 指定颜色空间（jpeg, rec709, rec709_part_range）。
<a href=#__codelineno-181-7 id=__codelineno-181-7 name=__codelineno-181-7></a>dst_file: 指定生成的裸码流视频文件路径。
<a href=#__codelineno-181-8 id=__codelineno-181-8 name=__codelineno-181-8></a>dest_width: 指定视频编码输出图像的宽度。
<a href=#__codelineno-181-9 id=__codelineno-181-9 name=__codelineno-181-9></a>dest_height: 指定视频编码输出图像的高度。
<a href=#__codelineno-181-10 id=__codelineno-181-10 name=__codelineno-181-10></a>dest_pixfmt: 指定视频编码输出图像的像素格式。
<a href=#__codelineno-181-11 id=__codelineno-181-11 name=__codelineno-181-11></a>encoder: 指定视频编码的类型。
<a href=#__codelineno-181-12 id=__codelineno-181-12 name=__codelineno-181-12></a>profile: 指定视频编码质量等级。
<a href=#__codelineno-181-13 id=__codelineno-181-13 name=__codelineno-181-13></a>framerate: 指定视频编码的帧率。
<a href=#__codelineno-181-14 id=__codelineno-181-14 name=__codelineno-181-14></a>bitrate: 指定视频编码的码率。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-182-1 id=__codelineno-182-1 name=__codelineno-182-1></a># cd /mnt/extsd/
<a href=#__codelineno-182-2 id=__codelineno-182-2 name=__codelineno-182-2></a># ./sample_vencQpMap -path ./sample_vencQpMap.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-183-1 id=__codelineno-183-1 name=__codelineno-183-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-184-1 id=__codelineno-184-1 name=__codelineno-184-1></a>达到设定的测试时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-185-1 id=__codelineno-185-1 name=__codelineno-185-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-185-2 id=__codelineno-185-2 name=__codelineno-185-2></a>2. 使用VLC 软件播放生成的raw文件正常。
</code></pre></div> #### 8.1.22 sample_OnlineVenc 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-186-1 id=__codelineno-186-1 name=__codelineno-186-1></a>该sample演示IPC在线编码使用场景：主码流在线编码、子码流离线编码。
<a href=#__codelineno-186-2 id=__codelineno-186-2 name=__codelineno-186-2></a>针对主码流和子码流分别创建mpi_vi和mpi_venc，将它们绑定，再分别启动。mpi_vi采集图像，直接传输给mpi_venc进
<a href=#__codelineno-186-3 id=__codelineno-186-3 name=__codelineno-186-3></a>行编码。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-187-1 id=__codelineno-187-1 name=__codelineno-187-1></a>mpp_venc
</code></pre></div> 测试通路： ![image-20221120173754294](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173754294.png) <center>图 8-21: MPP_sample 测试通路-sample_OnlineVenc</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-188-1 id=__codelineno-188-1 name=__codelineno-188-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-189-1 id=__codelineno-189-1 name=__codelineno-189-1></a>/mnt/extsd/mainStream.raw
<a href=#__codelineno-189-2 id=__codelineno-189-2 name=__codelineno-189-2></a>/mnt/extsd/subStream.raw
<a href=#__codelineno-189-3 id=__codelineno-189-3 name=__codelineno-189-3></a>/mnt/extsd/lapseStream.raw
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-190-1 id=__codelineno-190-1 name=__codelineno-190-1></a>主码流
<a href=#__codelineno-190-2 id=__codelineno-190-2 name=__codelineno-190-2></a>main_vipp: 指定vipp设备号，默认0，表示vipp0。
<a href=#__codelineno-190-3 id=__codelineno-190-3 name=__codelineno-190-3></a>main_src_width: 指定原始视频的宽度。
<a href=#__codelineno-190-4 id=__codelineno-190-4 name=__codelineno-190-4></a>main_src_height: 指定原始视频的高度。
<a href=#__codelineno-190-5 id=__codelineno-190-5 name=__codelineno-190-5></a>main_pixel_format: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型
<a href=#__codelineno-190-6 id=__codelineno-190-6 name=__codelineno-190-6></a>: aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-190-7 id=__codelineno-190-7 name=__codelineno-190-7></a>main_wdr_enable: 指定是否开启WDR，默认0，表示不开WDR。
<a href=#__codelineno-190-8 id=__codelineno-190-8 name=__codelineno-190-8></a>main_vi_buf_num: 指定VI的buffer个数，仅对离线编码有效。
<a href=#__codelineno-190-9 id=__codelineno-190-9 name=__codelineno-190-9></a>main_src_frame_rate: 指定vipp采集的帧率，单位: fps。
<a href=#__codelineno-190-10 id=__codelineno-190-10 name=__codelineno-190-10></a>main_viChn: 指定vi虚通道号，默认0，表示vi ch0。配置为-1表示不测试主码流。
<a href=#__codelineno-190-11 id=__codelineno-190-11 name=__codelineno-190-11></a>main_venc_chn: 指定ve通道号，默认0，表示ve ch0。配置为-1表示不测试主码流。
<a href=#__codelineno-190-12 id=__codelineno-190-12 name=__codelineno-190-12></a>main_encode_type: 指定编码格式（H.264、H.265）。
<a href=#__codelineno-190-13 id=__codelineno-190-13 name=__codelineno-190-13></a>main_encode_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-190-14 id=__codelineno-190-14 name=__codelineno-190-14></a>main_encode_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-190-15 id=__codelineno-190-15 name=__codelineno-190-15></a>main_encode_frame_rate: 指定编码视频的帧率，单位: fps。
<a href=#__codelineno-190-16 id=__codelineno-190-16 name=__codelineno-190-16></a>main_encode_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-190-17 id=__codelineno-190-17 name=__codelineno-190-17></a>main_file_path: 指定编码裸流文件的存放路径。若不指定，则不会保存到文件。
<a href=#__codelineno-190-18 id=__codelineno-190-18 name=__codelineno-190-18></a>main_online_en: 指定是否开启在线编码，默认0，表示不开启在线编码，即当前为离线编码。
<a href=#__codelineno-190-19 id=__codelineno-190-19 name=__codelineno-190-19></a>main_online_share_buf_num: 指定在线编码的共享buffer个数（1或2），默认2，表示2个buffer。注意该配置仅当
<a href=#__codelineno-190-20 id=__codelineno-190-20 name=__codelineno-190-20></a>配置在线模式时才生效。
<a href=#__codelineno-190-21 id=__codelineno-190-21 name=__codelineno-190-21></a>main_encpp_disable: 指定是否禁用encpp新通路，默认0，表示不禁用。
<a href=#__codelineno-190-22 id=__codelineno-190-22 name=__codelineno-190-22></a>子码流
<a href=#__codelineno-190-23 id=__codelineno-190-23 name=__codelineno-190-23></a>sub_vipp: 指定vipp设备号，默认1，表示vipp1（对于V853，表示vipp4）。
<a href=#__codelineno-190-24 id=__codelineno-190-24 name=__codelineno-190-24></a>sub_vipp_crop_en: 指定是否开启vipp crop功能。默认1，表示开启。
<a href=#__codelineno-190-25 id=__codelineno-190-25 name=__codelineno-190-25></a>sub_vipp_crop_rect_x: 指定vipp crop的x坐标。
<a href=#__codelineno-190-26 id=__codelineno-190-26 name=__codelineno-190-26></a>sub_vipp_crop_rect_y: 指定vipp crop的y坐标。
<a href=#__codelineno-190-27 id=__codelineno-190-27 name=__codelineno-190-27></a>sub_vipp_crop_rect_w: 指定vipp crop的宽度。
<a href=#__codelineno-190-28 id=__codelineno-190-28 name=__codelineno-190-28></a>sub_vipp_crop_rect_h: 指定vipp crop的高度。
<a href=#__codelineno-190-29 id=__codelineno-190-29 name=__codelineno-190-29></a>sub_src_width: 指定原始视频的宽度。
<a href=#__codelineno-190-30 id=__codelineno-190-30 name=__codelineno-190-30></a>sub_src_height: 指定原始视频的高度。
<a href=#__codelineno-190-31 id=__codelineno-190-31 name=__codelineno-190-31></a>sub_pixel_format: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型:
<a href=#__codelineno-190-32 id=__codelineno-190-32 name=__codelineno-190-32></a>aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-190-33 id=__codelineno-190-33 name=__codelineno-190-33></a>sub_wdr_enable: 指定是否开启WDR，默认0，表示不开WDR。
<a href=#__codelineno-190-34 id=__codelineno-190-34 name=__codelineno-190-34></a>sub_vi_buf_num: 指定VI的buffer个数，仅对离线编码有效。
<a href=#__codelineno-190-35 id=__codelineno-190-35 name=__codelineno-190-35></a>sub_src_frame_rate: 指定vipp采集的帧率，单位: fps。
<a href=#__codelineno-190-36 id=__codelineno-190-36 name=__codelineno-190-36></a>sub_viChn: 指定vi虚通道号，默认0，表示vi ch0。配置为-1表示不测试子码流。
<a href=#__codelineno-190-37 id=__codelineno-190-37 name=__codelineno-190-37></a>sub_venc_chn: 指定ve通道号，默认1，表示ve ch1。配置为-1表示不测试子码流。
<a href=#__codelineno-190-38 id=__codelineno-190-38 name=__codelineno-190-38></a>sub_encode_type: 指定编码格式（H.264、H.265）。
<a href=#__codelineno-190-39 id=__codelineno-190-39 name=__codelineno-190-39></a>sub_encode_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-190-40 id=__codelineno-190-40 name=__codelineno-190-40></a>sub_encode_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-190-41 id=__codelineno-190-41 name=__codelineno-190-41></a>sub_encode_frame_rate: 指定编码视频的帧率，单位: fps。
<a href=#__codelineno-190-42 id=__codelineno-190-42 name=__codelineno-190-42></a>sub_encode_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-190-43 id=__codelineno-190-43 name=__codelineno-190-43></a>sub_file_path: 指定编码裸流文件的存放路径。若不指定，则不会保存到文件。
<a href=#__codelineno-190-44 id=__codelineno-190-44 name=__codelineno-190-44></a>sub_encpp_disable: 指定是否禁用encpp新通路，默认0，表示不禁用。
<a href=#__codelineno-190-45 id=__codelineno-190-45 name=__codelineno-190-45></a>缩时录影
<a href=#__codelineno-190-46 id=__codelineno-190-46 name=__codelineno-190-46></a>lapse_viChn: 指定vi虚通道号，默认1，表示vi ch1。配置为-1表示不测试子码流。
<a href=#__codelineno-190-47 id=__codelineno-190-47 name=__codelineno-190-47></a>lapse_venc_chn: 指定ve通道号，默认2，表示ve ch2。配置为-1表示不测试子码流。
<a href=#__codelineno-190-48 id=__codelineno-190-48 name=__codelineno-190-48></a>lapse_encode_type: 指定编码格式（H.264、H.265）。
<a href=#__codelineno-190-49 id=__codelineno-190-49 name=__codelineno-190-49></a>lapse_encode_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-190-50 id=__codelineno-190-50 name=__codelineno-190-50></a>lapse_encode_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-190-51 id=__codelineno-190-51 name=__codelineno-190-51></a>lapse_encode_frame_rate: 指定编码视频的帧率，单位: fps。
<a href=#__codelineno-190-52 id=__codelineno-190-52 name=__codelineno-190-52></a>lapse_encode_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-190-53 id=__codelineno-190-53 name=__codelineno-190-53></a>lapse_file_path: 指定编码裸流文件的存放路径。若不指定，则不会保存到文件。
<a href=#__codelineno-190-54 id=__codelineno-190-54 name=__codelineno-190-54></a>lapse_time: 指定缩时录影的帧间隔时间，单位: ms。
<a href=#__codelineno-190-55 id=__codelineno-190-55 name=__codelineno-190-55></a>lapse_encpp_disable: 指定是否禁用encpp新通路，默认0，表示不禁用。
<a href=#__codelineno-190-56 id=__codelineno-190-56 name=__codelineno-190-56></a>ISP2VE联动机制参数配置
<a href=#__codelineno-190-57 id=__codelineno-190-57 name=__codelineno-190-57></a>isp_ve_linkage_enable: 指定是否开启ISP2VE联动机制。默认0，表示不开启。
<a href=#__codelineno-190-58 id=__codelineno-190-58 name=__codelineno-190-58></a>isp_ve_linkage_test_stream: 指定ISP2VE联动机制应用到哪一路，默认0，表示主码流。（0:main stream, 1:
<a href=#__codelineno-190-59 id=__codelineno-190-59 name=__codelineno-190-59></a>sub stream, 2:lapse stream）
<a href=#__codelineno-190-60 id=__codelineno-190-60 name=__codelineno-190-60></a>ve2isp_param_update_interval: 指定ISP2VE联动参数更新的时间间隔，单位: ms。
<a href=#__codelineno-190-61 id=__codelineno-190-61 name=__codelineno-190-61></a>wb_yuv_enable: 指定是否开启存储回写yuv功能。默认0，表示不开启。
<a href=#__codelineno-190-62 id=__codelineno-190-62 name=__codelineno-190-62></a>wb_yuv_buf_num: 指定存储回写yuv的buffer个数，单位: 一帧图像的大小。
<a href=#__codelineno-190-63 id=__codelineno-190-63 name=__codelineno-190-63></a>wb_yuv_start_index: 指定存储回写yuv从第几帧开始保存。
<a href=#__codelineno-190-64 id=__codelineno-190-64 name=__codelineno-190-64></a>wb_yuv_total_cnt: 指定存储回写yuv一共保存多少帧。
<a href=#__codelineno-190-65 id=__codelineno-190-65 name=__codelineno-190-65></a>wb_yuv_stream_channel: 指定存储回写yuv的编码通道号，默认0，表示主码流。（0:main stream, 1:sub
<a href=#__codelineno-190-66 id=__codelineno-190-66 name=__codelineno-190-66></a>stream, 2:sub lapse stream）
<a href=#__codelineno-190-67 id=__codelineno-190-67 name=__codelineno-190-67></a>wb_yuv_file_path: 指定存储回写yuv的文件路径。
<a href=#__codelineno-190-68 id=__codelineno-190-68 name=__codelineno-190-68></a>test_duration: 测试时间，单位: s。0表示无限时长。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-191-1 id=__codelineno-191-1 name=__codelineno-191-1></a># cd /mnt/extsd/
<a href=#__codelineno-191-2 id=__codelineno-191-2 name=__codelineno-191-2></a># ./sample_OnlineVenc -path ./sample_OnlineVenc.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-192-1 id=__codelineno-192-1 name=__codelineno-192-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-193-1 id=__codelineno-193-1 name=__codelineno-193-1></a>达到设定的测试时间后，自动退出测试
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-194-1 id=__codelineno-194-1 name=__codelineno-194-1></a>1.测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-194-2 id=__codelineno-194-2 name=__codelineno-194-2></a>2.使用PC软件VLC播放测试生成的视频文件正常。
<a href=#__codelineno-194-3 id=__codelineno-194-3 name=__codelineno-194-3></a>3.使用MediaInfo软件检查编码参数符合预期。
<a href=#__codelineno-194-4 id=__codelineno-194-4 name=__codelineno-194-4></a>4.观察实际帧率打印，主码流和子码流均符合预期。
</code></pre></div> #### 8.1.23 sample_vencGdcZoom 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-195-1 id=__codelineno-195-1 name=__codelineno-195-1></a>演示编码GDC数字变焦功能。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-196-1 id=__codelineno-196-1 name=__codelineno-196-1></a>mpp_venc
</code></pre></div> 测试通路： ![image-20221120173816522](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173816522.png) <center>图 8-22: MPP_sample 测试通路-sample_vencGdcZoom</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-197-1 id=__codelineno-197-1 name=__codelineno-197-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-198-1 id=__codelineno-198-1 name=__codelineno-198-1></a>/mnt/extsd/test.raw
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-199-1 id=__codelineno-199-1 name=__codelineno-199-1></a>online_en: 指定是否开启在线编码，默认0，表示不开启在线编码，即当前为离线编码。
<a href=#__codelineno-199-2 id=__codelineno-199-2 name=__codelineno-199-2></a>online_share_buf_num: 指定在线编码的共享buffer个数（1或2），默认2，表示2个buffer。注意该配置仅当配置在
<a href=#__codelineno-199-3 id=__codelineno-199-3 name=__codelineno-199-3></a>线模式时才生效。
<a href=#__codelineno-199-4 id=__codelineno-199-4 name=__codelineno-199-4></a>vipp_id: 指定vipp设备号，默认0，表示vipp0。
<a href=#__codelineno-199-5 id=__codelineno-199-5 name=__codelineno-199-5></a>wdr_en: 指定是否开启WDR，默认0，表示不开WDR。
<a href=#__codelineno-199-6 id=__codelineno-199-6 name=__codelineno-199-6></a>drop_frm_num: 指定丢帧个数，对于离线编码是vipp丢帧，对于在线编码是ve编码前丢帧。
<a href=#__codelineno-199-7 id=__codelineno-199-7 name=__codelineno-199-7></a>src_width: 指定原始视频的宽度。
<a href=#__codelineno-199-8 id=__codelineno-199-8 name=__codelineno-199-8></a>src_height: 指定原始视频的高度。
<a href=#__codelineno-199-9 id=__codelineno-199-9 name=__codelineno-199-9></a>vi_buffer_num: 指定CSI的buffer个数，仅对离线编码有效。
<a href=#__codelineno-199-10 id=__codelineno-199-10 name=__codelineno-199-10></a>saturation_change: 指定饱和度改变的值，默认0，表示不调整。取值范围[-256, 512]。
<a href=#__codelineno-199-11 id=__codelineno-199-11 name=__codelineno-199-11></a>src_pixfmt: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型:
<a href=#__codelineno-199-12 id=__codelineno-199-12 name=__codelineno-199-12></a>aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-199-13 id=__codelineno-199-13 name=__codelineno-199-13></a>color_space: 指定颜色空间（jpeg, rec709, rec709_part_range）。
<a href=#__codelineno-199-14 id=__codelineno-199-14 name=__codelineno-199-14></a>venc_ch_id: 指定编码通道，默认0，表示venc ch0。
<a href=#__codelineno-199-15 id=__codelineno-199-15 name=__codelineno-199-15></a>video_dst_file: 指定编码文件的存放路径。
<a href=#__codelineno-199-16 id=__codelineno-199-16 name=__codelineno-199-16></a>video_framerate: 指定帧率，单位: fps。
<a href=#__codelineno-199-17 id=__codelineno-199-17 name=__codelineno-199-17></a>video_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-199-18 id=__codelineno-199-18 name=__codelineno-199-18></a>video_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-199-19 id=__codelineno-199-19 name=__codelineno-199-19></a>video_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-199-20 id=__codelineno-199-20 name=__codelineno-199-20></a>video_encoder: 指定编码格式（H.264、H.265、MJPEG）。
<a href=#__codelineno-199-21 id=__codelineno-199-21 name=__codelineno-199-21></a>profile: 指定编码质量，对于H264，建议配置High（2），对于H265，建议配置Main（0）。
<a href=#__codelineno-199-22 id=__codelineno-199-22 name=__codelineno-199-22></a>ve_freq: 指定VE的频率，默认0，表示300MHz，单位: MHz。
<a href=#__codelineno-199-23 id=__codelineno-199-23 name=__codelineno-199-23></a>product_mode: 指定产品类型（0:Normal, 1:IPC）。
<a href=#__codelineno-199-24 id=__codelineno-199-24 name=__codelineno-199-24></a>sensor_type: 指定sensor类型（0:DisWdr, 1:EnWdr）。
<a href=#__codelineno-199-25 id=__codelineno-199-25 name=__codelineno-199-25></a>key_frame_interval: 指定I帧间隔。
<a href=#__codelineno-199-26 id=__codelineno-199-26 name=__codelineno-199-26></a>enable_gdc: 指定是否开启GDC功能，默认1，表示开启。
<a href=#__codelineno-199-27 id=__codelineno-199-27 name=__codelineno-199-27></a>enable_gdc_zoom: 指定是否开启GDC zoom功能，默认1，表示开启。
<a href=#__codelineno-199-28 id=__codelineno-199-28 name=__codelineno-199-28></a>rc_mode: 指定码率控制模式（0:CBR, 1:VBR, 2:FIXQP, 3:QPMAP）。
<a href=#__codelineno-199-29 id=__codelineno-199-29 name=__codelineno-199-29></a>VBR、CBR模式，编码参数
<a href=#__codelineno-199-30 id=__codelineno-199-30 name=__codelineno-199-30></a>init_qp: 指定初始QP值，取值范围(0, 51)。
<a href=#__codelineno-199-31 id=__codelineno-199-31 name=__codelineno-199-31></a>min_i_qp: 指定I帧最小QP值，取值范围(0, 51)。FIXQP模式时，取其值为i_qp。
<a href=#__codelineno-199-32 id=__codelineno-199-32 name=__codelineno-199-32></a>max_i_qp: 指定I帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-199-33 id=__codelineno-199-33 name=__codelineno-199-33></a>min_p_qp: 指定P帧最小QP值，取值范围(0, 51)。FIXQP模式时，取其值为p_qp。
<a href=#__codelineno-199-34 id=__codelineno-199-34 name=__codelineno-199-34></a>max_p_qp: 指定P帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-199-35 id=__codelineno-199-35 name=__codelineno-199-35></a>mb_qp_limit_en: 指定是否开启mb qp限制，默认0，表示不开启。
<a href=#__codelineno-199-36 id=__codelineno-199-36 name=__codelineno-199-36></a>VBR模式，编码参数
<a href=#__codelineno-199-37 id=__codelineno-199-37 name=__codelineno-199-37></a>moving_th：指定mb16x16中MAD的阈值，取值范围[0, 31]。
<a href=#__codelineno-199-38 id=__codelineno-199-38 name=__codelineno-199-38></a>quality: 指定静态P帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-199-39 id=__codelineno-199-39 name=__codelineno-199-39></a>p_bits_coef: 指定移动P帧的位系数，取值范围[1, 50]。
<a href=#__codelineno-199-40 id=__codelineno-199-40 name=__codelineno-199-40></a>i_bits_coef: 指定I帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-199-41 id=__codelineno-199-41 name=__codelineno-199-41></a>gop_mode: 指定GOP模式（0:NormalP, 1:DualP, 2:SmartP）。
<a href=#__codelineno-199-42 id=__codelineno-199-42 name=__codelineno-199-42></a>gop_size: 指定GOP大小，当前只针对H265有效，取值范围[1, 63]。
<a href=#__codelineno-199-43 id=__codelineno-199-43 name=__codelineno-199-43></a>高级跳帧参数
<a href=#__codelineno-199-44 id=__codelineno-199-44 name=__codelineno-199-44></a>AdvancedRef_Base: 设置该值大于0表示开启高级跳帧功能，等于0表示关闭高级跳帧功能。
<a href=#__codelineno-199-45 id=__codelineno-199-45 name=__codelineno-199-45></a>AdvancedRef_Enhance: 设置Enhance为5。
<a href=#__codelineno-199-46 id=__codelineno-199-46 name=__codelineno-199-46></a>AdvancedRef_RefBaseEn: 设置该值为1表示开启参考帧，等于0表示关闭参考帧。
<a href=#__codelineno-199-47 id=__codelineno-199-47 name=__codelineno-199-47></a>enable_fast_enc: 指定是否开启快速编码，默认0，表示不开启。
<a href=#__codelineno-199-48 id=__codelineno-199-48 name=__codelineno-199-48></a>encode_rotate: 指定编码旋转角度（0, 90, 180, 270），顺时针方向。
<a href=#__codelineno-199-49 id=__codelineno-199-49 name=__codelineno-199-49></a>mirror: 指定编码镜像是否开启，默认0，表示不开启。取值范围[0, 1]。
<a href=#__codelineno-199-50 id=__codelineno-199-50 name=__codelineno-199-50></a>video_duration: 指定生成一个视频文件的最大持续时间（如：每个视频文件长度一分钟），单位: s。
<a href=#__codelineno-199-51 id=__codelineno-199-51 name=__codelineno-199-51></a>test_duration: 指定测试时间，单位: s。
<a href=#__codelineno-199-52 id=__codelineno-199-52 name=__codelineno-199-52></a>color2grey: 指定是否开启彩转灰功能，默认"no"，表示不开启。取值范围[“no”, "yes"]。
<a href=#__codelineno-199-53 id=__codelineno-199-53 name=__codelineno-199-53></a>2D降噪参数配置
<a href=#__codelineno-199-54 id=__codelineno-199-54 name=__codelineno-199-54></a>2dnr_en: 编码器2DNR使能，默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-199-55 id=__codelineno-199-55 name=__codelineno-199-55></a>2dnr_strength_y: 亮度降噪强度系数。该值越大，滤波强度越高。默认127，取值范围[0, 255]。
<a href=#__codelineno-199-56 id=__codelineno-199-56 name=__codelineno-199-56></a>2dnr_strength_c: 色度降噪强度系数。该值越大，滤波强度越高。默认127，取值范围[0, 255]。
<a href=#__codelineno-199-57 id=__codelineno-199-57 name=__codelineno-199-57></a>2dnr_threshold_y: 亮度邻域像素降噪开关阈值。该值越大，越容易触发2d滤波。默认7，取值范围[0, 15]。
<a href=#__codelineno-199-58 id=__codelineno-199-58 name=__codelineno-199-58></a>2dnr_threshold_c: 色度邻域像素降噪开关阈值。该值越大，越容易触发2d滤波。默认7，取值范围[0, 15]。
<a href=#__codelineno-199-59 id=__codelineno-199-59 name=__codelineno-199-59></a>3D降噪参数配置
<a href=#__codelineno-199-60 id=__codelineno-199-60 name=__codelineno-199-60></a>3dnr_en: 编码器3DNR使能，默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-199-61 id=__codelineno-199-61 name=__codelineno-199-61></a>3dnr_pix_level_en: 3d滤波权重系数自适应修正开关。默认0，表示不开启。取值范围[0, 1]。
<a href=#__codelineno-199-62 id=__codelineno-199-62 name=__codelineno-199-62></a>3dnr_smooth_en: 像素级3x3平滑滤波使能。默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-199-63 id=__codelineno-199-63 name=__codelineno-199-63></a>3dnr_pix_diff_th: 仅当3d_adjust_pix_level_enable为1时生效，自适应修正幅度阈值。该值越大，滤波强度越
<a href=#__codelineno-199-64 id=__codelineno-199-64 name=__codelineno-199-64></a>高。默认6，取值范围[0, 31]。
<a href=#__codelineno-199-65 id=__codelineno-199-65 name=__codelineno-199-65></a>3dnr_max_mv_th: 源图像素块运动矢量最大阈值，单个像素块仅当其水平和垂直MV皆小于该阈值，才会进行3d滤波。该值
<a href=#__codelineno-199-66 id=__codelineno-199-66 name=__codelineno-199-66></a>越大，越容易触发3d滤波。默认2，取值范围[0, 63]。
<a href=#__codelineno-199-67 id=__codelineno-199-67 name=__codelineno-199-67></a>3dnr_max_mad_th: 源图与参考图之间像素块的MAD最大阈值，单个像素块仅当其MAD值小于该阈值，才会进行3d滤波。该
<a href=#__codelineno-199-68 id=__codelineno-199-68 name=__codelineno-199-68></a>值越大，越容易触发3d滤波。默认11，取值范围[0, 63]。
<a href=#__codelineno-199-69 id=__codelineno-199-69 name=__codelineno-199-69></a>3dnr_min_coef: 3d滤波权重系数的最小阈值。该值越小，自适应3d滤波的强度上限越高。默认14，取值范围[0, 3
<a href=#__codelineno-199-70 id=__codelineno-199-70 name=__codelineno-199-70></a>dnr_max_coef]。
<a href=#__codelineno-199-71 id=__codelineno-199-71 name=__codelineno-199-71></a>3dnr_max_coef: 3d滤波权重系数的最大阈值。该值越大，自适应3d滤波的强度下限越低。默认16，取值范围[3
<a href=#__codelineno-199-72 id=__codelineno-199-72 name=__codelineno-199-72></a>dnr_min_coef, 16]。
<a href=#__codelineno-199-73 id=__codelineno-199-73 name=__codelineno-199-73></a>ROI测试参数配置
<a href=#__codelineno-199-74 id=__codelineno-199-74 name=__codelineno-199-74></a>roi_num: 指定ROI的个数，默认0，表示不开启ROI测试。取值范围[0, 8]。
<a href=#__codelineno-199-75 id=__codelineno-199-75 name=__codelineno-199-75></a>roi_qp: 指定ROI区域的QP值，默认50，表示最差质量。取值范围(0, 51)。
<a href=#__codelineno-199-76 id=__codelineno-199-76 name=__codelineno-199-76></a>roi_BgFrameRateEnable: 指定是否开启非ROI区域低帧率编码，默认0，表示不开启。
<a href=#__codelineno-199-77 id=__codelineno-199-77 name=__codelineno-199-77></a>roi_BgFrameRateAttenuation: 指定非ROI区域的帧率衰减比例，默认3，表示非ROI区域的帧率是正常帧率的1/3。
<a href=#__codelineno-199-78 id=__codelineno-199-78 name=__codelineno-199-78></a>IntraRefresh_BlockNum: 指定P帧帧内刷新的block个数，默认0，表示不开启P帧帧内刷新功能。
<a href=#__codelineno-199-79 id=__codelineno-199-79 name=__codelineno-199-79></a>orl_num: 指定ORL(Object Rectangle Label)的个数，取值范围[0,16]。
<a href=#__codelineno-199-80 id=__codelineno-199-80 name=__codelineno-199-80></a>配置vbv buffer大小和vbv buffer阈值大小
<a href=#__codelineno-199-81 id=__codelineno-199-81 name=__codelineno-199-81></a>vbvBufferSize: 指定vbv buffer大小，默认0，表示由mpp middleware自行计算并设置给编码器，大于0，表示由
<a href=#__codelineno-199-82 id=__codelineno-199-82 name=__codelineno-199-82></a>app设置。
<a href=#__codelineno-199-83 id=__codelineno-199-83 name=__codelineno-199-83></a>vbvThreshSize: 指定vbv buffer阈值大小，默认0，表示由mpp middleware自行计算并设置给编码器，大于0，表示
<a href=#__codelineno-199-84 id=__codelineno-199-84 name=__codelineno-199-84></a>由app设置。
<a href=#__codelineno-199-85 id=__codelineno-199-85 name=__codelineno-199-85></a>裁剪编码参数设置
<a href=#__codelineno-199-86 id=__codelineno-199-86 name=__codelineno-199-86></a>crop_en: 指定是否开启裁剪编码，默认0，表示不开启。
<a href=#__codelineno-199-87 id=__codelineno-199-87 name=__codelineno-199-87></a>crop_rect_x: 指定裁剪区域的x坐标。
<a href=#__codelineno-199-88 id=__codelineno-199-88 name=__codelineno-199-88></a>crop_rect_y: 指定裁剪区域的y坐标。
<a href=#__codelineno-199-89 id=__codelineno-199-89 name=__codelineno-199-89></a>crop_rect_w: 指定裁剪区域的宽度。
<a href=#__codelineno-199-90 id=__codelineno-199-90 name=__codelineno-199-90></a>crop_rect_h: 指定裁剪区域的高度。
<a href=#__codelineno-199-91 id=__codelineno-199-91 name=__codelineno-199-91></a>vui_timing_info_present_flag: 指定是否添加VUI信息，默认0，表示不添加。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-200-1 id=__codelineno-200-1 name=__codelineno-200-1></a># cd /mnt/extsd/
<a href=#__codelineno-200-2 id=__codelineno-200-2 name=__codelineno-200-2></a># ./sample_vencGdcZoom -path ./sample_vencGdcZoom.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-201-1 id=__codelineno-201-1 name=__codelineno-201-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-202-1 id=__codelineno-202-1 name=__codelineno-202-1></a>达到设定的测试时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-203-1 id=__codelineno-203-1 name=__codelineno-203-1></a>1.测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-203-2 id=__codelineno-203-2 name=__codelineno-203-2></a>2.使用PC软件VLC播放测试生成的视频文件正常。注意观察视频是否有缩放效果。
<a href=#__codelineno-203-3 id=__codelineno-203-3 name=__codelineno-203-3></a>3.使用MediaInfo软件检查编码参数符合预期。
</code></pre></div> #### 8.1.24 sample_takePicture 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-204-1 id=__codelineno-204-1 name=__codelineno-204-1></a>演示拍照功能。支持通过配置开启单拍和连拍测试。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-205-1 id=__codelineno-205-1 name=__codelineno-205-1></a>mpp_vi
<a href=#__codelineno-205-2 id=__codelineno-205-2 name=__codelineno-205-2></a>mpp_venc
</code></pre></div> 测试通路： ![image-20221120173840435](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173840435.png) <center>图 8-23: MPP_sample 测试通路-sample_takePicture</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-206-1 id=__codelineno-206-1 name=__codelineno-206-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-207-1 id=__codelineno-207-1 name=__codelineno-207-1></a>照片文件，单拍：图片编号pic[n][0].jpg，连拍：图片编号pic[0][n].jpg
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-208-1 id=__codelineno-208-1 name=__codelineno-208-1></a>dev_num: 指定VI Dev设备节点。
<a href=#__codelineno-208-2 id=__codelineno-208-2 name=__codelineno-208-2></a>src_width: 指定camera采集的图像宽度。
<a href=#__codelineno-208-3 id=__codelineno-208-3 name=__codelineno-208-3></a>src_height: 指定camera采集的图像高度。
<a href=#__codelineno-208-4 id=__codelineno-208-4 name=__codelineno-208-4></a>frame_rate: 指定camera采集图像的帧率。
<a href=#__codelineno-208-5 id=__codelineno-208-5 name=__codelineno-208-5></a>src_format: 指定camera采集图像像素格式。
<a href=#__codelineno-208-6 id=__codelineno-208-6 name=__codelineno-208-6></a>color_space：指定颜色空间类型。
<a href=#__codelineno-208-7 id=__codelineno-208-7 name=__codelineno-208-7></a>drop_frm_num：指定VIPP丢帧的帧数。
<a href=#__codelineno-208-8 id=__codelineno-208-8 name=__codelineno-208-8></a>take_picture_mode：拍照模式（0：不拍，1：单拍，2：连拍）。
<a href=#__codelineno-208-9 id=__codelineno-208-9 name=__codelineno-208-9></a>take_picture_num：拍照的图片张数。
<a href=#__codelineno-208-10 id=__codelineno-208-10 name=__codelineno-208-10></a>take_picture_interval：拍照时间间隔，单位: ms。
<a href=#__codelineno-208-11 id=__codelineno-208-11 name=__codelineno-208-11></a>jpeg_width: jpeg拍照图片的宽度。
<a href=#__codelineno-208-12 id=__codelineno-208-12 name=__codelineno-208-12></a>jpeg_height: jpeg拍照图片的高度。
<a href=#__codelineno-208-13 id=__codelineno-208-13 name=__codelineno-208-13></a>store_dir: jpeg拍照文件的存储路径（单拍：图片编号pic[n][0]，连拍：图片编号pic[0][n]）。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-209-1 id=__codelineno-209-1 name=__codelineno-209-1></a># cd /mnt/extsd/
<a href=#__codelineno-209-2 id=__codelineno-209-2 name=__codelineno-209-2></a># ./sample_takePicture -path ./sample_takePicture.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-210-1 id=__codelineno-210-1 name=__codelineno-210-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-211-1 id=__codelineno-211-1 name=__codelineno-211-1></a>达到设定的测试时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-212-1 id=__codelineno-212-1 name=__codelineno-212-1></a>1.测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-212-2 id=__codelineno-212-2 name=__codelineno-212-2></a>2.使用PC图片查看工具检查拍照图片显示正常。
<a href=#__codelineno-212-3 id=__codelineno-212-3 name=__codelineno-212-3></a>单拍模式下，拍照后，图片的编号是：pic[0][0]、pic[1][0]、pic[1][0] ... pic[n][0]。
<a href=#__codelineno-212-4 id=__codelineno-212-4 name=__codelineno-212-4></a>3.使用MediaInfo软件检查编码参数符合预期。
<a href=#__codelineno-212-5 id=__codelineno-212-5 name=__codelineno-212-5></a>检查拍照的图片格式和分辨率：
<a href=#__codelineno-212-6 id=__codelineno-212-6 name=__codelineno-212-6></a>格式: JPEG
<a href=#__codelineno-212-7 id=__codelineno-212-7 name=__codelineno-212-7></a>宽度: 1 920 像素
<a href=#__codelineno-212-8 id=__codelineno-212-8 name=__codelineno-212-8></a>高度: 1 080 像素
</code></pre></div> #### 8.1.25 sample_recorder 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-213-1 id=__codelineno-213-1 name=__codelineno-213-1></a>支持最大四路录制编码封装或者预览显示。
<a href=#__codelineno-213-2 id=__codelineno-213-2 name=__codelineno-213-2></a>每路创建一个vipp和虚通道，根据参数的不同与编码器绑定测试录制编码，与VO绑定测试预览显示。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-214-1 id=__codelineno-214-1 name=__codelineno-214-1></a>mpp_vi
<a href=#__codelineno-214-2 id=__codelineno-214-2 name=__codelineno-214-2></a>mpp_venc
<a href=#__codelineno-214-3 id=__codelineno-214-3 name=__codelineno-214-3></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120173856514](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173856514.png) <center>图 8-24: MPP_sample 测试通路-sample_recorder</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-215-1 id=__codelineno-215-1 name=__codelineno-215-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-216-1 id=__codelineno-216-1 name=__codelineno-216-1></a>recorder1_1080p@20.mp4
<a href=#__codelineno-216-2 id=__codelineno-216-2 name=__codelineno-216-2></a>recorder2_1080p@20.mp4
<a href=#__codelineno-216-3 id=__codelineno-216-3 name=__codelineno-216-3></a>recorder3_1080p@20.mp4
<a href=#__codelineno-216-4 id=__codelineno-216-4 name=__codelineno-216-4></a>recorder4_1080p@20.mp4
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-217-1 id=__codelineno-217-1 name=__codelineno-217-1></a>最多支持4路录像和预览，以下是第1路的参数配置，其他路与其类似。
<a href=#__codelineno-217-2 id=__codelineno-217-2 name=__codelineno-217-2></a>recorder1_vi_dev: VIPP设备号。
<a href=#__codelineno-217-3 id=__codelineno-217-3 name=__codelineno-217-3></a>recorder1_isp_dev: ISP设备号。
<a href=#__codelineno-217-4 id=__codelineno-217-4 name=__codelineno-217-4></a>recorder1_cap_width: 录制分辨率宽度。
<a href=#__codelineno-217-5 id=__codelineno-217-5 name=__codelineno-217-5></a>recorder1_cap_height: 录制分辨率高度。
<a href=#__codelineno-217-6 id=__codelineno-217-6 name=__codelineno-217-6></a>recorder1_cap_frmrate: 录制帧率。
<a href=#__codelineno-217-7 id=__codelineno-217-7 name=__codelineno-217-7></a>recorder1_cap_format: 录制视频格式。
<a href=#__codelineno-217-8 id=__codelineno-217-8 name=__codelineno-217-8></a>recorder1_vi_bufnum: 配置VIPP设备buffer数量。
<a href=#__codelineno-217-9 id=__codelineno-217-9 name=__codelineno-217-9></a>recorder1_enable_WDR: 是否启用WDR模式(0：不启用 1：启用)。
<a href=#__codelineno-217-10 id=__codelineno-217-10 name=__codelineno-217-10></a>recorder1_enc_online: 是否启用在线编码模式(0：不启用 1：启用)。
<a href=#__codelineno-217-11 id=__codelineno-217-11 name=__codelineno-217-11></a>recorder1_enc_online_share_bufbum: 在线编码共享buffer个数。
<a href=#__codelineno-217-12 id=__codelineno-217-12 name=__codelineno-217-12></a>recorder1_enc_type: 编码器类型。
<a href=#__codelineno-217-13 id=__codelineno-217-13 name=__codelineno-217-13></a>recorder1_enc_width: 编码视频分辨率宽度。
<a href=#__codelineno-217-14 id=__codelineno-217-14 name=__codelineno-217-14></a>recorder1_enc_height: 编码视频分辨率高度。
<a href=#__codelineno-217-15 id=__codelineno-217-15 name=__codelineno-217-15></a>recorder1_enc_frmrate: 编码视频帧率。
<a href=#__codelineno-217-16 id=__codelineno-217-16 name=__codelineno-217-16></a>recorder1_enc_bitrate: 编码视频码率。
<a href=#__codelineno-217-17 id=__codelineno-217-17 name=__codelineno-217-17></a>recorder1_enc_rcmode: 编码码率控制模式。
<a href=#__codelineno-217-18 id=__codelineno-217-18 name=__codelineno-217-18></a>recorder1_disp_x: 显示区域X坐标。
<a href=#__codelineno-217-19 id=__codelineno-217-19 name=__codelineno-217-19></a>recorder1_disp_y: 显示区域y坐标。
<a href=#__codelineno-217-20 id=__codelineno-217-20 name=__codelineno-217-20></a>recorder1_disp_width: 显示区域宽度。
<a href=#__codelineno-217-21 id=__codelineno-217-21 name=__codelineno-217-21></a>recorder1_disp_height: 显示区域高度。
<a href=#__codelineno-217-22 id=__codelineno-217-22 name=__codelineno-217-22></a>recorder1_disp_dev: 显示设备类型。
<a href=#__codelineno-217-23 id=__codelineno-217-23 name=__codelineno-217-23></a>recorder1_rec_duration: 视频文件录制时长。
<a href=#__codelineno-217-24 id=__codelineno-217-24 name=__codelineno-217-24></a>recorder1_rec_file_cnt: 视频文件最大分片数。
<a href=#__codelineno-217-25 id=__codelineno-217-25 name=__codelineno-217-25></a>recorder1_rec_file: 视频文件保存路径。
<a href=#__codelineno-217-26 id=__codelineno-217-26 name=__codelineno-217-26></a>参数配置说明：
<a href=#__codelineno-217-27 id=__codelineno-217-27 name=__codelineno-217-27></a>1. 支持录制格式：nv21、yv12、nv12、yu12、aw_fbc、aw_lbc_2_0x、aw_lbc_2_5x、aw_lbc_1_5x、
<a href=#__codelineno-217-28 id=__codelineno-217-28 name=__codelineno-217-28></a>aw_lbc_1_0x
<a href=#__codelineno-217-29 id=__codelineno-217-29 name=__codelineno-217-29></a>2. 支持编码格式：H.264、 H.265、MJPEG
<a href=#__codelineno-217-30 id=__codelineno-217-30 name=__codelineno-217-30></a>3. 支持封装格式：MP4、TS
<a href=#__codelineno-217-31 id=__codelineno-217-31 name=__codelineno-217-31></a>4. 特殊参数配置
<a href=#__codelineno-217-32 id=__codelineno-217-32 name=__codelineno-217-32></a>- 将recordern_vi_dev设置为 -1 ，表示不启用这组配置测试。
<a href=#__codelineno-217-33 id=__codelineno-217-33 name=__codelineno-217-33></a>- 将recordern_enc_width 或者 recordern_enc_height设置为 0，表示不测试这组配置的视频编码与封装。
<a href=#__codelineno-217-34 id=__codelineno-217-34 name=__codelineno-217-34></a>- 将recordern_disp_width 或 recordern_disp_width设置为0，表示不测试这组配置的预览显示。
<a href=#__codelineno-217-35 id=__codelineno-217-35 name=__codelineno-217-35></a>- 视频编码与预览显示不可在同一组配置中同时使用。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-218-1 id=__codelineno-218-1 name=__codelineno-218-1></a># cd /mnt/extsd/
<a href=#__codelineno-218-2 id=__codelineno-218-2 name=__codelineno-218-2></a># ./sample_recorder -path ./sample_recorder.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-219-1 id=__codelineno-219-1 name=__codelineno-219-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-220-1 id=__codelineno-220-1 name=__codelineno-220-1></a>达到设定的测试时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-221-1 id=__codelineno-221-1 name=__codelineno-221-1></a>1.测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-221-2 id=__codelineno-221-2 name=__codelineno-221-2></a>2.使用PC软件VLC播放测试生成的视频文件正常。
<a href=#__codelineno-221-3 id=__codelineno-221-3 name=__codelineno-221-3></a>3.使用MediaInfo软件检查编码参数符合预期。
</code></pre></div> #### 8.1.26 sample_vencRecreate 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-222-1 id=__codelineno-222-1 name=__codelineno-222-1></a>演示动态配置编码格式、帧率、码率等功能。
<a href=#__codelineno-222-2 id=__codelineno-222-2 name=__codelineno-222-2></a>该sample测试mpi_vi和mpi_venc组件的绑定组合。创建mpi_vi和mpi_venc，将它们绑定，再分别启动。
<a href=#__codelineno-222-3 id=__codelineno-222-3 name=__codelineno-222-3></a>mpi_vi采集图像，直接传输给mpi_venc进行编码。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-223-1 id=__codelineno-223-1 name=__codelineno-223-1></a>无
</code></pre></div> 测试通路： ![image-20221120173914767](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173914767.png) <center>图 8-25: MPP_sample 测试通路-sample_vencRecreate</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-224-1 id=__codelineno-224-1 name=__codelineno-224-1></a>无 
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-225-1 id=__codelineno-225-1 name=__codelineno-225-1></a>/mnt/extsd/test.raw 
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-226-1 id=__codelineno-226-1 name=__codelineno-226-1></a>online_en: 指定是否开启在线编码，默认0，表示不开启在线编码，即当前为离线编码。
<a href=#__codelineno-226-2 id=__codelineno-226-2 name=__codelineno-226-2></a>online_share_buf_num: 指定在线编码的共享buffer个数（1或2），默认2，表示2个buffer。注意该配置仅当配置在
<a href=#__codelineno-226-3 id=__codelineno-226-3 name=__codelineno-226-3></a>线模式时才生效。
<a href=#__codelineno-226-4 id=__codelineno-226-4 name=__codelineno-226-4></a>vipp_id: 指定vipp设备号，默认0，表示vipp0。
<a href=#__codelineno-226-5 id=__codelineno-226-5 name=__codelineno-226-5></a>wdr_en: 指定是否开启WDR，默认0，表示不开WDR。
<a href=#__codelineno-226-6 id=__codelineno-226-6 name=__codelineno-226-6></a>drop_frm_num: 指定丢帧个数，对于离线编码是vipp丢帧，对于在线编码是ve编码前丢帧。
<a href=#__codelineno-226-7 id=__codelineno-226-7 name=__codelineno-226-7></a>src_width: 指定原始视频的宽度。
<a href=#__codelineno-226-8 id=__codelineno-226-8 name=__codelineno-226-8></a>src_height: 指定原始视频的高度。
<a href=#__codelineno-226-9 id=__codelineno-226-9 name=__codelineno-226-9></a>vi_buffer_num: 指定CSI的buffer个数，仅对离线编码有效。
<a href=#__codelineno-226-10 id=__codelineno-226-10 name=__codelineno-226-10></a>saturation_change: 指定饱和度改变的值，默认0，表示不调整。取值范围[-256, 512]。
<a href=#__codelineno-226-11 id=__codelineno-226-11 name=__codelineno-226-11></a>src_pixfmt: 指定像素格式（YUV类型: nv21(yvu420sp), yu12(yuv420p), yv12, nv12。LBC压缩类型:
<a href=#__codelineno-226-12 id=__codelineno-226-12 name=__codelineno-226-12></a>aw_lbc_2_0x, aw_lbc_2_5x, aw_lbc_1_5x, aw_lbc_1_0x）。
<a href=#__codelineno-226-13 id=__codelineno-226-13 name=__codelineno-226-13></a>color_space: 指定颜色空间（jpeg, rec709, rec709_part_range）。
<a href=#__codelineno-226-14 id=__codelineno-226-14 name=__codelineno-226-14></a>venc_ch_id: 指定编码通道，默认0，表示venc ch0。
<a href=#__codelineno-226-15 id=__codelineno-226-15 name=__codelineno-226-15></a>video_dst_file: 指定编码文件的存放路径。
<a href=#__codelineno-226-16 id=__codelineno-226-16 name=__codelineno-226-16></a>video_framerate: 指定帧率，单位: fps。
<a href=#__codelineno-226-17 id=__codelineno-226-17 name=__codelineno-226-17></a>video_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-226-18 id=__codelineno-226-18 name=__codelineno-226-18></a>video_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-226-19 id=__codelineno-226-19 name=__codelineno-226-19></a>video_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-226-20 id=__codelineno-226-20 name=__codelineno-226-20></a>video_encoder: 指定编码格式（H.264、H.265、MJPEG）。
<a href=#__codelineno-226-21 id=__codelineno-226-21 name=__codelineno-226-21></a>profile: 指定编码质量，对于H264，建议配置High（2），对于H265，建议配置Main（0）。
<a href=#__codelineno-226-22 id=__codelineno-226-22 name=__codelineno-226-22></a>ve_freq: 指定VE的频率，默认0，表示300MHz，单位: MHz。
<a href=#__codelineno-226-23 id=__codelineno-226-23 name=__codelineno-226-23></a>product_mode: 指定产品类型（0:Normal, 1:IPC）。
<a href=#__codelineno-226-24 id=__codelineno-226-24 name=__codelineno-226-24></a>sensor_type: 指定sensor类型（0:DisWdr, 1:EnWdr）。
<a href=#__codelineno-226-25 id=__codelineno-226-25 name=__codelineno-226-25></a>key_frame_interval: 指定I帧间隔。
<a href=#__codelineno-226-26 id=__codelineno-226-26 name=__codelineno-226-26></a>enable_gdc: 指定是否开启GDC功能，默认0，表示不开GDC。
<a href=#__codelineno-226-27 id=__codelineno-226-27 name=__codelineno-226-27></a>rc_mode: 指定码率控制模式（0:CBR, 1:VBR, 2:FIXQP, 3:QPMAP）。
<a href=#__codelineno-226-28 id=__codelineno-226-28 name=__codelineno-226-28></a>VBR、CBR模式，编码参数
<a href=#__codelineno-226-29 id=__codelineno-226-29 name=__codelineno-226-29></a>init_qp: 指定初始QP值，取值范围(0, 51)。
<a href=#__codelineno-226-30 id=__codelineno-226-30 name=__codelineno-226-30></a>min_i_qp: 指定I帧最小QP值，取值范围(0, 51)。FIXQP模式时，取其值为i_qp。
<a href=#__codelineno-226-31 id=__codelineno-226-31 name=__codelineno-226-31></a>max_i_qp: 指定I帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-226-32 id=__codelineno-226-32 name=__codelineno-226-32></a>min_p_qp: 指定P帧最小QP值，取值范围(0, 51)。FIXQP模式时，取其值为p_qp。
<a href=#__codelineno-226-33 id=__codelineno-226-33 name=__codelineno-226-33></a>max_p_qp: 指定P帧最大QP值，取值范围(0, 51)。
<a href=#__codelineno-226-34 id=__codelineno-226-34 name=__codelineno-226-34></a>mb_qp_limit_en: 指定是否开启mb qp限制，默认0，表示不开启。
<a href=#__codelineno-226-35 id=__codelineno-226-35 name=__codelineno-226-35></a>VBR模式，编码参数
<a href=#__codelineno-226-36 id=__codelineno-226-36 name=__codelineno-226-36></a>moving_th：指定mb16x16中MAD的阈值，取值范围[0, 31]。
<a href=#__codelineno-226-37 id=__codelineno-226-37 name=__codelineno-226-37></a>quality: 指定静态P帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-226-38 id=__codelineno-226-38 name=__codelineno-226-38></a>p_bits_coef: 指定移动P帧的位系数，取值范围[1, 50]。
<a href=#__codelineno-226-39 id=__codelineno-226-39 name=__codelineno-226-39></a>i_bits_coef: 指定I帧的位系数，取值范围[1, 20]。
<a href=#__codelineno-226-40 id=__codelineno-226-40 name=__codelineno-226-40></a>gop_mode: 指定GOP模式（0:NormalP, 1:DualP, 2:SmartP）。
<a href=#__codelineno-226-41 id=__codelineno-226-41 name=__codelineno-226-41></a>gop_size: 指定GOP大小，当前只针对H265有效，取值范围[1, 63]。
<a href=#__codelineno-226-42 id=__codelineno-226-42 name=__codelineno-226-42></a>高级跳帧参数
<a href=#__codelineno-226-43 id=__codelineno-226-43 name=__codelineno-226-43></a>AdvancedRef_Base: 设置该值大于0表示开启高级跳帧功能，等于0表示关闭高级跳帧功能。
<a href=#__codelineno-226-44 id=__codelineno-226-44 name=__codelineno-226-44></a>AdvancedRef_Enhance: 设置Enhance为5。
<a href=#__codelineno-226-45 id=__codelineno-226-45 name=__codelineno-226-45></a>AdvancedRef_RefBaseEn: 设置该值为1表示开启参考帧，等于0表示关闭参考帧。
<a href=#__codelineno-226-46 id=__codelineno-226-46 name=__codelineno-226-46></a>enable_fast_enc: 指定是否开启快速编码，默认0，表示不开启。
<a href=#__codelineno-226-47 id=__codelineno-226-47 name=__codelineno-226-47></a>encode_rotate: 指定编码旋转角度（0, 90, 180, 270），顺时针方向。
<a href=#__codelineno-226-48 id=__codelineno-226-48 name=__codelineno-226-48></a>mirror: 指定编码镜像是否开启，默认0，表示不开启。取值范围[0, 1]。
<a href=#__codelineno-226-49 id=__codelineno-226-49 name=__codelineno-226-49></a>color2grey: 指定是否开启彩转灰功能，默认"no"，表示不开启。取值范围[“no”, "yes"]。
<a href=#__codelineno-226-50 id=__codelineno-226-50 name=__codelineno-226-50></a>2D降噪参数配置
<a href=#__codelineno-226-51 id=__codelineno-226-51 name=__codelineno-226-51></a>2dnr_en: 编码器2DNR使能，默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-226-52 id=__codelineno-226-52 name=__codelineno-226-52></a>2dnr_strength_y: 亮度降噪强度系数。该值越大，滤波强度越高。默认127，取值范围[0, 255]。
<a href=#__codelineno-226-53 id=__codelineno-226-53 name=__codelineno-226-53></a>2dnr_strength_c: 色度降噪强度系数。该值越大，滤波强度越高。默认127，取值范围[0, 255]。
<a href=#__codelineno-226-54 id=__codelineno-226-54 name=__codelineno-226-54></a>2dnr_threshold_y: 亮度邻域像素降噪开关阈值。该值越大，越容易触发2d滤波。默认7，取值范围[0, 15]。
<a href=#__codelineno-226-55 id=__codelineno-226-55 name=__codelineno-226-55></a>2dnr_threshold_c: 色度邻域像素降噪开关阈值。该值越大，越容易触发2d滤波。默认7，取值范围[0, 15]。
<a href=#__codelineno-226-56 id=__codelineno-226-56 name=__codelineno-226-56></a>3D降噪参数配置
<a href=#__codelineno-226-57 id=__codelineno-226-57 name=__codelineno-226-57></a>3dnr_en: 编码器3DNR使能，默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-226-58 id=__codelineno-226-58 name=__codelineno-226-58></a>3dnr_pix_level_en: 3d滤波权重系数自适应修正开关。默认0，表示不开启。取值范围[0, 1]。
<a href=#__codelineno-226-59 id=__codelineno-226-59 name=__codelineno-226-59></a>3dnr_smooth_en: 像素级3x3平滑滤波使能。默认1，表示开启。取值范围[0, 1]。
<a href=#__codelineno-226-60 id=__codelineno-226-60 name=__codelineno-226-60></a>3dnr_pix_diff_th: 仅当3d_adjust_pix_level_enable为1时生效，自适应修正幅度阈值。该值越大，滤波强度越
<a href=#__codelineno-226-61 id=__codelineno-226-61 name=__codelineno-226-61></a>高。默认6，取值范围[0, 31]。
<a href=#__codelineno-226-62 id=__codelineno-226-62 name=__codelineno-226-62></a>3dnr_max_mv_th: 源图像素块运动矢量最大阈值，单个像素块仅当其水平和垂直MV皆小于该阈值，才会进行3d滤波。该值
<a href=#__codelineno-226-63 id=__codelineno-226-63 name=__codelineno-226-63></a>越大，越容易触发3d滤波。默认2，取值范围[0, 63]。
<a href=#__codelineno-226-64 id=__codelineno-226-64 name=__codelineno-226-64></a>3dnr_max_mad_th: 源图与参考图之间像素块的MAD最大阈值，单个像素块仅当其MAD值小于该阈值，才会进行3d滤波。该
<a href=#__codelineno-226-65 id=__codelineno-226-65 name=__codelineno-226-65></a>值越大，越容易触发3d滤波。默认11，取值范围[0, 63]。
<a href=#__codelineno-226-66 id=__codelineno-226-66 name=__codelineno-226-66></a>3dnr_min_coef: 3d滤波权重系数的最小阈值。该值越小，自适应3d滤波的强度上限越高。默认14，取值范围[0, 3
<a href=#__codelineno-226-67 id=__codelineno-226-67 name=__codelineno-226-67></a>dnr_max_coef]。
<a href=#__codelineno-226-68 id=__codelineno-226-68 name=__codelineno-226-68></a>3dnr_max_coef: 3d滤波权重系数的最大阈值。该值越大，自适应3d滤波的强度下限越低。默认16，取值范围[3
<a href=#__codelineno-226-69 id=__codelineno-226-69 name=__codelineno-226-69></a>dnr_min_coef, 16]。
<a href=#__codelineno-226-70 id=__codelineno-226-70 name=__codelineno-226-70></a>ROI测试参数配置
<a href=#__codelineno-226-71 id=__codelineno-226-71 name=__codelineno-226-71></a>roi_num: 指定ROI的个数，默认0，表示不开启ROI测试。取值范围[0, 8]。
<a href=#__codelineno-226-72 id=__codelineno-226-72 name=__codelineno-226-72></a>roi_qp: 指定ROI区域的QP值，默认50，表示最差质量。取值范围(0, 51)。
<a href=#__codelineno-226-73 id=__codelineno-226-73 name=__codelineno-226-73></a>roi_BgFrameRateEnable: 指定是否开启非ROI区域低帧率编码，默认0，表示不开启。
<a href=#__codelineno-226-74 id=__codelineno-226-74 name=__codelineno-226-74></a>roi_BgFrameRateAttenuation: 指定非ROI区域的帧率衰减比例，默认3，表示非ROI区域的帧率是正常帧率的1/3。
<a href=#__codelineno-226-75 id=__codelineno-226-75 name=__codelineno-226-75></a>IntraRefresh_BlockNum: 指定P帧帧内刷新的block个数，默认0，表示不开启P帧帧内刷新功能。
<a href=#__codelineno-226-76 id=__codelineno-226-76 name=__codelineno-226-76></a>orl_num: 指定ORL(Object Rectangle Label)的个数，取值范围[0,16]。
<a href=#__codelineno-226-77 id=__codelineno-226-77 name=__codelineno-226-77></a>配置vbv buffer大小和vbv buffer阈值大小
<a href=#__codelineno-226-78 id=__codelineno-226-78 name=__codelineno-226-78></a>vbvBufferSize: 指定vbv buffer大小，默认0，表示由mpp middleware自行计算并设置给编码器，大于0，表示由
<a href=#__codelineno-226-79 id=__codelineno-226-79 name=__codelineno-226-79></a>app设置。
<a href=#__codelineno-226-80 id=__codelineno-226-80 name=__codelineno-226-80></a>vbvThreshSize: 指定vbv buffer阈值大小，默认0，表示由mpp middleware自行计算并设置给编码器，大于0，表示
<a href=#__codelineno-226-81 id=__codelineno-226-81 name=__codelineno-226-81></a>由app设置。
<a href=#__codelineno-226-82 id=__codelineno-226-82 name=__codelineno-226-82></a>裁剪编码参数设置
<a href=#__codelineno-226-83 id=__codelineno-226-83 name=__codelineno-226-83></a>crop_en: 指定是否开启裁剪编码，默认0，表示不开启。
<a href=#__codelineno-226-84 id=__codelineno-226-84 name=__codelineno-226-84></a>crop_rect_x: 指定裁剪区域的x坐标。
<a href=#__codelineno-226-85 id=__codelineno-226-85 name=__codelineno-226-85></a>crop_rect_y: 指定裁剪区域的y坐标。
<a href=#__codelineno-226-86 id=__codelineno-226-86 name=__codelineno-226-86></a>crop_rect_w: 指定裁剪区域的宽度。
<a href=#__codelineno-226-87 id=__codelineno-226-87 name=__codelineno-226-87></a>crop_rect_h: 指定裁剪区域的高度。
<a href=#__codelineno-226-88 id=__codelineno-226-88 name=__codelineno-226-88></a>vui_timing_info_present_flag: 指定是否添加VUI信息，默认0，表示不添加。
<a href=#__codelineno-226-89 id=__codelineno-226-89 name=__codelineno-226-89></a>normal_test_duration: 指定正常测试时间，单位: s。
<a href=#__codelineno-226-90 id=__codelineno-226-90 name=__codelineno-226-90></a>编码recreate参数配置
<a href=#__codelineno-226-91 id=__codelineno-226-91 name=__codelineno-226-91></a>venc_recreate_enable: 指定是否开启编码recreate，默认1，表示开启。
<a href=#__codelineno-226-92 id=__codelineno-226-92 name=__codelineno-226-92></a>dynamic_video_encoder: 指定编码格式（H.264、H.265）。
<a href=#__codelineno-226-93 id=__codelineno-226-93 name=__codelineno-226-93></a>dynamic_video_framerate: 指定帧率，单位: fps。
<a href=#__codelineno-226-94 id=__codelineno-226-94 name=__codelineno-226-94></a>dynamic_video_bitrate: 指定编码的码率，单位: bps。
<a href=#__codelineno-226-95 id=__codelineno-226-95 name=__codelineno-226-95></a>dynamic_video_width: 指定生成的裸码流视频的宽度。
<a href=#__codelineno-226-96 id=__codelineno-226-96 name=__codelineno-226-96></a>dynamic_video_height: 指定生成的裸码流视频的高度。
<a href=#__codelineno-226-97 id=__codelineno-226-97 name=__codelineno-226-97></a>dynamic_key_frame_interval: 指定I帧间隔。
<a href=#__codelineno-226-98 id=__codelineno-226-98 name=__codelineno-226-98></a>dynamic_rc_mode: 指定码率控制模式（0:CBR, 1:VBR）。
<a href=#__codelineno-226-99 id=__codelineno-226-99 name=__codelineno-226-99></a>venc_recreate_test_duration: 指定recreate测试时间，单位: s。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-227-1 id=__codelineno-227-1 name=__codelineno-227-1></a># cd /mnt/extsd/
<a href=#__codelineno-227-2 id=__codelineno-227-2 name=__codelineno-227-2></a># ./sample_vencRecreate -path ./sample_vencRecreate.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-228-1 id=__codelineno-228-1 name=__codelineno-228-1></a>不支持
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-229-1 id=__codelineno-229-1 name=__codelineno-229-1></a>测试达到设定的时间后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-230-1 id=__codelineno-230-1 name=__codelineno-230-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-230-2 id=__codelineno-230-2 name=__codelineno-230-2></a>2. 使用VLC 软件播放生成的raw文件正常。
</code></pre></div> ### 8.2 音频 #### 8.2.1 sample_ai 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-231-1 id=__codelineno-231-1 name=__codelineno-231-1></a>根据配置参数采集对应的pcm数据，并写入到文件中保存。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-232-1 id=__codelineno-232-1 name=__codelineno-232-1></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120173947583](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120173947583.png) <center>图 8-26: MPP_sample 测试通路-sample_ai</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-233-1 id=__codelineno-233-1 name=__codelineno-233-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-234-1 id=__codelineno-234-1 name=__codelineno-234-1></a>/mnt/extsd/test.wav
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-235-1 id=__codelineno-235-1 name=__codelineno-235-1></a>pcm_file_path：指定目标pcm文件的路径，该文件是包含wave头的wav格式文件。
<a href=#__codelineno-235-2 id=__codelineno-235-2 name=__codelineno-235-2></a>pcm_sample_rate：指定采样率，通常设置为8000。
<a href=#__codelineno-235-3 id=__codelineno-235-3 name=__codelineno-235-3></a>pcm_channel_cnt：指定通道数目，通常为1或2。
<a href=#__codelineno-235-4 id=__codelineno-235-4 name=__codelineno-235-4></a>pcm_bit_width：指定位宽，必须设置为16。
<a href=#__codelineno-235-5 id=__codelineno-235-5 name=__codelineno-235-5></a>pcm_frame_size：指定frame_size，此值可不指定。
<a href=#__codelineno-235-6 id=__codelineno-235-6 name=__codelineno-235-6></a>pcm_cap_duration：指定测试时间。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-236-1 id=__codelineno-236-1 name=__codelineno-236-1></a># cd /mnt/extsd/
<a href=#__codelineno-236-2 id=__codelineno-236-2 name=__codelineno-236-2></a># ./sample_ai -path ./sample_ai.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-237-1 id=__codelineno-237-1 name=__codelineno-237-1></a># sample_ai -path ./mnt/E/sample_ai.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-238-1 id=__codelineno-238-1 name=__codelineno-238-1></a>测试时间达到指定时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-239-1 id=__codelineno-239-1 name=__codelineno-239-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-239-2 id=__codelineno-239-2 name=__codelineno-239-2></a>2. 生成pcm 文件test.wav播放正常。
</code></pre></div> #### 8.2.2 sample_ao 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-240-1 id=__codelineno-240-1 name=__codelineno-240-1></a>根据配置参数读取pcm数据，然后播放声音，从耳机口或喇叭输出声音。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-241-1 id=__codelineno-241-1 name=__codelineno-241-1></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120174006397](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120174006397.png) <center>图 8-27: MPP_sample 测试通路-sample_ao</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-242-1 id=__codelineno-242-1 name=__codelineno-242-1></a>/mnt/extsd/test.wav
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-243-1 id=__codelineno-243-1 name=__codelineno-243-1></a>/mnt/extsd/SampleAo_AoSaveFile.pcm
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-244-1 id=__codelineno-244-1 name=__codelineno-244-1></a>pcm_file_path：指定音频pcm文件的路径，该文件是包含wave头(大小为44Bytes)的wav格式文件，如果找不到这种格
<a href=#__codelineno-244-2 id=__codelineno-244-2 name=__codelineno-244-2></a>式文件，可以用sample_ai生成一个。
<a href=#__codelineno-244-3 id=__codelineno-244-3 name=__codelineno-244-3></a>pcm_sample_rate：指定采样率，设置为文件中的采样率的值。
<a href=#__codelineno-244-4 id=__codelineno-244-4 name=__codelineno-244-4></a>pcm_channel_cnt：指定通道数目，设置为文件中的通道数。
<a href=#__codelineno-244-5 id=__codelineno-244-5 name=__codelineno-244-5></a>pcm_bit_width：指定位宽，设置为文件中的位宽。
<a href=#__codelineno-244-6 id=__codelineno-244-6 name=__codelineno-244-6></a>pcm_frame_size：固定指定为1024。
<a href=#__codelineno-244-7 id=__codelineno-244-7 name=__codelineno-244-7></a>ao_volume：输出的音量，范围：0~100。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-245-1 id=__codelineno-245-1 name=__codelineno-245-1></a># cd /mnt/extsd/
<a href=#__codelineno-245-2 id=__codelineno-245-2 name=__codelineno-245-2></a># ./sample_ao -path ./sample_ao.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-246-1 id=__codelineno-246-1 name=__codelineno-246-1></a># sample_ao -path ./mnt/E/sample_ao.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-247-1 id=__codelineno-247-1 name=__codelineno-247-1></a>播放完wav 文件后会自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-248-1 id=__codelineno-248-1 name=__codelineno-248-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-248-2 id=__codelineno-248-2 name=__codelineno-248-2></a>2. 喇叭播放声音正常。同时，抓取pcm 文件SampleAo_AoSaveFile.pcm。
</code></pre></div> #### 8.2.3 sample_aoSync 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-249-1 id=__codelineno-249-1 name=__codelineno-249-1></a>演示接口AW_MPI_AO_SendFrameSync 的使用方法，采用同步的方式send pcm frame。而sample_ao 是采用异步的方
<a href=#__codelineno-249-2 id=__codelineno-249-2 name=__codelineno-249-2></a>式。
<a href=#__codelineno-249-3 id=__codelineno-249-3 name=__codelineno-249-3></a>根据配置参数读取pcm数据，然后播放声音，从耳机口输出声音。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-250-1 id=__codelineno-250-1 name=__codelineno-250-1></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120174032703](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120174032703.png) <center>图 8-28: MPP_sample 测试通路-sample_aoSync</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-251-1 id=__codelineno-251-1 name=__codelineno-251-1></a>/mnt/extsd/test.wav
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-252-1 id=__codelineno-252-1 name=__codelineno-252-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-253-1 id=__codelineno-253-1 name=__codelineno-253-1></a>pcm_file_path：指定音频pcm文件的路径，该文件是包含wave头(大小为44Bytes)的wav格式文件，如果找不到这种格
<a href=#__codelineno-253-2 id=__codelineno-253-2 name=__codelineno-253-2></a>式文件，可以用sample_ai生成一个。
<a href=#__codelineno-253-3 id=__codelineno-253-3 name=__codelineno-253-3></a>pcm_frame_size：指定每次取pcm 的帧数，用来与其他参数配合决定分配pcm frame buf 的大小。
<a href=#__codelineno-253-4 id=__codelineno-253-4 name=__codelineno-253-4></a>ao_volume：指定音量大小。
<a href=#__codelineno-253-5 id=__codelineno-253-5 name=__codelineno-253-5></a>test_duration：指定测试时间，单位：秒。
<a href=#__codelineno-253-6 id=__codelineno-253-6 name=__codelineno-253-6></a>parse_wav_header_enable：指定是否使用sample 内部wav header 的解析。
<a href=#__codelineno-253-7 id=__codelineno-253-7 name=__codelineno-253-7></a>注意：如果使能，wav 文件在sample 内部会自己解析这些参数，并覆盖下面指定的参数值（pcm_sample_rate、
<a href=#__codelineno-253-8 id=__codelineno-253-8 name=__codelineno-253-8></a>pcm_channel_cnt、pcm_bit_width）。
<a href=#__codelineno-253-9 id=__codelineno-253-9 name=__codelineno-253-9></a>pcm_sample_rate：指定采样率，设置为文件中的采样率的值。
<a href=#__codelineno-253-10 id=__codelineno-253-10 name=__codelineno-253-10></a>pcm_channel_cnt：指定通道数目，设置为文件中的通道数。
<a href=#__codelineno-253-11 id=__codelineno-253-11 name=__codelineno-253-11></a>pcm_bit_width：指定位宽，设置为文件中的位宽。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-254-1 id=__codelineno-254-1 name=__codelineno-254-1></a># cd /mnt/extsd/
<a href=#__codelineno-254-2 id=__codelineno-254-2 name=__codelineno-254-2></a># ./sample_aoSync -path ./sample_aoSync.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-255-1 id=__codelineno-255-1 name=__codelineno-255-1></a># sample_aoSync -path ./mnt/E/sample_aoSync.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-256-1 id=__codelineno-256-1 name=__codelineno-256-1></a>播放完wav 文件后会自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-257-1 id=__codelineno-257-1 name=__codelineno-257-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-257-2 id=__codelineno-257-2 name=__codelineno-257-2></a>2. 喇叭播放声音正常。
</code></pre></div> #### 8.2.4 sample_ao_resample_mixer 测试目的： 根据配置参数读取pcm数据，然后播放声音，从耳机口或喇叭输出声音。 可以测试resample及混音功能。 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-258-1 id=__codelineno-258-1 name=__codelineno-258-1></a>mpp_aio 
</code></pre></div> 测试通路： ![image-20221120174053936](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120174053936.png) <center>图 8-29: MPP_sample 测试通路-sample_ao_resample_mixer</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-259-1 id=__codelineno-259-1 name=__codelineno-259-1></a>/mnt/extsd/speech.wav /mnt/extsd/48000_ch2_bit16.wav 
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-260-1 id=__codelineno-260-1 name=__codelineno-260-1></a> 无 
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-261-1 id=__codelineno-261-1 name=__codelineno-261-1></a>pcm_file_path：指定音频pcm文件的路径，该文件是包含wave头(大小为44Bytes)的wav格式文件，如果找不到这种格
<a href=#__codelineno-261-2 id=__codelineno-261-2 name=__codelineno-261-2></a>式文件，可以用sample_ai生成一个。
<a href=#__codelineno-261-3 id=__codelineno-261-3 name=__codelineno-261-3></a>pcm_sample_rate：指定采样率，设置为文件中的采样率的值。
<a href=#__codelineno-261-4 id=__codelineno-261-4 name=__codelineno-261-4></a>pcm_channel_cnt：指定通道数目，设置为文件中的通道数。
<a href=#__codelineno-261-5 id=__codelineno-261-5 name=__codelineno-261-5></a>pcm_bit_width：指定位宽，设置为文件中的位宽。
<a href=#__codelineno-261-6 id=__codelineno-261-6 name=__codelineno-261-6></a>pcm_frame_size：固定指定为1024。
<a href=#__codelineno-261-7 id=__codelineno-261-7 name=__codelineno-261-7></a>pcm_second_chl_en: 是否启动第二路ao,以测试resample及混音功能。
<a href=#__codelineno-261-8 id=__codelineno-261-8 name=__codelineno-261-8></a>pcm_file_path_slave：指定音频pcm文件的路径，该文件是包含wave头(大小为44Bytes)的wav格式文件，如果找不到
<a href=#__codelineno-261-9 id=__codelineno-261-9 name=__codelineno-261-9></a>这种格式文件，可以用sample_ai生成一个。
<a href=#__codelineno-261-10 id=__codelineno-261-10 name=__codelineno-261-10></a>pcm_sample_rate_slave：指定采样率，设置为文件中的采样率的值。
<a href=#__codelineno-261-11 id=__codelineno-261-11 name=__codelineno-261-11></a>pcm_channel_cnt_slave：指定通道数目，设置为文件中的通道数。
<a href=#__codelineno-261-12 id=__codelineno-261-12 name=__codelineno-261-12></a>pcm_bit_width_slave：指定位宽，设置为文件中的位宽。
<a href=#__codelineno-261-13 id=__codelineno-261-13 name=__codelineno-261-13></a>pcm_frame_size_slave：固定指定为1024。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-262-1 id=__codelineno-262-1 name=__codelineno-262-1></a># cd /mnt/extsd/ 
<a href=#__codelineno-262-2 id=__codelineno-262-2 name=__codelineno-262-2></a># ./sample_ao_resample_mixer -path ./sample_ao_resample_mixer.conf 
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-263-1 id=__codelineno-263-1 name=__codelineno-263-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-264-1 id=__codelineno-264-1 name=__codelineno-264-1></a>播放完wav 文件后会自动退出测试。 
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-265-1 id=__codelineno-265-1 name=__codelineno-265-1></a>1. 测试程序运行正常，测试过程没有异常打印。 
<a href=#__codelineno-265-2 id=__codelineno-265-2 name=__codelineno-265-2></a>2. 喇叭播放声音正常。
</code></pre></div> #### 8.2.5 sample_ao2ai_aec 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-266-1 id=__codelineno-266-1 name=__codelineno-266-1></a>本sample主要用来演示aec功能的使用。
<a href=#__codelineno-266-2 id=__codelineno-266-2 name=__codelineno-266-2></a>sample创建两路ai，一路通过tunnel mode 绑定于audio enc，直接aac编码，并保存编码后的数据；一路采用非
<a href=#__codelineno-266-3 id=__codelineno-266-3 name=__codelineno-266-3></a>tunnel模式，由app获取ai数据，做其他处理。
<a href=#__codelineno-266-4 id=__codelineno-266-4 name=__codelineno-266-4></a>sample运行过程如下：
<a href=#__codelineno-266-5 id=__codelineno-266-5 name=__codelineno-266-5></a>根据配置参数读取pcm数据，然后播放声音。同时ai采集音频数据，并做aec回声消除处理，后送aac编码或直接获取aec后
<a href=#__codelineno-266-6 id=__codelineno-266-6 name=__codelineno-266-6></a>的数据用做他用。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-267-1 id=__codelineno-267-1 name=__codelineno-267-1></a>mpp_aenc
<a href=#__codelineno-267-2 id=__codelineno-267-2 name=__codelineno-267-2></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120174112839](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120174112839.png) <center>图 8-30: MPP_sample 测试通路-sample_ao2ai_aec</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-268-1 id=__codelineno-268-1 name=__codelineno-268-1></a>/mnt/extsd/sample_ai/sample_ai_16000_ch1_bit16_aec_20.wav
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-269-1 id=__codelineno-269-1 name=__codelineno-269-1></a>/mnt/extsd/sample_ao2ai/tmp/ai_cap.pcm
<a href=#__codelineno-269-2 id=__codelineno-269-2 name=__codelineno-269-2></a>/mnt/extsd/sample_ao2ai/tmp/ai_cap.aac
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-270-1 id=__codelineno-270-1 name=__codelineno-270-1></a>pcm_src_path：指定音频pcm文件的路径，该文件是包含wave头(大小为44Bytes)的wav格式文件，如果找不到这种格式
<a href=#__codelineno-270-2 id=__codelineno-270-2 name=__codelineno-270-2></a>文件，可以用sample_ai生成一个。
<a href=#__codelineno-270-3 id=__codelineno-270-3 name=__codelineno-270-3></a>pcm_dst_path：指定目标文件的路径，该文件是ai组件采集音频生成的文件，不带wav头，如果想听该音频，需手动加上
<a href=#__codelineno-270-4 id=__codelineno-270-4 name=__codelineno-270-4></a>wave头。
<a href=#__codelineno-270-5 id=__codelineno-270-5 name=__codelineno-270-5></a>aac_dst_path: 指定编码后aac目标文件路径，该文件为aac raw data。
<a href=#__codelineno-270-6 id=__codelineno-270-6 name=__codelineno-270-6></a>pcm_sample_rate：指定采样率，设置为文件中的采样率的值，启用aec后，sample rate须为8000.
<a href=#__codelineno-270-7 id=__codelineno-270-7 name=__codelineno-270-7></a>pcm_channel_cnt：指定通道数目，设置为文件中的通道数，启用aec后，sample rate须为1.
<a href=#__codelineno-270-8 id=__codelineno-270-8 name=__codelineno-270-8></a>pcm_bit_width：指定位宽，设置为文件中的位宽，启用aec后，bit_width须为16.
<a href=#__codelineno-270-9 id=__codelineno-270-9 name=__codelineno-270-9></a>pcm_frame_size：帧大小，固定指定为1024。
<a href=#__codelineno-270-10 id=__codelineno-270-10 name=__codelineno-270-10></a>aec_en：是否启动aec回声消除功能。1：启动；0：不启用。
<a href=#__codelineno-270-11 id=__codelineno-270-11 name=__codelineno-270-11></a>aec_delay_ms： 启用aec回声消除功能时，设置的延迟时间，主要给aec回声消除算法使用，建议先设置为0。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-271-1 id=__codelineno-271-1 name=__codelineno-271-1></a># cd /mnt/extsd/
<a href=#__codelineno-271-2 id=__codelineno-271-2 name=__codelineno-271-2></a># ./sample_ao2ai_aec -path ./sample_ao2ai_aec.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-272-1 id=__codelineno-272-1 name=__codelineno-272-1></a># sample_ao2ai_aec -path ./mnt/E/sample_ao2ai_aec.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-273-1 id=__codelineno-273-1 name=__codelineno-273-1></a>按“crtl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-274-1 id=__codelineno-274-1 name=__codelineno-274-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-274-2 id=__codelineno-274-2 name=__codelineno-274-2></a>2. 喇叭播放没有回声。
</code></pre></div> #### 8.2.6 sample_ao2ai_aec_rate_mixer 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-275-1 id=__codelineno-275-1 name=__codelineno-275-1></a>演示回声消除功能。
<a href=#__codelineno-275-2 id=__codelineno-275-2 name=__codelineno-275-2></a>sample创建两路ai，一路通过tunnel mode 绑定于audio enc，直接aac编码，并保存编码后的数据；一路采用非
<a href=#__codelineno-275-3 id=__codelineno-275-3 name=__codelineno-275-3></a>tunnel模式，由app获取ai数据，做其他处理。
<a href=#__codelineno-275-4 id=__codelineno-275-4 name=__codelineno-275-4></a>sample运行过程如下：
<a href=#__codelineno-275-5 id=__codelineno-275-5 name=__codelineno-275-5></a>根据配置参数读取pcm数据，然后播放声音。同时ai采集音频数据，并做aec回声消除处理，后送aac编码或直接获取aec后
<a href=#__codelineno-275-6 id=__codelineno-275-6 name=__codelineno-275-6></a>的数据用做他用。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-276-1 id=__codelineno-276-1 name=__codelineno-276-1></a>mpp_aenc
<a href=#__codelineno-276-2 id=__codelineno-276-2 name=__codelineno-276-2></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120174131348](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120174131348.png) <center>图 8-31: MPP_sample 测试通路-sample_ao2ai_aec_rate_mixer</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-277-1 id=__codelineno-277-1 name=__codelineno-277-1></a>第一路：/mnt/extsd/speech.wav
<a href=#__codelineno-277-2 id=__codelineno-277-2 name=__codelineno-277-2></a>第二路：/mnt/extsd/48000_ch2_bit16.wav
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-278-1 id=__codelineno-278-1 name=__codelineno-278-1></a>/mnt/extsd/ai_cap.pcm
<a href=#__codelineno-278-2 id=__codelineno-278-2 name=__codelineno-278-2></a>/mnt/extsd/ai_cap.aac
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-279-1 id=__codelineno-279-1 name=__codelineno-279-1></a>第一路音频数据文件及对应参数：
<a href=#__codelineno-279-2 id=__codelineno-279-2 name=__codelineno-279-2></a>pcm_src_path：指定音频pcm文件的路径，该文件是包含wave头(大小为44Bytes)的wav格式文件，如果找不到这种格式
<a href=#__codelineno-279-3 id=__codelineno-279-3 name=__codelineno-279-3></a>文件，可以用sample_ai生成一个。
<a href=#__codelineno-279-4 id=__codelineno-279-4 name=__codelineno-279-4></a>pcm_dst_path：指定目标文件的路径，该文件是ai组件采集音频生成的文件，不带wav头，如果想听该音频，需手动加上
<a href=#__codelineno-279-5 id=__codelineno-279-5 name=__codelineno-279-5></a>wave头。
<a href=#__codelineno-279-6 id=__codelineno-279-6 name=__codelineno-279-6></a>aac_dst_path: 指定编码后aac目标文件路径，该文件为aac raw data。
<a href=#__codelineno-279-7 id=__codelineno-279-7 name=__codelineno-279-7></a>pcm_sample_rate：指定采样率，设置为文件中的采样率的值，启用aec后，sample rate须为8000.
<a href=#__codelineno-279-8 id=__codelineno-279-8 name=__codelineno-279-8></a>pcm_channel_cnt：指定通道数目，设置为文件中的通道数，启用aec后，sample rate须为1.
<a href=#__codelineno-279-9 id=__codelineno-279-9 name=__codelineno-279-9></a>pcm_bit_width：指定位宽，设置为文件中的位宽，启用aec后，bit_width须为16.
<a href=#__codelineno-279-10 id=__codelineno-279-10 name=__codelineno-279-10></a>pcm_frame_size：固定指定为1024。
<a href=#__codelineno-279-11 id=__codelineno-279-11 name=__codelineno-279-11></a>aec_en: 1:启动aec回声消除功能；0：不启用aec回声消除功能；
<a href=#__codelineno-279-12 id=__codelineno-279-12 name=__codelineno-279-12></a>aec_delay_ms： 启用aec回声消除功能时，设置的延迟时间，主要给aec回声消除算法使用，建议先设置为0。
<a href=#__codelineno-279-13 id=__codelineno-279-13 name=__codelineno-279-13></a>第二路音频数据文件及对应参数：
<a href=#__codelineno-279-14 id=__codelineno-279-14 name=__codelineno-279-14></a>pcm_src_path_slave：指定音频pcm文件的路径。
<a href=#__codelineno-279-15 id=__codelineno-279-15 name=__codelineno-279-15></a>pcm_sample_rate_slave：指定采样率。
<a href=#__codelineno-279-16 id=__codelineno-279-16 name=__codelineno-279-16></a>pcm_channel_cnt_slave：指定通道数目。
<a href=#__codelineno-279-17 id=__codelineno-279-17 name=__codelineno-279-17></a>pcm_bit_width_slave：指定位宽。
<a href=#__codelineno-279-18 id=__codelineno-279-18 name=__codelineno-279-18></a>pcm_frame_size_slave：指定帧大小，固定指定为1024。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-280-1 id=__codelineno-280-1 name=__codelineno-280-1></a># cd /mnt/extsd/
<a href=#__codelineno-280-2 id=__codelineno-280-2 name=__codelineno-280-2></a># ./sample_ao2ai_aec_rate_mixer -path ./sample_ao2ai_aec_rate_mixer.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-281-1 id=__codelineno-281-1 name=__codelineno-281-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-282-1 id=__codelineno-282-1 name=__codelineno-282-1></a>按“crtl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-283-1 id=__codelineno-283-1 name=__codelineno-283-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-283-2 id=__codelineno-283-2 name=__codelineno-283-2></a>2. 喇叭播放没有回声。
</code></pre></div> #### 8.2.7 sample_aec 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-284-1 id=__codelineno-284-1 name=__codelineno-284-1></a>本sample主要用来演示aec（回声消除）功能的使用。
<a href=#__codelineno-284-2 id=__codelineno-284-2 name=__codelineno-284-2></a>sample创建ao，播放音频文件作为回声。
<a href=#__codelineno-284-3 id=__codelineno-284-3 name=__codelineno-284-3></a>sample创建ai，接收外界声音（其中必然包括ao播放出的音频）。mpi_ai启动回声消除功能。
<a href=#__codelineno-284-4 id=__codelineno-284-4 name=__codelineno-284-4></a>sample从mpi_ai组件获取采集的数据保存为wav文件，在mpi_ai打开回声消除的情况下，wav文件应已过滤了ao播放的音
<a href=#__codelineno-284-5 id=__codelineno-284-5 name=__codelineno-284-5></a>乐。如果没有打开回声消除，wav文件会混合外界说话声和ao播放的音乐。
<a href=#__codelineno-284-6 id=__codelineno-284-6 name=__codelineno-284-6></a>sample也包含了DRC（软件增强音量）的测试。
<a href=#__codelineno-284-7 id=__codelineno-284-7 name=__codelineno-284-7></a>启用aec功能的方式如下：
<a href=#__codelineno-284-8 id=__codelineno-284-8 name=__codelineno-284-8></a>启用aec功能并不复杂，相比于不启用aec功能的操作，只是在设置ai dev属性时多了两个属性参数：
<a href=#__codelineno-284-9 id=__codelineno-284-9 name=__codelineno-284-9></a>1) ai_aec_en：是否使能aec。1：enable；0：disable。
<a href=#__codelineno-284-10 id=__codelineno-284-10 name=__codelineno-284-10></a>2) aec_delay_ms: aec算法用delay参数。单位：ms，建议先设为0。
<a href=#__codelineno-284-11 id=__codelineno-284-11 name=__codelineno-284-11></a>然后调用api：AW_MPI_AI_SetPubAttr()。
<a href=#__codelineno-284-12 id=__codelineno-284-12 name=__codelineno-284-12></a>音频回声消除（参考MPP媒体开发指南文档）
<a href=#__codelineno-284-13 id=__codelineno-284-13 name=__codelineno-284-13></a>内核驱动采集播放出的音频数据，提供接口供获取。AI 通道获取播放的音频数据作为音频参考帧，利用回声消除算法，消除
<a href=#__codelineno-284-14 id=__codelineno-284-14 name=__codelineno-284-14></a>采集的音频数据中的相同音频帧。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-285-1 id=__codelineno-285-1 name=__codelineno-285-1></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120174326973](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120174326973.png) <center>图 8-32: MPP_sample 测试通路-sample_aec</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-286-1 id=__codelineno-286-1 name=__codelineno-286-1></a>/mnt/extsd/sample_aoref_8000_ch1_bit16_aec_30s.wav
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-287-1 id=__codelineno-287-1 name=__codelineno-287-1></a>/mnt/extsd/ai_cap.wav
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-288-1 id=__codelineno-288-1 name=__codelineno-288-1></a>pcm_src_path：指定音频pcm文件的路径，该文件是包含wave头(大小为44Bytes)的wav格式文件，如果找不到这种格式
<a href=#__codelineno-288-2 id=__codelineno-288-2 name=__codelineno-288-2></a>文件，可以用sample_ai生成一个。
<a href=#__codelineno-288-3 id=__codelineno-288-3 name=__codelineno-288-3></a>pcm_dst_path：指定目标文件的路径，该文件是ai组件采集音频生成的文件，可配置是否带wav头，如果想在PC上播放音
<a href=#__codelineno-288-4 id=__codelineno-288-4 name=__codelineno-288-4></a>频文件，需带wav头。
<a href=#__codelineno-288-5 id=__codelineno-288-5 name=__codelineno-288-5></a>pcm_sample_rate：指定采样率，设置为文件中的采样率的值，启用aec后，sample rate须为8000.
<a href=#__codelineno-288-6 id=__codelineno-288-6 name=__codelineno-288-6></a>pcm_channel_cnt：指定通道数目，设置为文件中的通道数，启用aec后，sample rate须为1.
<a href=#__codelineno-288-7 id=__codelineno-288-7 name=__codelineno-288-7></a>pcm_bit_width：指定位宽，设置为文件中的位宽，启用aec后，bit_width须为16.
<a href=#__codelineno-288-8 id=__codelineno-288-8 name=__codelineno-288-8></a>pcm_frame_size：固定指定为1024。
<a href=#__codelineno-288-9 id=__codelineno-288-9 name=__codelineno-288-9></a>aec_en: 1:启动aec回声消除功能；0：不启用aec回声消除功能；
<a href=#__codelineno-288-10 id=__codelineno-288-10 name=__codelineno-288-10></a>aec_delay_ms： 启用aec回声消除功能时，设置的延迟时间，主要给aec回声消除算法使用，建议先设置为0；
<a href=#__codelineno-288-11 id=__codelineno-288-11 name=__codelineno-288-11></a>add_wav_header：保存pcm文件是否需要加wav头。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-289-1 id=__codelineno-289-1 name=__codelineno-289-1></a># cd /mnt/extsd/
<a href=#__codelineno-289-2 id=__codelineno-289-2 name=__codelineno-289-2></a># ./sample_aec -path ./sample_aec.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-290-1 id=__codelineno-290-1 name=__codelineno-290-1></a># sample_aec -path ./mnt/E/sample_aec.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-291-1 id=__codelineno-291-1 name=__codelineno-291-1></a>按“crtl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-292-1 id=__codelineno-292-1 name=__codelineno-292-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-292-2 id=__codelineno-292-2 name=__codelineno-292-2></a>2. 喇叭播放没有回声。
</code></pre></div> #### 8.2.8 sample_aenc 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-293-1 id=__codelineno-293-1 name=__codelineno-293-1></a>从pcm文件（如：test.wav）中读取每一桢的数据，进行编码，然后保存为aac/mp3/adpcm/pcm/g711a/g711u/g726格
<a href=#__codelineno-293-2 id=__codelineno-293-2 name=__codelineno-293-2></a>式的压缩文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-294-1 id=__codelineno-294-1 name=__codelineno-294-1></a>mpp_aenc
<a href=#__codelineno-294-2 id=__codelineno-294-2 name=__codelineno-294-2></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120174354642](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120174354642.png) <center>图 8-33: MPP_sample 测试通路-sample_aenc</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-295-1 id=__codelineno-295-1 name=__codelineno-295-1></a>/mnt/extsd/test.wav
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-296-1 id=__codelineno-296-1 name=__codelineno-296-1></a>/mnt/extsd/test.aac
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-297-1 id=__codelineno-297-1 name=__codelineno-297-1></a>sample_aenc_src_file：指定原始pcm文件的路径，该文件是包含wave头的wav格式文件。
<a href=#__codelineno-297-2 id=__codelineno-297-2 name=__codelineno-297-2></a>sample_aenc_dst_file：指定编码后生成的aac或mp3或其它格式文件的路径。注意指定的后缀名必须小写，用于指定编
<a href=#__codelineno-297-3 id=__codelineno-297-3 name=__codelineno-297-3></a>码方式，否则按aac格式来编码。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-298-1 id=__codelineno-298-1 name=__codelineno-298-1></a># cd /mnt/extsd/
<a href=#__codelineno-298-2 id=__codelineno-298-2 name=__codelineno-298-2></a># ./sample_aenc -path ./sample_aenc.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-299-1 id=__codelineno-299-1 name=__codelineno-299-1></a># sample_aenc -path ./mnt/E/sample_aenc.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-300-1 id=__codelineno-300-1 name=__codelineno-300-1></a>处理完wav 文件后，会自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-301-1 id=__codelineno-301-1 name=__codelineno-301-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-301-2 id=__codelineno-301-2 name=__codelineno-301-2></a>2. 音频编码生成文件test.aac 播放正常。
</code></pre></div> #### 8.2.9 sample_ai2aenc 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-302-1 id=__codelineno-302-1 name=__codelineno-302-1></a>mic录音送入编码器，取得每一帧数据的编码，写到文件中。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-303-1 id=__codelineno-303-1 name=__codelineno-303-1></a>mpp_aenc
<a href=#__codelineno-303-2 id=__codelineno-303-2 name=__codelineno-303-2></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120174615324](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120174615324.png) <center>图 8-34: MPP_sample 测试通路-sample_ai2aenc</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-304-1 id=__codelineno-304-1 name=__codelineno-304-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-305-1 id=__codelineno-305-1 name=__codelineno-305-1></a>/mnt/extsd/test.aac
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-306-1 id=__codelineno-306-1 name=__codelineno-306-1></a>dst_file：生成文件路径
<a href=#__codelineno-306-2 id=__codelineno-306-2 name=__codelineno-306-2></a>encoder_type：编码类型，如“aac”
<a href=#__codelineno-306-3 id=__codelineno-306-3 name=__codelineno-306-3></a>sample_rate：mic录音采样值
<a href=#__codelineno-306-4 id=__codelineno-306-4 name=__codelineno-306-4></a>channel_cnt: 录音通道数 (1 or 2)
<a href=#__codelineno-306-5 id=__codelineno-306-5 name=__codelineno-306-5></a>bit_width:录音采样位宽
<a href=#__codelineno-306-6 id=__codelineno-306-6 name=__codelineno-306-6></a>frame_size: 帧大小 (如：1024 / 2048)
<a href=#__codelineno-306-7 id=__codelineno-306-7 name=__codelineno-306-7></a>test_duration: sample一次测试时间(单位：s)
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-307-1 id=__codelineno-307-1 name=__codelineno-307-1></a># cd /mnt/extsd/
<a href=#__codelineno-307-2 id=__codelineno-307-2 name=__codelineno-307-2></a># ./sample_ai2aenc -path ./sample_ai2aenc.conf  
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-308-1 id=__codelineno-308-1 name=__codelineno-308-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-309-1 id=__codelineno-309-1 name=__codelineno-309-1></a>测试时间达到指定时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-310-1 id=__codelineno-310-1 name=__codelineno-310-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-310-2 id=__codelineno-310-2 name=__codelineno-310-2></a>2. 生成编码文件test.aac播放正常。
</code></pre></div> #### 8.2.10 sample_ai2aenc2muxer 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-311-1 id=__codelineno-311-1 name=__codelineno-311-1></a>根据配置参数采集对应的pcm数据，然后根据配置信息将pcm数据编码，最后写入到文件中进行保存。 
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-312-1 id=__codelineno-312-1 name=__codelineno-312-1></a>mpp_aenc mpp_aio 
</code></pre></div> 测试通路： ![image-20221120180717015](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120180717015.png) <center>图 8-35: MPP_sample 测试通路-sample_ai2aenc2muxer</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-313-1 id=__codelineno-313-1 name=__codelineno-313-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-314-1 id=__codelineno-314-1 name=__codelineno-314-1></a>/mnt/extsd/SampleAi2Aenc2Muxer_AiSaveFile.pcm
<a href=#__codelineno-314-2 id=__codelineno-314-2 name=__codelineno-314-2></a>/mnt/extsd/sample_ai2aenc2muxer_mono_16000.aac
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-315-1 id=__codelineno-315-1 name=__codelineno-315-1></a>dst_file：指定目标pcm文件的路径，该文件是包含wave头的wav格式文件。
<a href=#__codelineno-315-2 id=__codelineno-315-2 name=__codelineno-315-2></a>cap_dura：指定采集时间长度，单位：s。
<a href=#__codelineno-315-3 id=__codelineno-315-3 name=__codelineno-315-3></a>chn_cnt：指定通道数目，通常为1或2。
<a href=#__codelineno-315-4 id=__codelineno-315-4 name=__codelineno-315-4></a>bit_width：指定位宽，必须设置为16。
<a href=#__codelineno-315-5 id=__codelineno-315-5 name=__codelineno-315-5></a>smp_rate：指定采样率，通常设置为8000。
<a href=#__codelineno-315-6 id=__codelineno-315-6 name=__codelineno-315-6></a>bitRate：编码的码率，单位：bps。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-316-1 id=__codelineno-316-1 name=__codelineno-316-1></a># cd /mnt/extsd/
<a href=#__codelineno-316-2 id=__codelineno-316-2 name=__codelineno-316-2></a># ./sample_ai2aenc2muxer -path ./sample_ai2aenc2muxer.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-317-1 id=__codelineno-317-1 name=__codelineno-317-1></a># sample_ai2aenc2muxer -path ./mnt/E/sample_ai2aenc2muxer.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-318-1 id=__codelineno-318-1 name=__codelineno-318-1></a>测试时间达到指定时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-319-1 id=__codelineno-319-1 name=__codelineno-319-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-319-2 id=__codelineno-319-2 name=__codelineno-319-2></a>2. 生成文件sample_ai2aenc2muxer_mono_16000.aac 播放正常，同时抓取pcm 文件
<a href=#__codelineno-319-3 id=__codelineno-319-3 name=__codelineno-319-3></a>SampleAi2Aenc2Muxer_AiSaveFile.pcm。
</code></pre></div> #### 8.2.11 sample_select 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-320-1 id=__codelineno-320-1 name=__codelineno-320-1></a>演示AW_MPI_SYS_HANDLE_Select()的用法。
<a href=#__codelineno-320-2 id=__codelineno-320-2 name=__codelineno-320-2></a>从pcm文件（如：sample_aenc.wav）中读取每一桢的数据，进行不同编码类型同时编码，然后保存为aac/mp3/adpcm/
<a href=#__codelineno-320-3 id=__codelineno-320-3 name=__codelineno-320-3></a>pcm/g711a/g711u/g726格式的压缩文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-321-1 id=__codelineno-321-1 name=__codelineno-321-1></a>mpp_aenc
</code></pre></div> 测试通路： ![image-20221120180958916](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120180958916.png) <center>图 8-36: MPP_sample 测试通路-sample_select</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-322-1 id=__codelineno-322-1 name=__codelineno-322-1></a>/mnt/extsd/sample_select.wav 
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-323-1 id=__codelineno-323-1 name=__codelineno-323-1></a>/mnt/extsd/sample_select.aac 
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-324-1 id=__codelineno-324-1 name=__codelineno-324-1></a>sample_select_asrc_file：指定原始pcm文件的路径，该文件是包含wave头的wav格式文件。 
<a href=#__codelineno-324-2 id=__codelineno-324-2 name=__codelineno-324-2></a>
<a href=#__codelineno-324-3 id=__codelineno-324-3 name=__codelineno-324-3></a>sample_select_adst_file：指定编码后生成的aac/mp3/adpcm/pcm/g711a/g711u/g726格式文件的路径。 
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-325-1 id=__codelineno-325-1 name=__codelineno-325-1></a># cd /mnt/extsd/
<a href=#__codelineno-325-2 id=__codelineno-325-2 name=__codelineno-325-2></a># ./sample_select -path ./sample_select.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-326-1 id=__codelineno-326-1 name=__codelineno-326-1></a>暂不支持。 
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-327-1 id=__codelineno-327-1 name=__codelineno-327-1></a>测试完wav文件会自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-328-1 id=__codelineno-328-1 name=__codelineno-328-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-328-2 id=__codelineno-328-2 name=__codelineno-328-2></a>2. 生成aac 文件sample_select.aac 播放正常。
</code></pre></div> #### 8.2.12 sample_adec 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-329-1 id=__codelineno-329-1 name=__codelineno-329-1></a>从已编码的ADTS格式的AAC文件（如：test.aac）中读取每一桢的数据，进行解码，然后保存为WAV格式的pcm文件
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-330-1 id=__codelineno-330-1 name=__codelineno-330-1></a>mpp_adec
<a href=#__codelineno-330-2 id=__codelineno-330-2 name=__codelineno-330-2></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120181038350](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181038350.png) <center>图 8-37: MPP_sample 测试通路-sample_adec</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-331-1 id=__codelineno-331-1 name=__codelineno-331-1></a>/mnt/extsd/test.aac
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-332-1 id=__codelineno-332-1 name=__codelineno-332-1></a>/mnt/extsd/test.wav 
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-333-1 id=__codelineno-333-1 name=__codelineno-333-1></a>aac_file_path：指定原始已压缩的音频文件的路径，该文件必须为aac格式的文件。
<a href=#__codelineno-333-2 id=__codelineno-333-2 name=__codelineno-333-2></a>pcm_file_path：指定解码aac后生成的pcm文件的路径。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-334-1 id=__codelineno-334-1 name=__codelineno-334-1></a># cd /mnt/extsd/
<a href=#__codelineno-334-2 id=__codelineno-334-2 name=__codelineno-334-2></a># ./sample_adec -path ./sample_adec.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-335-1 id=__codelineno-335-1 name=__codelineno-335-1></a># sample_adec -path ./mnt/E/sample_adec.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-336-1 id=__codelineno-336-1 name=__codelineno-336-1></a>aac 文件处理完，会自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-337-1 id=__codelineno-337-1 name=__codelineno-337-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-337-2 id=__codelineno-337-2 name=__codelineno-337-2></a>2. 音频解码生成目标文件test.wav 播放正常。
</code></pre></div> #### 8.2.13 sample_adec2ao 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-338-1 id=__codelineno-338-1 name=__codelineno-338-1></a>从已编码的ADTS格式的AAC文件（如：test.aac）中读取每一桢的数据，进行解码，然后通过ao输出。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-339-1 id=__codelineno-339-1 name=__codelineno-339-1></a>mpp_adec
<a href=#__codelineno-339-2 id=__codelineno-339-2 name=__codelineno-339-2></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120181343452](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181343452.png) <center>图 8-38: MPP_sample 测试通路-sample_adec2ao</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-340-1 id=__codelineno-340-1 name=__codelineno-340-1></a>/mnt/extsd/test.aac
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-341-1 id=__codelineno-341-1 name=__codelineno-341-1></a>无 
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-342-1 id=__codelineno-342-1 name=__codelineno-342-1></a>audio_file_path: 指定音频文件路径。
<a href=#__codelineno-342-2 id=__codelineno-342-2 name=__codelineno-342-2></a>pcm_sample_rate: 指定pcm的采样率，单位: Hz。默认16000，表示16000Hz。对于g711和g726需要配置该值。
<a href=#__codelineno-342-3 id=__codelineno-342-3 name=__codelineno-342-3></a>pcm_channel_cnt: 指定pcm通道数，默认1，表示单通道。对于g711和g726需要配置该值。
<a href=#__codelineno-342-4 id=__codelineno-342-4 name=__codelineno-342-4></a>audio_data_type: 指定音频数据类型（g711a:19;g711u:20;aac:37;g726a:21,g726u:2000）。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-343-1 id=__codelineno-343-1 name=__codelineno-343-1></a># cd /mnt/extsd/
<a href=#__codelineno-343-2 id=__codelineno-343-2 name=__codelineno-343-2></a># ./sample_adec2ao -path ./sample_adec2ao.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-344-1 id=__codelineno-344-1 name=__codelineno-344-1></a>不支持
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-345-1 id=__codelineno-345-1 name=__codelineno-345-1></a>音频文件处理完，会自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-346-1 id=__codelineno-346-1 name=__codelineno-346-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-346-2 id=__codelineno-346-2 name=__codelineno-346-2></a>2. 音频解码后，输出声音正常。
</code></pre></div> #### 8.2.14 sample_demux2adec 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-347-1 id=__codelineno-347-1 name=__codelineno-347-1></a>根据配置参数读取视频文件，解封装，获取到音频数据后，送解码器，保存为wav文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-348-1 id=__codelineno-348-1 name=__codelineno-348-1></a>mpp_demuxer
<a href=#__codelineno-348-2 id=__codelineno-348-2 name=__codelineno-348-2></a>mpp_adec
</code></pre></div> 测试通路： ![image-20221120181400905](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181400905.png) <center>图 8-39: MPP_sample 测试通路-sample_demux2adec</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-349-1 id=__codelineno-349-1 name=__codelineno-349-1></a>/mnt/extsd/test.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-350-1 id=__codelineno-350-1 name=__codelineno-350-1></a>/mnt/extsd/output.wav
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-351-1 id=__codelineno-351-1 name=__codelineno-351-1></a>src_file：指定mp4视频文件的路径。
<a href=#__codelineno-351-2 id=__codelineno-351-2 name=__codelineno-351-2></a>dst_file：指定wav音频文件的路径。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-352-1 id=__codelineno-352-1 name=__codelineno-352-1></a># cd /mnt/extsd/
<a href=#__codelineno-352-2 id=__codelineno-352-2 name=__codelineno-352-2></a># ./sample_demux2adec -path ./sample_demux2adec.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-353-1 id=__codelineno-353-1 name=__codelineno-353-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-354-1 id=__codelineno-354-1 name=__codelineno-354-1></a>测试完文件test.mp4，可以自动退出测试
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-355-1 id=__codelineno-355-1 name=__codelineno-355-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-355-2 id=__codelineno-355-2 name=__codelineno-355-2></a>2. 生成音频文件output.wav 播放正常。
</code></pre></div> #### 8.2.15 sample_demux2adec2ao 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-356-1 id=__codelineno-356-1 name=__codelineno-356-1></a>根据配置参数读取视频文件，解封装，获取到音频数据后，送解码器，然后播放出声音，从耳机口或喇叭输出声
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-357-1 id=__codelineno-357-1 name=__codelineno-357-1></a>mpp_demuxer
<a href=#__codelineno-357-2 id=__codelineno-357-2 name=__codelineno-357-2></a>mpp_adec
<a href=#__codelineno-357-3 id=__codelineno-357-3 name=__codelineno-357-3></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120181418259](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181418259.png) <center>图 8-40: MPP_sample 测试通路-sample_demux2adec2ao</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-358-1 id=__codelineno-358-1 name=__codelineno-358-1></a>/mnt/extsd/test.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-359-1 id=__codelineno-359-1 name=__codelineno-359-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-360-1 id=__codelineno-360-1 name=__codelineno-360-1></a>src_file：指定mp4视频文件的路径
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-361-1 id=__codelineno-361-1 name=__codelineno-361-1></a># cd /mnt/extsd/
<a href=#__codelineno-361-2 id=__codelineno-361-2 name=__codelineno-361-2></a># ./sample_demux2adec2ao -path ./sample_demux2adec2ao.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-362-1 id=__codelineno-362-1 name=__codelineno-362-1></a># sample_demux2adec2ao -path ./mnt/E/sample_demux2adec2ao.con
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-363-1 id=__codelineno-363-1 name=__codelineno-363-1></a>测试完文件test.mp4，可以自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-364-1 id=__codelineno-364-1 name=__codelineno-364-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-364-2 id=__codelineno-364-2 name=__codelineno-364-2></a>2. 喇叭播放声音，声音正常。
</code></pre></div> ### 8.3 ISE 和 EIS #### 8.3.1 sample_fish 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-365-1 id=__codelineno-365-1 name=__codelineno-365-1></a>该sample测试mpi_ise组件单目鱼眼功能。
<a href=#__codelineno-365-2 id=__codelineno-365-2 name=__codelineno-365-2></a>创建ise组件，将图像传输给mpi_ise，ISE组件对图像进行校正，通过调用mpi获取ISE组件处理后的数据，到达指定次数后，停止运行并销毁ISE组件。也可以手动按ctrl-c，终止测试。
<a href=#__codelineno-365-3 id=__codelineno-365-3 name=__codelineno-365-3></a>如果需要获取ISE组件处理后的YUV数据，需要将sample_fish.c中的Save_Picture宏打开；如果需要在Normal模式下对PTZ参数进行调节，需要将sample_fish.c中的Dynamic_PTZ宏打开。
<a href=#__codelineno-365-4 id=__codelineno-365-4 name=__codelineno-365-4></a>ISE GDC补充说明：
<a href=#__codelineno-365-5 id=__codelineno-365-5 name=__codelineno-365-5></a>对于新增的ISE GDC算法，由于Warp_Ptz4In1这个模式要求输出分辨率是输入分辨率的两倍，而现有的2048原图对于内存以及硬件方面性能有所增加，所以针对Warp_Ptz4In1增加了一张1024原图以及sample_fish_ptz4in1.conf，若需要运行Warp_Ptz4In1这个模式可以使用fisheye_1024x1024.yuv420这张图像以及sample_fish_ptz4in1.conf。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-366-1 id=__codelineno-366-1 name=__codelineno-366-1></a>mpp_ise
<a href=#__codelineno-366-2 id=__codelineno-366-2 name=__codelineno-366-2></a>mpp_vdec
<a href=#__codelineno-366-3 id=__codelineno-366-3 name=__codelineno-366-3></a>mpp_hw_display
<a href=#__codelineno-366-4 id=__codelineno-366-4 name=__codelineno-366-4></a>mpp_vo
<a href=#__codelineno-366-5 id=__codelineno-366-5 name=__codelineno-366-5></a>mpp_adec
<a href=#__codelineno-366-6 id=__codelineno-366-6 name=__codelineno-366-6></a>mpp_demuxer
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-367-1 id=__codelineno-367-1 name=__codelineno-367-1></a>/mnt/extsd/fisheye_2048x2048.yuv42
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-368-1 id=__codelineno-368-1 name=__codelineno-368-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-369-1 id=__codelineno-369-1 name=__codelineno-369-1></a>在C源文件里面的ISE_GROUP_INS_CNT宏可以控制测试开启的Ise 实例数量，目前默认为2
<a href=#__codelineno-369-2 id=__codelineno-369-2 name=__codelineno-369-2></a>1.auto_test_count：指定自动化测试次数
<a href=#__codelineno-369-3 id=__codelineno-369-3 name=__codelineno-369-3></a>2.process_count: 指定ISE组件处理次数
<a href=#__codelineno-369-4 id=__codelineno-369-4 name=__codelineno-369-4></a>3.pic_width：指定源图像宽度
<a href=#__codelineno-369-5 id=__codelineno-369-5 name=__codelineno-369-5></a>4.pic_height：指定源图像高度
<a href=#__codelineno-369-6 id=__codelineno-369-6 name=__codelineno-369-6></a>5.pic_stride：指定源图像的stride值，该值必须是32的倍数
<a href=#__codelineno-369-7 id=__codelineno-369-7 name=__codelineno-369-7></a>6.pic_frame_rate：指定发送源图像的帧率
<a href=#__codelineno-369-8 id=__codelineno-369-8 name=__codelineno-369-8></a>7.pic_file_path：指定源图像的路径
<a href=#__codelineno-369-9 id=__codelineno-369-9 name=__codelineno-369-9></a>8.ise_dewarp_mode：指定单目鱼眼校正的模式，包括180模式(WARP_PANO180)/360度左右展开模式(WARP_PANO360
<a href=#__codelineno-369-10 id=__codelineno-369-10 name=__codelineno-369-10></a>)/PTZ模式(WARP_NORMAL)/畸变校正模式(WARP_UNDISTORT)/360度上下展开模式(WARP_180WITH2)
<a href=#__codelineno-369-11 id=__codelineno-369-11 name=__codelineno-369-11></a>9.ise_mount_mode：指定PTZ模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(MOUNT_WALL)/地装(
<a href=#__codelineno-369-12 id=__codelineno-369-12 name=__codelineno-369-12></a>MOUNT_BOTTOM)指定360度上下展开模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(MOUNT_WALL)指定360
<a href=#__codelineno-369-13 id=__codelineno-369-13 name=__codelineno-369-13></a>度左右展开模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(MOUNT_WALL)
<a href=#__codelineno-369-14 id=__codelineno-369-14 name=__codelineno-369-14></a>10.ise_normal_pan：左右移动的角度
<a href=#__codelineno-369-15 id=__codelineno-369-15 name=__codelineno-369-15></a>11.ise_normal_tilt：上下移动的角度
<a href=#__codelineno-369-16 id=__codelineno-369-16 name=__codelineno-369-16></a>12.ise_normal_zoom：镜头变焦倍数
<a href=#__codelineno-369-17 id=__codelineno-369-17 name=__codelineno-369-17></a>13.ise_port_num：指定ISE组件端口个数
<a href=#__codelineno-369-18 id=__codelineno-369-18 name=__codelineno-369-18></a>14.ise_output_file_path：指定ISE组件输出图像的路径
<a href=#__codelineno-369-19 id=__codelineno-369-19 name=__codelineno-369-19></a>15.ise_portx_width：指定校正处理后图像的宽度
<a href=#__codelineno-369-20 id=__codelineno-369-20 name=__codelineno-369-20></a>16.ise_portx_height：指定校正处理后图像的高度
<a href=#__codelineno-369-21 id=__codelineno-369-21 name=__codelineno-369-21></a>17.ise_portx_stride：指定校正处理后图像的stride值，该值必须是32的倍数
<a href=#__codelineno-369-22 id=__codelineno-369-22 name=__codelineno-369-22></a>18.ise_portx_flip_enable：指定是否使能图像翻转
<a href=#__codelineno-369-23 id=__codelineno-369-23 name=__codelineno-369-23></a>19.ise_portx_mirror_enable：指定是否使能图像镜像
<a href=#__codelineno-369-24 id=__codelineno-369-24 name=__codelineno-369-24></a>注：每个ISE端口图像翻转和镜像只能使能其中一个,测试时需要拷贝yuv文件到测试路径下面，程序默认打开程序所在文件夹
<a href=#__codelineno-369-25 id=__codelineno-369-25 name=__codelineno-369-25></a>的yuv文件。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-370-1 id=__codelineno-370-1 name=__codelineno-370-1></a># cd /mnt/extsd/
<a href=#__codelineno-370-2 id=__codelineno-370-2 name=__codelineno-370-2></a># ./sample_fish -path ./sample_fish.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-371-1 id=__codelineno-371-1 name=__codelineno-371-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-372-1 id=__codelineno-372-1 name=__codelineno-372-1></a>自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-373-1 id=__codelineno-373-1 name=__codelineno-373-1></a>1. 测试程序运行正常，测试过程没有异常打印
</code></pre></div> #### 8.3.2 sample_virvi2fish2venc 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-374-1 id=__codelineno-374-1 name=__codelineno-374-1></a>该sample测试mpi_vi、mpi_ise、mpi_venc组件的绑定组合。创建mpi_vi、mpi_ise和mpi_venc，将它们绑定，再分
<a href=#__codelineno-374-2 id=__codelineno-374-2 name=__codelineno-374-2></a>别启动。mpi_vi采集图像，传输给mpi_ise对鱼眼图像进行校正，mpi_ise将校正后的图像传给mpi_venc进行编
<a href=#__codelineno-374-3 id=__codelineno-374-3 name=__codelineno-374-3></a>码，同时保存裸码流视频文件
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-375-1 id=__codelineno-375-1 name=__codelineno-375-1></a>mpp_ise
</code></pre></div> 测试通路： ![image-20221120181530045](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181530045.png) <center>图 8-41: MPP_sample 测试通路-sample_virvi2fish2venc</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-376-1 id=__codelineno-376-1 name=__codelineno-376-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-377-1 id=__codelineno-377-1 name=__codelineno-377-1></a>/mnt/extsd/AW_FishEncoderVideoChn0.H26
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-378-1 id=__codelineno-378-1 name=__codelineno-378-1></a>1.auto_test_count：指定自动测试次数
<a href=#__codelineno-378-2 id=__codelineno-378-2 name=__codelineno-378-2></a>2.dev_id：指定VI Dev设备节点
<a href=#__codelineno-378-3 id=__codelineno-378-3 name=__codelineno-378-3></a>3.src_width：指定camera采集的图像宽度,由于VI模块硬件设计的原因,src_width必须是32的倍数
<a href=#__codelineno-378-4 id=__codelineno-378-4 name=__codelineno-378-4></a>4.src_height：指定camera采集的图像高度
<a href=#__codelineno-378-5 id=__codelineno-378-5 name=__codelineno-378-5></a>5.src_frame_rate：指定camera采集图像的帧率
<a href=#__codelineno-378-6 id=__codelineno-378-6 name=__codelineno-378-6></a>6.ISEPortNum：指定ISE组件端口个数
<a href=#__codelineno-378-7 id=__codelineno-378-7 name=__codelineno-378-7></a>7.ise_dewarp_mode：指定单目鱼眼校正的模式，包括180模式(WARP_PANO180)/360度左右展开模式(WARP_PANO360
<a href=#__codelineno-378-8 id=__codelineno-378-8 name=__codelineno-378-8></a>)/PTZ模式(WARP_NORMAL)/
<a href=#__codelineno-378-9 id=__codelineno-378-9 name=__codelineno-378-9></a>畸变校正模式(WARP_UNDISTORT)/360度上下展开模式(
<a href=#__codelineno-378-10 id=__codelineno-378-10 name=__codelineno-378-10></a>WARP_180WITH2)
<a href=#__codelineno-378-11 id=__codelineno-378-11 name=__codelineno-378-11></a>8.ise_mount_mode：指定PTZ模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(MOUNT_WALL)/地装(
<a href=#__codelineno-378-12 id=__codelineno-378-12 name=__codelineno-378-12></a>MOUNT_BOTTOM)
<a href=#__codelineno-378-13 id=__codelineno-378-13 name=__codelineno-378-13></a>指定360度上下展开模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(
<a href=#__codelineno-378-14 id=__codelineno-378-14 name=__codelineno-378-14></a>MOUNT_WALL)
<a href=#__codelineno-378-15 id=__codelineno-378-15 name=__codelineno-378-15></a>指定360度左右展开模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(
<a href=#__codelineno-378-16 id=__codelineno-378-16 name=__codelineno-378-16></a>MOUNT_WALL)
<a href=#__codelineno-378-17 id=__codelineno-378-17 name=__codelineno-378-17></a>9.ise_normal_pan：左右移动的角度
<a href=#__codelineno-378-18 id=__codelineno-378-18 name=__codelineno-378-18></a>10.ise_normal_tilt：上下移动的角度
<a href=#__codelineno-378-19 id=__codelineno-378-19 name=__codelineno-378-19></a>11.ise_normal_zoom：镜头变焦倍数
<a href=#__codelineno-378-20 id=__codelineno-378-20 name=__codelineno-378-20></a>12.ise_portx_width：指定校正后图像的宽度
<a href=#__codelineno-378-21 id=__codelineno-378-21 name=__codelineno-378-21></a>13.ise_portx_height：指定校正后图像的高度
<a href=#__codelineno-378-22 id=__codelineno-378-22 name=__codelineno-378-22></a>14.ise_portx_stride：指定校正后图像的stride值，该值必须是32的倍数
<a href=#__codelineno-378-23 id=__codelineno-378-23 name=__codelineno-378-23></a>15.ise_portx_flip_enable：指定是否使能图像翻转
<a href=#__codelineno-378-24 id=__codelineno-378-24 name=__codelineno-378-24></a>16.ise_portx_mirror_enable：指定是否使能图像镜像
<a href=#__codelineno-378-25 id=__codelineno-378-25 name=__codelineno-378-25></a>17.VencChnNum：指定VENC组件通道个数
<a href=#__codelineno-378-26 id=__codelineno-378-26 name=__codelineno-378-26></a>18.encoder_type：指定编码格式
<a href=#__codelineno-378-27 id=__codelineno-378-27 name=__codelineno-378-27></a>19.encoder_count：指定每次测试编码帧数，-1为循环编码，不退出sample_virvi2fish2venc
<a href=#__codelineno-378-28 id=__codelineno-378-28 name=__codelineno-378-28></a>20.picture_format：指定编码后图像的格式
<a href=#__codelineno-378-29 id=__codelineno-378-29 name=__codelineno-378-29></a>21.venc_chnx_dest_width：指定编码后图像的宽度
<a href=#__codelineno-378-30 id=__codelineno-378-30 name=__codelineno-378-30></a>22.venc_chnx_dest_height：指定编码后图像的高度
<a href=#__codelineno-378-31 id=__codelineno-378-31 name=__codelineno-378-31></a>23.venc_chnx_dest_frame_rate：指定编码帧率
<a href=#__codelineno-378-32 id=__codelineno-378-32 name=__codelineno-378-32></a>24.venc_chnx_dest_bit_rate：指定编码码率
<a href=#__codelineno-378-33 id=__codelineno-378-33 name=__codelineno-378-33></a>25.venc_chnx_output_file_path：指定编码后视频文件的路径
<a href=#__codelineno-378-34 id=__codelineno-378-34 name=__codelineno-378-34></a>注：每个ISE端口图像翻转和镜像只能使能一个其中一个
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-379-1 id=__codelineno-379-1 name=__codelineno-379-1></a># cd /mnt/extsd/
<a href=#__codelineno-379-2 id=__codelineno-379-2 name=__codelineno-379-2></a># ./sample_virvi2fish2venc -path ./sample_virvi2fish2venc.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-380-1 id=__codelineno-380-1 name=__codelineno-380-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-381-1 id=__codelineno-381-1 name=__codelineno-381-1></a>测试达到设定的时间后自动退出测试
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-382-1 id=__codelineno-382-1 name=__codelineno-382-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-382-2 id=__codelineno-382-2 name=__codelineno-382-2></a>2. 使用VLC播放测试生成的目标文件/mnt/extsd/AW_FishEncoderVideoChn0.H264 正常。
</code></pre></div> 测试说明： <div class=highlight><pre><span></span><code><a href=#__codelineno-383-1 id=__codelineno-383-1 name=__codelineno-383-1></a>由于硬件设计的原因，一个ISE组件对应一个Group，一个Group最多可以创建4个Port，其中Port 0为ISE硬件模块处理后
<a href=#__codelineno-383-2 id=__codelineno-383-2 name=__codelineno-383-2></a>输出的图像，Port 1~Port 3是对Port 0输出的图像进行缩放而得到的。
<a href=#__codelineno-383-3 id=__codelineno-383-3 name=__codelineno-383-3></a>Group创建完后必须创建Port 0，Port 1~ Port3可以根据实际需要依次创建，Port 1~Port 3支持无极缩放，图像缩
<a href=#__codelineno-383-4 id=__codelineno-383-4 name=__codelineno-383-4></a>放的范围为Port 0宽高的1/8 ~ 1，各个Port之间相互独立，互不影响。
<a href=#__codelineno-383-5 id=__codelineno-383-5 name=__codelineno-383-5></a>ISE组件端口ID号和VENC组件通道ID号一一对应，ISE组件端口个数必须与VENC组件通道个数相等。
</code></pre></div> #### 8.3.3 sample_virvi2fish2vo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-384-1 id=__codelineno-384-1 name=__codelineno-384-1></a>该sample测试mpi_vi、mpi_ise、mpi_vo组件的绑定组合。创建mpi_vi、mpi_ise和mpi_vo，将它们绑定，再分别启
<a href=#__codelineno-384-2 id=__codelineno-384-2 name=__codelineno-384-2></a>动。mpi_vi采集图像，传输给mpi_ise对鱼眼图像进行校正，mpi_ise将校正后的图像传给mpi_vo进行显示预览。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-385-1 id=__codelineno-385-1 name=__codelineno-385-1></a>mpp_hw_display
<a href=#__codelineno-385-2 id=__codelineno-385-2 name=__codelineno-385-2></a>mpp_vo
<a href=#__codelineno-385-3 id=__codelineno-385-3 name=__codelineno-385-3></a>mpp_ise
</code></pre></div> 测试通路： ![image-20221120181611709](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181611709.png) <center>图 8-42: MPP_sample 测试通路-sample_virvi2fish2vo</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-386-1 id=__codelineno-386-1 name=__codelineno-386-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-387-1 id=__codelineno-387-1 name=__codelineno-387-1></a>/mnt/extsd/isp0_1920_1080_60_ctx_saved.bi
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-388-1 id=__codelineno-388-1 name=__codelineno-388-1></a>1.auto_test_count：指定自动化测试次数
<a href=#__codelineno-388-2 id=__codelineno-388-2 name=__codelineno-388-2></a>2.dev_id：指定VI Dev设备节点
<a href=#__codelineno-388-3 id=__codelineno-388-3 name=__codelineno-388-3></a>3.src_width：指定camera采集的图像宽度,由于VI模块硬件设计的原因,src_width必须是32的倍数
<a href=#__codelineno-388-4 id=__codelineno-388-4 name=__codelineno-388-4></a>4.src_height：指定camera采集的图像高度
<a href=#__codelineno-388-5 id=__codelineno-388-5 name=__codelineno-388-5></a>5.src_frame_rate：指定camera采集图像的帧率
<a href=#__codelineno-388-6 id=__codelineno-388-6 name=__codelineno-388-6></a>6.ise_dewarp_mode：指定单目鱼眼校正的模式，包括180模式(WARP_PANO180)/360度左右展开模式(WARP_PANO360
<a href=#__codelineno-388-7 id=__codelineno-388-7 name=__codelineno-388-7></a>)/Normal模式(WARP_NORMAL)/畸变校正模式(WARP_UNDISTORT)/360度上下展开模式(WARP_180WITH2)
<a href=#__codelineno-388-8 id=__codelineno-388-8 name=__codelineno-388-8></a>7.ise_mount_mode：指定Normal模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(MOUNT_WALL)/地装(
<a href=#__codelineno-388-9 id=__codelineno-388-9 name=__codelineno-388-9></a>MOUNT_BOTTOM)指定360度上下展开模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(MOUNT_WALL)指定360
<a href=#__codelineno-388-10 id=__codelineno-388-10 name=__codelineno-388-10></a>度左右展开模式下镜头的安装方式，包括顶装(MOUNT_TOP)/壁装(MOUNT_WALL)
<a href=#__codelineno-388-11 id=__codelineno-388-11 name=__codelineno-388-11></a>8.ise_normal_pan：左右移动的角度
<a href=#__codelineno-388-12 id=__codelineno-388-12 name=__codelineno-388-12></a>9.ise_normal_tilt：上下移动的角度
<a href=#__codelineno-388-13 id=__codelineno-388-13 name=__codelineno-388-13></a>10.ise_normal_zoom：镜头变焦倍数
<a href=#__codelineno-388-14 id=__codelineno-388-14 name=__codelineno-388-14></a>11.ise_width：指定校正后图像的宽度
<a href=#__codelineno-388-15 id=__codelineno-388-15 name=__codelineno-388-15></a>12.ise_height：指定校正后图像的高度
<a href=#__codelineno-388-16 id=__codelineno-388-16 name=__codelineno-388-16></a>13.ise_stride：指定校正后图像的stride值，该值必须是32的倍数
<a href=#__codelineno-388-17 id=__codelineno-388-17 name=__codelineno-388-17></a>14.ise_flip_enable：指定是否使能图像翻转
<a href=#__codelineno-388-18 id=__codelineno-388-18 name=__codelineno-388-18></a>15.ise_mirror_enable：指定是否使能图像镜像
<a href=#__codelineno-388-19 id=__codelineno-388-19 name=__codelineno-388-19></a>16.display_width：指定显示宽度
<a href=#__codelineno-388-20 id=__codelineno-388-20 name=__codelineno-388-20></a>17.display_height：指定显示高度
<a href=#__codelineno-388-21 id=__codelineno-388-21 name=__codelineno-388-21></a>18.vo_test_duration：指定测试时间，0为循环显示，不退出sample_virvi2fish2vo
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-389-1 id=__codelineno-389-1 name=__codelineno-389-1></a># cd /mnt/extsd/
<a href=#__codelineno-389-2 id=__codelineno-389-2 name=__codelineno-389-2></a># ./sample_virvi2fish2vo -path ./sample_virvi2fish2vo.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-390-1 id=__codelineno-390-1 name=__codelineno-390-1></a># sample_virvi2fish2vo -path ./mnt/E/sample_virvi2fish2vo.con
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-391-1 id=__codelineno-391-1 name=__codelineno-391-1></a>不自动退出测试，需要“ctrl + c” 退出测试
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-392-1 id=__codelineno-392-1 name=__codelineno-392-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-392-2 id=__codelineno-392-2 name=__codelineno-392-2></a>2. LCD屏幕实时显示Camera 采集的视频图像正常
</code></pre></div> #### 8.3.4 sample_virvi2eis2venc 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-393-1 id=__codelineno-393-1 name=__codelineno-393-1></a>该例程用于测试防抖相关功能。支持离线仿真、在线调试模式，支持绑定、非绑定的组件形式。
<a href=#__codelineno-393-2 id=__codelineno-393-2 name=__codelineno-393-2></a>1. 使用 config.mk 文件里面的 EIS_OFFLINE_SIMU ＝ Y/N 来控制是否使用离线仿真模式。
<a href=#__codelineno-393-3 id=__codelineno-393-3 name=__codelineno-393-3></a>2. 使用 config.mk 文件里面的 EIS_MULTI_INSTANCE ＝ Y/N 来控制是否使用防抖多实例模式。
<a href=#__codelineno-393-4 id=__codelineno-393-4 name=__codelineno-393-4></a>3. Bypass 模式需要修改根目录下的下面注释（用于旁路防抖输出的视频数据，通常用于防抖调试或者仿真的数据采集）：
<a href=#__codelineno-393-5 id=__codelineno-393-5 name=__codelineno-393-5></a>#if 0
<a href=#__codelineno-393-6 id=__codelineno-393-6 name=__codelineno-393-6></a>    ViEisVencCfg.EisCfg.stEisAttr.eEisAlgoMode = EIS_ALGO_MODE_B
<a href=#__codelineno-393-7 id=__codelineno-393-7 name=__codelineno-393-7></a>    ViEisVencCfg.EisCfg.stEisAttr.pBPDataSavePath = "/tmp";
<a href=#__codelineno-393-8 id=__codelineno-393-8 name=__codelineno-393-8></a>    ViEisVencCfg.EisCfg.stEisAttr.bSaveYUV = 0;
<a href=#__codelineno-393-9 id=__codelineno-393-9 name=__codelineno-393-9></a>#endif
<a href=#__codelineno-393-10 id=__codelineno-393-10 name=__codelineno-393-10></a>并且该模式必须全部关闭 VO 打开编码，也就是 use_vo = 0，use_venc = 1
<a href=#__codelineno-393-11 id=__codelineno-393-11 name=__codelineno-393-11></a>4. 使用 #define EIS_BYPASS_VENC 宏定义来控制是否开启离线模式下的编码，如果定义了该宏，那么会直接输出
<a href=#__codelineno-393-12 id=__codelineno-393-12 name=__codelineno-393-12></a>YUV 文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-394-1 id=__codelineno-394-1 name=__codelineno-394-1></a>mpp_eis
<a href=#__codelineno-394-2 id=__codelineno-394-2 name=__codelineno-394-2></a>mpp_hw_display
<a href=#__codelineno-394-3 id=__codelineno-394-3 name=__codelineno-394-3></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120181719046](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181719046.png) <center>图 8-43: MPP_sample 测试通路-sample_virvi2eis2venc</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-395-1 id=__codelineno-395-1 name=__codelineno-395-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-396-1 id=__codelineno-396-1 name=__codelineno-396-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-397-1 id=__codelineno-397-1 name=__codelineno-397-1></a>reboot_cnt = 1000 #仅用于在线模式，控制重启测试的次数
<a href=#__codelineno-397-2 id=__codelineno-397-2 name=__codelineno-397-2></a>frame_cnt = 150 #控制采集的视频帧数
<a href=#__codelineno-397-3 id=__codelineno-397-3 name=__codelineno-397-3></a>input_bufnum = 10 #输入 buffer 的数量，目前调试阶段建议值至少为 11
<a href=#__codelineno-397-4 id=__codelineno-397-4 name=__codelineno-397-4></a>output_bufnum = 5 #输出 buffer 的数量，目前调试阶段建议值至少为 10
<a href=#__codelineno-397-5 id=__codelineno-397-5 name=__codelineno-397-5></a>time_delay = 0 #控制陀螺仪与视频帧的时间戳对齐偏移，目前推荐 -33
<a href=#__codelineno-397-6 id=__codelineno-397-6 name=__codelineno-397-6></a>sync_tolerance = 1 #时间戳对齐的容忍度，建议值 5 以内，不能为 0
<a href=#__codelineno-397-7 id=__codelineno-397-7 name=__codelineno-397-7></a># src parameter
<a href=#__codelineno-397-8 id=__codelineno-397-8 name=__codelineno-397-8></a># dev number:0(CSI0)/1(CSI1)
<a href=#__codelineno-397-9 id=__codelineno-397-9 name=__codelineno-397-9></a># cap_width * cap_height:720p/1080p;
<a href=#__codelineno-397-10 id=__codelineno-397-10 name=__codelineno-397-10></a># fps: 30
<a href=#__codelineno-397-11 id=__codelineno-397-11 name=__codelineno-397-11></a>video_dev = 1 #仅用于在线模式，控制采集视频的节点
<a href=#__codelineno-397-12 id=__codelineno-397-12 name=__codelineno-397-12></a>cap_width = 1920 #仅用于在线模式，控制采集视频的分辨率
<a href=#__codelineno-397-13 id=__codelineno-397-13 name=__codelineno-397-13></a>cap_height = 1080
<a href=#__codelineno-397-14 id=__codelineno-397-14 name=__codelineno-397-14></a>fps = 30
<a href=#__codelineno-397-15 id=__codelineno-397-15 name=__codelineno-397-15></a>Vo 如果与编码同时打开，则 Vo 是优先的，也就是编码的使能选项会被 VO 的使能选项覆盖掉。
<a href=#__codelineno-397-16 id=__codelineno-397-16 name=__codelineno-397-16></a># VO, type: [lcd]\[hdmi]
<a href=#__codelineno-397-17 id=__codelineno-397-17 name=__codelineno-397-17></a>use_vo = 1 # 仅用于在线模式，控制是否开启视频实时预览（在多实例模式下该选项无效，强制打开）
<a href=#__codelineno-397-18 id=__codelineno-397-18 name=__codelineno-397-18></a>disp_w = 1920 # 仅用于在线模式，控制视频显示的分辨率
<a href=#__codelineno-397-19 id=__codelineno-397-19 name=__codelineno-397-19></a>disp_h = 1080
<a href=#__codelineno-397-20 id=__codelineno-397-20 name=__codelineno-397-20></a>disp_type = "hdmi" # 仅用于在线模式，视频显示的终端类型
<a href=#__codelineno-397-21 id=__codelineno-397-21 name=__codelineno-397-21></a># VENC: default use EIS output size
<a href=#__codelineno-397-22 id=__codelineno-397-22 name=__codelineno-397-22></a>use_venc = 0 # 在多实例模式下该选项无效，强制打开，离线仿真模式下该选项使用 EIS_BYPASS_VENC 来控
<a href=#__codelineno-397-23 id=__codelineno-397-23 name=__codelineno-397-23></a>制。
<a href=#__codelineno-397-24 id=__codelineno-397-24 name=__codelineno-397-24></a># VENC save file and offline simulation mode save file path.
<a href=#__codelineno-397-25 id=__codelineno-397-25 name=__codelineno-397-25></a>save_file = "/mnt/extsd/SampleEis2Venc.H264" # 控制编码输出文件的保存位置（离线模式如果不开编码则默
<a href=#__codelineno-397-26 id=__codelineno-397-26 name=__codelineno-397-26></a>认保存在 /tmp 目录下，路径为：/tmp/SampleEis2File.yuv）
<a href=#__codelineno-397-27 id=__codelineno-397-27 name=__codelineno-397-27></a>gyro_file = "/mnt/extsd/SampleEis2VencGyro.txt" #仅用于离线模式，指定输入的陀螺仪数据文件
<a href=#__codelineno-397-28 id=__codelineno-397-28 name=__codelineno-397-28></a>video_file = "/mnt/extsd/SampleEis2VencVideo.yuv" #仅用于离线模式，指定输入的视频数据文件
<a href=#__codelineno-397-29 id=__codelineno-397-29 name=__codelineno-397-29></a>timestamp_file = "/mnt/extsd/SampleEis2VencTs.txt" #仅用于离线模式，指定输入的视频的时间戳数据文件
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-398-1 id=__codelineno-398-1 name=__codelineno-398-1></a># cd /mnt/extsd/
<a href=#__codelineno-398-2 id=__codelineno-398-2 name=__codelineno-398-2></a># ./sample_virvi2eis2venc -path ./sample_virvi2eis2venc.co  
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-399-1 id=__codelineno-399-1 name=__codelineno-399-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-400-1 id=__codelineno-400-1 name=__codelineno-400-1></a>按“ctrl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-401-1 id=__codelineno-401-1 name=__codelineno-401-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-401-2 id=__codelineno-401-2 name=__codelineno-401-2></a>2. 测试防抖功能正常。
</code></pre></div> #### 8.3.5 sample_ise_dzoom 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-402-1 id=__codelineno-402-1 name=__codelineno-402-1></a>该sample测试使用ise实现dzoom功能。
<a href=#__codelineno-402-2 id=__codelineno-402-2 name=__codelineno-402-2></a>需要注意的是，此功能需要使用gdc算法库，因此必须在启用mpp ise组件时，勾选gdc算法库。在此sample中，VI组件与
<a href=#__codelineno-402-3 id=__codelineno-402-3 name=__codelineno-402-3></a>ISE通过绑定的方式，向ISE组件输入YUV数据。ISE组件的输出使用非绑定模式，手动获取ISE数据送入VO组件。通过
<a href=#__codelineno-402-4 id=__codelineno-402-4 name=__codelineno-402-4></a>设置配置文件中的display_rotation可设置g2d旋转。通过设置set_crop，sample会起一个线程取测试动态设置
<a href=#__codelineno-402-5 id=__codelineno-402-5 name=__codelineno-402-5></a>crop到ISE组件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-403-1 id=__codelineno-403-1 name=__codelineno-403-1></a>mpp_vi
<a href=#__codelineno-403-2 id=__codelineno-403-2 name=__codelineno-403-2></a>mpp_hw_display
<a href=#__codelineno-403-3 id=__codelineno-403-3 name=__codelineno-403-3></a>mpp_vo
<a href=#__codelineno-403-4 id=__codelineno-403-4 name=__codelineno-403-4></a>mpp_ise
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-404-1 id=__codelineno-404-1 name=__codelineno-404-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-405-1 id=__codelineno-405-1 name=__codelineno-405-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-406-1 id=__codelineno-406-1 name=__codelineno-406-1></a>dev_id：指定VI Dev设备节点
<a href=#__codelineno-406-2 id=__codelineno-406-2 name=__codelineno-406-2></a>src_width：指定camera采集的图像宽度,由于VI模块硬件设计的原因,src_width必须是32的倍数
<a href=#__codelineno-406-3 id=__codelineno-406-3 name=__codelineno-406-3></a>src_height：指定camera采集的图像高度
<a href=#__codelineno-406-4 id=__codelineno-406-4 name=__codelineno-406-4></a>src_frame_rate：指定camera采集图像的帧率
<a href=#__codelineno-406-5 id=__codelineno-406-5 name=__codelineno-406-5></a>display_width：指定显示宽度
<a href=#__codelineno-406-6 id=__codelineno-406-6 name=__codelineno-406-6></a>display_height：指定显示高度
<a href=#__codelineno-406-7 id=__codelineno-406-7 name=__codelineno-406-7></a>display_rotation: 图像旋转角度
<a href=#__codelineno-406-8 id=__codelineno-406-8 name=__codelineno-406-8></a>ise_width：指定校正后图像的宽度
<a href=#__codelineno-406-9 id=__codelineno-406-9 name=__codelineno-406-9></a>ise_height：指定校正后图像的高度
<a href=#__codelineno-406-10 id=__codelineno-406-10 name=__codelineno-406-10></a>ise_stride：指定校正后图像的stride值，该值必须是32的倍数
<a href=#__codelineno-406-11 id=__codelineno-406-11 name=__codelineno-406-11></a>ise_ldc_zoom_h：水平视场角的缩放尺度
<a href=#__codelineno-406-12 id=__codelineno-406-12 name=__codelineno-406-12></a>ise_ldc_zoom_v：垂直视角场的缩放尺度
<a href=#__codelineno-406-13 id=__codelineno-406-13 name=__codelineno-406-13></a>ise_ldc_center_offset_x：图像中心点相对物理中心点的水平偏移
<a href=#__codelineno-406-14 id=__codelineno-406-14 name=__codelineno-406-14></a>ise_ldc_center_offset_y：图像中心点相对物理中心点的竖直偏移
<a href=#__codelineno-406-15 id=__codelineno-406-15 name=__codelineno-406-15></a>test_crop：测试动态设置crop
<a href=#__codelineno-406-16 id=__codelineno-406-16 name=__codelineno-406-16></a>test_duration：指定测试时间，0为循环显示，不退出sample_ise_dzoom
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-407-1 id=__codelineno-407-1 name=__codelineno-407-1></a># cd /mnt/extsd/
<a href=#__codelineno-407-2 id=__codelineno-407-2 name=__codelineno-407-2></a># ./sample_ise_dzoom -path ./sample_ise_dzoom.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-408-1 id=__codelineno-408-1 name=__codelineno-408-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-409-1 id=__codelineno-409-1 name=__codelineno-409-1></a>达到设定的测试时间后，自动退出测试
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-410-1 id=__codelineno-410-1 name=__codelineno-410-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-410-2 id=__codelineno-410-2 name=__codelineno-410-2></a>2. 通过VO设备查看缩放效果正常
</code></pre></div> #### 8.3.6 sample_gdc_dzoom 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-411-1 id=__codelineno-411-1 name=__codelineno-411-1></a>该sample测试使用gdc算法库实现dzoom功能。
<a href=#__codelineno-411-2 id=__codelineno-411-2 name=__codelineno-411-2></a>需要内核打开ISE硬件驱动，并在menuconfig中勾选gdc算法库。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-412-1 id=__codelineno-412-1 name=__codelineno-412-1></a>mpp_gdc
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-413-1 id=__codelineno-413-1 name=__codelineno-413-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-414-1 id=__codelineno-414-1 name=__codelineno-414-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-415-1 id=__codelineno-415-1 name=__codelineno-415-1></a>src_pic_width： 源图片宽度
<a href=#__codelineno-415-2 id=__codelineno-415-2 name=__codelineno-415-2></a>src_pic_height：源图片高度
<a href=#__codelineno-415-3 id=__codelineno-415-3 name=__codelineno-415-3></a>src_pic_format：源图片格式
<a href=#__codelineno-415-4 id=__codelineno-415-4 name=__codelineno-415-4></a>src_pic_stride: 源图片Y分量存储宽度
<a href=#__codelineno-415-5 id=__codelineno-415-5 name=__codelineno-415-5></a>src_file_path: 原图片文件路径
<a href=#__codelineno-415-6 id=__codelineno-415-6 name=__codelineno-415-6></a>dst_pic_width： 输出图片宽度(需32位对齐)
<a href=#__codelineno-415-7 id=__codelineno-415-7 name=__codelineno-415-7></a>dst_pic_height: 输出图片高度
<a href=#__codelineno-415-8 id=__codelineno-415-8 name=__codelineno-415-8></a>dst_pic_format: 输出图片格式
<a href=#__codelineno-415-9 id=__codelineno-415-9 name=__codelineno-415-9></a>dst_pic_stride: 输出图片Y分量存储宽度
<a href=#__codelineno-415-10 id=__codelineno-415-10 name=__codelineno-415-10></a>dst_file_path: 输出图片文件路径
<a href=#__codelineno-415-11 id=__codelineno-415-11 name=__codelineno-415-11></a>crop_x: crop区域横坐标
<a href=#__codelineno-415-12 id=__codelineno-415-12 name=__codelineno-415-12></a>crop_y: crop区域纵坐标
<a href=#__codelineno-415-13 id=__codelineno-415-13 name=__codelineno-415-13></a>crop_w：crop区域宽度
<a href=#__codelineno-415-14 id=__codelineno-415-14 name=__codelineno-415-14></a>crop_h：crop区域高度
<a href=#__codelineno-415-15 id=__codelineno-415-15 name=__codelineno-415-15></a>warp_mode: gdc工作模式
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-416-1 id=__codelineno-416-1 name=__codelineno-416-1></a># cd /mnt/extsd/
<a href=#__codelineno-416-2 id=__codelineno-416-2 name=__codelineno-416-2></a># ./sample_gdc_dzoom -path ./sample_gdc_dzoom.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-417-1 id=__codelineno-417-1 name=__codelineno-417-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-418-1 id=__codelineno-418-1 name=__codelineno-418-1></a>达到设定的测试时间后，自动退出测试
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-419-1 id=__codelineno-419-1 name=__codelineno-419-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-419-2 id=__codelineno-419-2 name=__codelineno-419-2></a>2. 通过VO设备查看缩放效果正常。
</code></pre></div> ### 8.4 视频显示 #### 8.4.1 sample_vo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-420-1 id=__codelineno-420-1 name=__codelineno-420-1></a>从yuv原始数据文件xxx.yuv中读取视频帧，标记时间戳，送给mpi_vo组件显示。
<a href=#__codelineno-420-2 id=__codelineno-420-2 name=__codelineno-420-2></a>sample_vo也负责视频帧的帧管理，接收mpi_vo组件归还的视频帧，重装新帧，再送入mpi_vo组件显示。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-421-1 id=__codelineno-421-1 name=__codelineno-421-1></a>mpp_hw_display
<a href=#__codelineno-421-2 id=__codelineno-421-2 name=__codelineno-421-2></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120181754900](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181754900.png) <center>图 8-44: MPP_sample 测试通路-sample_vo</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-422-1 id=__codelineno-422-1 name=__codelineno-422-1></a>/mnt/extsd/resources/Tennis_1920x1080_24.yuv
<a href=#__codelineno-422-2 id=__codelineno-422-2 name=__codelineno-422-2></a>测试需要的yuv 文件，可以用ffmpeg 转换得到，转换指令：
<a href=#__codelineno-422-3 id=__codelineno-422-3 name=__codelineno-422-3></a>./ffmpeg -i two_video.mp4 Tennis_1920x1080_24.yu
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-423-1 id=__codelineno-423-1 name=__codelineno-423-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-424-1 id=__codelineno-424-1 name=__codelineno-424-1></a>yuv_file_path：指定yuv原始数据文件的路径。
<a href=#__codelineno-424-2 id=__codelineno-424-2 name=__codelineno-424-2></a>pic_width：指明yuv原始数据文件的视频帧的宽度
<a href=#__codelineno-424-3 id=__codelineno-424-3 name=__codelineno-424-3></a>pic_height：指明yuv原始数据文件的视频帧的高度
<a href=#__codelineno-424-4 id=__codelineno-424-4 name=__codelineno-424-4></a>display_width：指定输出图像的宽度
<a href=#__codelineno-424-5 id=__codelineno-424-5 name=__codelineno-424-5></a>display_height：指定输出图像的高度
<a href=#__codelineno-424-6 id=__codelineno-424-6 name=__codelineno-424-6></a>pic_format:指明yuv原始数据文件的视频帧的像素格式
<a href=#__codelineno-424-7 id=__codelineno-424-7 name=__codelineno-424-7></a>disp_type：指定显示设备类型（hdmi, lcd, cvbs）
<a href=#__codelineno-424-8 id=__codelineno-424-8 name=__codelineno-424-8></a>frame_rate：指定播放yuv原始数据文件的帧率
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-425-1 id=__codelineno-425-1 name=__codelineno-425-1></a># cd /mnt/extsd/
<a href=#__codelineno-425-2 id=__codelineno-425-2 name=__codelineno-425-2></a># ./sample_vo -path ./sample_vo.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-426-1 id=__codelineno-426-1 name=__codelineno-426-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-427-1 id=__codelineno-427-1 name=__codelineno-427-1></a>播放完yuv 文件后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-428-1 id=__codelineno-428-1 name=__codelineno-428-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-428-2 id=__codelineno-428-2 name=__codelineno-428-2></a>2. LCD屏幕显示播放yuv 文件的视频图像正常。
</code></pre></div> #### 8.4.2 sample_UILayer 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-429-1 id=__codelineno-429-1 name=__codelineno-429-1></a>测试UILayer的格式。
<a href=#__codelineno-429-2 id=__codelineno-429-2 name=__codelineno-429-2></a>sample自己创建指定格式的RGB图，设置给UILayer。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-430-1 id=__codelineno-430-1 name=__codelineno-430-1></a>mpp_hw_display
<a href=#__codelineno-430-2 id=__codelineno-430-2 name=__codelineno-430-2></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120181823704](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181823704.png) <center>图 8-45: MPP_sample 测试通路-sample_UILayer</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-431-1 id=__codelineno-431-1 name=__codelineno-431-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-432-1 id=__codelineno-432-1 name=__codelineno-432-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-433-1 id=__codelineno-433-1 name=__codelineno-433-1></a>pic_width：源图的宽度
<a href=#__codelineno-433-2 id=__codelineno-433-2 name=__codelineno-433-2></a>pic_height：源图的高度
<a href=#__codelineno-433-3 id=__codelineno-433-3 name=__codelineno-433-3></a>display_width：指定输出图像的宽度
<a href=#__codelineno-433-4 id=__codelineno-433-4 name=__codelineno-433-4></a>display_height：指定输出图像的高度
<a href=#__codelineno-433-5 id=__codelineno-433-5 name=__codelineno-433-5></a>bitmap_format:源图格式
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-434-1 id=__codelineno-434-1 name=__codelineno-434-1></a># cd /mnt/extsd/
<a href=#__codelineno-434-2 id=__codelineno-434-2 name=__codelineno-434-2></a># ./sample_UILayer -path ./sample_UILayer.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-435-1 id=__codelineno-435-1 name=__codelineno-435-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-436-1 id=__codelineno-436-1 name=__codelineno-436-1></a>一直显示，需要“ctrl+c”手动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-437-1 id=__codelineno-437-1 name=__codelineno-437-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-437-2 id=__codelineno-437-2 name=__codelineno-437-2></a>2. LCD屏幕显示绿色和蓝色矩形填充
</code></pre></div> ### 8.5 G2D #### 8.5.1 sample_g2d 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-438-1 id=__codelineno-438-1 name=__codelineno-438-1></a>该sample 通过直接处理image图片来演示g2d模块常用功能的使用方式。g2d模块支持最大2K输入输出。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-439-1 id=__codelineno-439-1 name=__codelineno-439-1></a>无
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-440-1 id=__codelineno-440-1 name=__codelineno-440-1></a>/mnt/extsd/sample_g2d/board_1920x1080.nv1
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-441-1 id=__codelineno-441-1 name=__codelineno-441-1></a>/mnt/extsd/sample_g2d/dst.yuv
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-442-1 id=__codelineno-442-1 name=__codelineno-442-1></a>g2d 模块功能的选择主要通过参数的组合来实现，如：
<a href=#__codelineno-442-2 id=__codelineno-442-2 name=__codelineno-442-2></a>1) rotate
<a href=#__codelineno-442-3 id=__codelineno-442-3 name=__codelineno-442-3></a>配置conf文件中的dst_rotate 配置项，设置要旋转的角度：0：none,1:90,2:180,3:270.
<a href=#__codelineno-442-4 id=__codelineno-442-4 name=__codelineno-442-4></a>Note： 此时 dst_width 及 dst_height配置项要分别与src_width及src_height一致，否则
<a href=#__codelineno-442-5 id=__codelineno-442-5 name=__codelineno-442-5></a>会同时启动scale功能，但此时会产生错误结果(g2d模块不能同时做rotation及scaling).
<a href=#__codelineno-442-6 id=__codelineno-442-6 name=__codelineno-442-6></a>2) scale
<a href=#__codelineno-442-7 id=__codelineno-442-7 name=__codelineno-442-7></a>配置conf文件中的dst_rotate为0（disable rotation）,
<a href=#__codelineno-442-8 id=__codelineno-442-8 name=__codelineno-442-8></a>配置dst_width dst_height目标大小。
<a href=#__codelineno-442-9 id=__codelineno-442-9 name=__codelineno-442-9></a>3) cut
<a href=#__codelineno-442-10 id=__codelineno-442-10 name=__codelineno-442-10></a>cut功能用来截取部分src内容，具体区域由
<a href=#__codelineno-442-11 id=__codelineno-442-11 name=__codelineno-442-11></a>src_rect_x =
<a href=#__codelineno-442-12 id=__codelineno-442-12 name=__codelineno-442-12></a>src_rect_y =
<a href=#__codelineno-442-13 id=__codelineno-442-13 name=__codelineno-442-13></a>src_rect_w =
<a href=#__codelineno-442-14 id=__codelineno-442-14 name=__codelineno-442-14></a>src_rect_h =
<a href=#__codelineno-442-15 id=__codelineno-442-15 name=__codelineno-442-15></a>设定，注意：若无效启动rotation, dst_rotate = 0
<a href=#__codelineno-442-16 id=__codelineno-442-16 name=__codelineno-442-16></a>4) pixel format格式转换
<a href=#__codelineno-442-17 id=__codelineno-442-17 name=__codelineno-442-17></a>该功能通过参数：
<a href=#__codelineno-442-18 id=__codelineno-442-18 name=__codelineno-442-18></a>pic_format = nv21
<a href=#__codelineno-442-19 id=__codelineno-442-19 name=__codelineno-442-19></a>dst_format = nv12
<a href=#__codelineno-442-20 id=__codelineno-442-20 name=__codelineno-442-20></a>来实现。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-443-1 id=__codelineno-443-1 name=__codelineno-443-1></a># cd /mnt/extsd/
<a href=#__codelineno-443-2 id=__codelineno-443-2 name=__codelineno-443-2></a># ./sample_g2d -path ./sample_g2d.con
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-444-1 id=__codelineno-444-1 name=__codelineno-444-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-445-1 id=__codelineno-445-1 name=__codelineno-445-1></a>测试完后可以自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-446-1 id=__codelineno-446-1 name=__codelineno-446-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-446-2 id=__codelineno-446-2 name=__codelineno-446-2></a>2. 使用YUView 软件分析生成的YUV文件正常。
</code></pre></div> #### 8.5.2 sample_vi_g2d 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-447-1 id=__codelineno-447-1 name=__codelineno-447-1></a>该sample从mpi_vi组件获取视频帧，调用g2d驱动做旋转、剪切、缩放等处理，处理后的图像送mpi_vo显示，也可保存为
<a href=#__codelineno-447-2 id=__codelineno-447-2 name=__codelineno-447-2></a>原始图片供分析。g2d模块支持最大2K输入输出。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-448-1 id=__codelineno-448-1 name=__codelineno-448-1></a>mpp_hw_display
<a href=#__codelineno-448-2 id=__codelineno-448-2 name=__codelineno-448-2></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120181909528](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181909528.png) <center>图 8-46: MPP_sample 测试通路-sample_vi_g2d</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-449-1 id=__codelineno-449-1 name=__codelineno-449-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-450-1 id=__codelineno-450-1 name=__codelineno-450-1></a>/mnt/extsd/pic[0].nv21
<a href=#__codelineno-450-2 id=__codelineno-450-2 name=__codelineno-450-2></a>/mnt/extsd/pic[1].nv21
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-451-1 id=__codelineno-451-1 name=__codelineno-451-1></a>dev_num：指定VI Dev设备节点
<a href=#__codelineno-451-2 id=__codelineno-451-2 name=__codelineno-451-2></a>frame_rate: 指定camera采集图像的帧率
<a href=#__codelineno-451-3 id=__codelineno-451-3 name=__codelineno-451-3></a>pic_format: 指定camera采集图像像素格式
<a href=#__codelineno-451-4 id=__codelineno-451-4 name=__codelineno-451-4></a>drop_frame_num：指定vi组件丢弃的帧数
<a href=#__codelineno-451-5 id=__codelineno-451-5 name=__codelineno-451-5></a>src_width,src_height：指定camera采集的源图宽度和高度
<a href=#__codelineno-451-6 id=__codelineno-451-6 name=__codelineno-451-6></a>src_rect_x,src_rect_y,src_rect_w,src_rect_h：指定g2d处理的源图区域
<a href=#__codelineno-451-7 id=__codelineno-451-7 name=__codelineno-451-7></a>dst_rotate：指定g2d旋转角度
<a href=#__codelineno-451-8 id=__codelineno-451-8 name=__codelineno-451-8></a>dst_width,dst_height：指定g2d处理后的目标buffer的宽度和高度
<a href=#__codelineno-451-9 id=__codelineno-451-9 name=__codelineno-451-9></a>dst_rect_x,dst_rect_y,dst_rect_w,dst_rect_h：指定g2d处理的目标图区域
<a href=#__codelineno-451-10 id=__codelineno-451-10 name=__codelineno-451-10></a>dst_store_count：指定保存的图片数量
<a href=#__codelineno-451-11 id=__codelineno-451-11 name=__codelineno-451-11></a>dst_store_interval：指定保存图片的帧间隔
<a href=#__codelineno-451-12 id=__codelineno-451-12 name=__codelineno-451-12></a>store_dir：指定保存目录，目录必须已经存在
<a href=#__codelineno-451-13 id=__codelineno-451-13 name=__codelineno-451-13></a>display_flag：是否VO显示
<a href=#__codelineno-451-14 id=__codelineno-451-14 name=__codelineno-451-14></a>display_x,display_y,display_w,display_h：指定VO的显示区域
<a href=#__codelineno-451-15 id=__codelineno-451-15 name=__codelineno-451-15></a>test_duration：指定测试时间，单位：秒。0表示无限时长。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-452-1 id=__codelineno-452-1 name=__codelineno-452-1></a># cd /mnt/extsd/
<a href=#__codelineno-452-2 id=__codelineno-452-2 name=__codelineno-452-2></a># ./sample_vi_g2d -path ./sample_vi_g2d.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-453-1 id=__codelineno-453-1 name=__codelineno-453-1></a># sample_vi_g2d -path ./mnt/E/sample_vi_g2d.conf
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-454-1 id=__codelineno-454-1 name=__codelineno-454-1></a>不自动退出测试，需要“ctrl + c” 退出测试
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-455-1 id=__codelineno-455-1 name=__codelineno-455-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-455-2 id=__codelineno-455-2 name=__codelineno-455-2></a>2. 使用YUView 软件分析生成的YUV文件正常。
<a href=#__codelineno-455-3 id=__codelineno-455-3 name=__codelineno-455-3></a>3. LCD屏幕实时显示Camera 采集的视频图像正常。
</code></pre></div> ### 8.6 CE #### 8.6.1 sample_twinchn_virvi2venc2ce 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-456-1 id=__codelineno-456-1 name=__codelineno-456-1></a>该sample 同时测试两路编码的加解密。
<a href=#__codelineno-456-2 id=__codelineno-456-2 name=__codelineno-456-2></a>两路mpi_vi 和mpi_venc 组件分别绑定组合。mpi_vi采集图像，直接传输给mpi_venc 进行编码，在进行ce加密解密。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-457-1 id=__codelineno-457-1 name=__codelineno-457-1></a>PACKAGE_libopenssl
</code></pre></div> 测试通路： ![image-20221120181928952](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181928952.png) <center>图 8-47: MPP_sample 测试通路-sample_twinchn_virvi2venc2ce</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-458-1 id=__codelineno-458-1 name=__codelineno-458-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-459-1 id=__codelineno-459-1 name=__codelineno-459-1></a>/mnt/extsd/isp0_1920_1080_60_ctx_saved.bin
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-460-1 id=__codelineno-460-1 name=__codelineno-460-1></a>dev_node_main：指定主路vipp 设备号。
<a href=#__codelineno-460-2 id=__codelineno-460-2 name=__codelineno-460-2></a>dev_node_sub：指定子路vipp 设备号。
<a href=#__codelineno-460-3 id=__codelineno-460-3 name=__codelineno-460-3></a>src_size_main：指定主路源大小。3840：3840x2160，1080：1920x1080，720：1280x720，640：640x360。
<a href=#__codelineno-460-4 id=__codelineno-460-4 name=__codelineno-460-4></a>src_size_sub：指定子路源大小。3840：3840x2160，1080：1920x1080，720：1280x720，640：640x360。
<a href=#__codelineno-460-5 id=__codelineno-460-5 name=__codelineno-460-5></a>video_dst_file_main：指定主路目标文件路径。
<a href=#__codelineno-460-6 id=__codelineno-460-6 name=__codelineno-460-6></a>video_dst_file_sub：指定子路目标文件路径。
<a href=#__codelineno-460-7 id=__codelineno-460-7 name=__codelineno-460-7></a>video_framerate_main：指定主路视频帧率，单位：fps。
<a href=#__codelineno-460-8 id=__codelineno-460-8 name=__codelineno-460-8></a>video_framerate_sub：指定子路视频帧率，单位：fps。
<a href=#__codelineno-460-9 id=__codelineno-460-9 name=__codelineno-460-9></a>video_bitrate_main：指定主路视频码率，单位：bps。
<a href=#__codelineno-460-10 id=__codelineno-460-10 name=__codelineno-460-10></a>video_bitrate_sub：指定子路视频码率，单位：bps。
<a href=#__codelineno-460-11 id=__codelineno-460-11 name=__codelineno-460-11></a>video_size_main：指定主路视频目标大小。3840：3840x2160，1080：1920x1080，720：1280x720，640：
<a href=#__codelineno-460-12 id=__codelineno-460-12 name=__codelineno-460-12></a>640x360。
<a href=#__codelineno-460-13 id=__codelineno-460-13 name=__codelineno-460-13></a>video_size_sub指定子路视频目标大小。3840：3840x2160，1080：1920x1080，720：1280x720，640：640x360
<a href=#__codelineno-460-14 id=__codelineno-460-14 name=__codelineno-460-14></a>。
<a href=#__codelineno-460-15 id=__codelineno-460-15 name=__codelineno-460-15></a>video_encoder_main：指定主路编码格式。"H.264"，"H.265"。
<a href=#__codelineno-460-16 id=__codelineno-460-16 name=__codelineno-460-16></a>video_encoder_sub：指定子路编码格式。"H.264"，"H.265"。
<a href=#__codelineno-460-17 id=__codelineno-460-17 name=__codelineno-460-17></a>rc_mode_main：指定主路rc mode。0：CBR，1：VBR，2：FIXQP，3：QPMAP。
<a href=#__codelineno-460-18 id=__codelineno-460-18 name=__codelineno-460-18></a>rc_mode_sub：指定子路rc mode。0：CBR，1：VBR，2：FIXQP，3：QPMAP。
<a href=#__codelineno-460-19 id=__codelineno-460-19 name=__codelineno-460-19></a>enable_fast_enc_main：指定主路fast enc 是否开启。1：enable，0：disable。
<a href=#__codelineno-460-20 id=__codelineno-460-20 name=__codelineno-460-20></a>enable_fast_enc_sub：指定子路fast enc 是否开启。1：enable，0：disable。
<a href=#__codelineno-460-21 id=__codelineno-460-21 name=__codelineno-460-21></a>enable_roi_main：指定主路roi 是否开启。1：enable，0：disable。
<a href=#__codelineno-460-22 id=__codelineno-460-22 name=__codelineno-460-22></a>enable_roi_sub：指定子路roi 是否开启。1：enable，0：disable。
<a href=#__codelineno-460-23 id=__codelineno-460-23 name=__codelineno-460-23></a>video_duration_main：指定主路视频时长，单位：s。
<a href=#__codelineno-460-24 id=__codelineno-460-24 name=__codelineno-460-24></a>video_duration_sub：指定子路视频时长，单位：s。
<a href=#__codelineno-460-25 id=__codelineno-460-25 name=__codelineno-460-25></a>test_duration：指定测试时长，单位：s。
<a href=#__codelineno-460-26 id=__codelineno-460-26 name=__codelineno-460-26></a>color2grey：彩转灰。yes：开启，no：关闭。
<a href=#__codelineno-460-27 id=__codelineno-460-27 name=__codelineno-460-27></a>3dnr：3D去噪声。yes：开启，no：关闭。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-461-1 id=__codelineno-461-1 name=__codelineno-461-1></a># cd /mnt/extsd/
<a href=#__codelineno-461-2 id=__codelineno-461-2 name=__codelineno-461-2></a># ./sample_twinchn_virvi2venc2ce -path ./sample_twinchn_virvi2venc2ce.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-462-1 id=__codelineno-462-1 name=__codelineno-462-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-463-1 id=__codelineno-463-1 name=__codelineno-463-1></a>测试达到设定的时间后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-464-1 id=__codelineno-464-1 name=__codelineno-464-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-464-2 id=__codelineno-464-2 name=__codelineno-464-2></a>2. 使用VLC 软件分析生成的raw文件正常。
</code></pre></div> #### 8.6.2 sample_virvi2venc2ce 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-465-1 id=__codelineno-465-1 name=__codelineno-465-1></a>该sample 测试一路编码的加解密。
<a href=#__codelineno-465-2 id=__codelineno-465-2 name=__codelineno-465-2></a>mpi_vi 和mpi_venc 组件绑定组合。mpi_vi采集图像，直接传输给mpi_venc 进行编码，在进行ce加密解密。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-466-1 id=__codelineno-466-1 name=__codelineno-466-1></a>PACKAGE_libopenssl
</code></pre></div> 测试通路： ![image-20221120181941799](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120181941799.png) <center>图 8-48: MPP_sample 测试通路-sample_virvi2venc2ce</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-467-1 id=__codelineno-467-1 name=__codelineno-467-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-468-1 id=__codelineno-468-1 name=__codelineno-468-1></a>/mnt/extsd/AW_VirviEncoder.H264
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-469-1 id=__codelineno-469-1 name=__codelineno-469-1></a>auto_test_count:指定自动测试次数
<a href=#__codelineno-469-2 id=__codelineno-469-2 name=__codelineno-469-2></a>encoder_count:指定每次测试编码帧数
<a href=#__codelineno-469-3 id=__codelineno-469-3 name=__codelineno-469-3></a>dev_num:指定VI Dev设备节点
<a href=#__codelineno-469-4 id=__codelineno-469-4 name=__codelineno-469-4></a>src_width:指定camera采集的图像宽度
<a href=#__codelineno-469-5 id=__codelineno-469-5 name=__codelineno-469-5></a>src_height:指定camera采集的图像高度
<a href=#__codelineno-469-6 id=__codelineno-469-6 name=__codelineno-469-6></a>src_frame_rate:指定camera采集图像的帧率
<a href=#__codelineno-469-7 id=__codelineno-469-7 name=__codelineno-469-7></a>dest_encoder_type:指定编码格式
<a href=#__codelineno-469-8 id=__codelineno-469-8 name=__codelineno-469-8></a>dest_width:指定编码后图像的宽度
<a href=#__codelineno-469-9 id=__codelineno-469-9 name=__codelineno-469-9></a>dest_height:指定编码后图像的高度
<a href=#__codelineno-469-10 id=__codelineno-469-10 name=__codelineno-469-10></a>dest_frame_rate:指定编码帧率
<a href=#__codelineno-469-11 id=__codelineno-469-11 name=__codelineno-469-11></a>dest_bit_rate:指定编码码率
<a href=#__codelineno-469-12 id=__codelineno-469-12 name=__codelineno-469-12></a>dest_pic_format:指定编码后图像的格式
<a href=#__codelineno-469-13 id=__codelineno-469-13 name=__codelineno-469-13></a>output_file_path:指定编码后视频文件的路径
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-470-1 id=__codelineno-470-1 name=__codelineno-470-1></a># cd /mnt/extsd/
<a href=#__codelineno-470-2 id=__codelineno-470-2 name=__codelineno-470-2></a># ./sample_virvi2venc2ce -path ./sample_virvi2venc2ce.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-471-1 id=__codelineno-471-1 name=__codelineno-471-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-472-1 id=__codelineno-472-1 name=__codelineno-472-1></a>达到指定测试次数后自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-473-1 id=__codelineno-473-1 name=__codelineno-473-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-473-2 id=__codelineno-473-2 name=__codelineno-473-2></a>2. 使用VLC 软件分析生成的raw文件正常。
</code></pre></div> ### 8.7 UVC 和 UAC #### 8.7.1 sample_uvc2vdec_vo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-474-1 id=__codelineno-474-1 name=__codelineno-474-1></a>测试mpi_uvc-&gt;mpi_vdec的绑定方式传输数据，mpi_vdec-&gt;mpi_vo采用非绑定方式。
<a href=#__codelineno-474-2 id=__codelineno-474-2 name=__codelineno-474-2></a>从mpi_uvc组件获取mjpeg编码格式图片，交给mpi_vdec组件解码，配置vdec解码缩小，并且大小图两路输出，
<a href=#__codelineno-474-3 id=__codelineno-474-3 name=__codelineno-474-3></a>mpi_vdec的输出采用非绑定方式，app主动获取大小图，再交给mpi_vo组件的两个图层分别显示。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-475-1 id=__codelineno-475-1 name=__codelineno-475-1></a>mpp_uvc
<a href=#__codelineno-475-2 id=__codelineno-475-2 name=__codelineno-475-2></a>mpp_hw_display
<a href=#__codelineno-475-3 id=__codelineno-475-3 name=__codelineno-475-3></a>mpp_vo
<a href=#__codelineno-475-4 id=__codelineno-475-4 name=__codelineno-475-4></a>mpp_vdec
</code></pre></div> 测试通路： ![image-20221120182000288](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120182000288.png) <center>图 8-49: MPP_sample 测试通路-sample_uvc2vdec_vo</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-476-1 id=__codelineno-476-1 name=__codelineno-476-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-477-1 id=__codelineno-477-1 name=__codelineno-477-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-478-1 id=__codelineno-478-1 name=__codelineno-478-1></a>dev_name: uvc设备字符串
<a href=#__codelineno-478-2 id=__codelineno-478-2 name=__codelineno-478-2></a>pic_format: uvc输出图像格式
<a href=#__codelineno-478-3 id=__codelineno-478-3 name=__codelineno-478-3></a>capture_width: uvc输出图像宽度
<a href=#__codelineno-478-4 id=__codelineno-478-4 name=__codelineno-478-4></a>capture_height: uvc输出图像高度
<a href=#__codelineno-478-5 id=__codelineno-478-5 name=__codelineno-478-5></a>capture_framerate: uvc采集帧率
<a href=#__codelineno-478-6 id=__codelineno-478-6 name=__codelineno-478-6></a>decode_sub_out_width: vdec解码输出的小图宽度
<a href=#__codelineno-478-7 id=__codelineno-478-7 name=__codelineno-478-7></a>decode_sub_out_height: vdec解码输出的小图高度
<a href=#__codelineno-478-8 id=__codelineno-478-8 name=__codelineno-478-8></a>display_main_x: 主图显示区域的左上角起点坐标x
<a href=#__codelineno-478-9 id=__codelineno-478-9 name=__codelineno-478-9></a>display_main_y: 主图显示区域的左上角起点坐标y
<a href=#__codelineno-478-10 id=__codelineno-478-10 name=__codelineno-478-10></a>display_main_width: 主图显示区域宽度
<a href=#__codelineno-478-11 id=__codelineno-478-11 name=__codelineno-478-11></a>display_main_height: 主图显示区域高度
<a href=#__codelineno-478-12 id=__codelineno-478-12 name=__codelineno-478-12></a>display_sub_x: 子图显示区域的左上角起点坐标x
<a href=#__codelineno-478-13 id=__codelineno-478-13 name=__codelineno-478-13></a>display_sub_y: 子图显示区域的左上角起点坐标y
<a href=#__codelineno-478-14 id=__codelineno-478-14 name=__codelineno-478-14></a>display_sub_width: 子图显示区域宽度
<a href=#__codelineno-478-15 id=__codelineno-478-15 name=__codelineno-478-15></a>display_sub_height: 子图显示区域高度
<a href=#__codelineno-478-16 id=__codelineno-478-16 name=__codelineno-478-16></a>test_frame_count: 测试帧数，0代表无限。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-479-1 id=__codelineno-479-1 name=__codelineno-479-1></a># cd /mnt/extsd/
<a href=#__codelineno-479-2 id=__codelineno-479-2 name=__codelineno-479-2></a># ./sample_uvc2vdec_vo -path ./sample_uvc2vdec_vo.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-480-1 id=__codelineno-480-1 name=__codelineno-480-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-481-1 id=__codelineno-481-1 name=__codelineno-481-1></a>达到测试帧数后自动退出测试，或者按“ctrl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-482-1 id=__codelineno-482-1 name=__codelineno-482-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-482-2 id=__codelineno-482-2 name=__codelineno-482-2></a>2. LCD屏幕正常显示。
</code></pre></div> #### 8.7.2 sample_uvc2vdenc2vo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-483-1 id=__codelineno-483-1 name=__codelineno-483-1></a>测试mpi_uvc-&gt;mpi_vdec的绑定方式传输数据，mpi_vdec-&gt;mpi_vo也采用绑定方式。
<a href=#__codelineno-483-2 id=__codelineno-483-2 name=__codelineno-483-2></a>从mpi_uvc组件获取mjpeg编码格式图片，交给mpi_vdec组件解码，再传给mpi_vo组件显示。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-484-1 id=__codelineno-484-1 name=__codelineno-484-1></a>mpp_uvc
<a href=#__codelineno-484-2 id=__codelineno-484-2 name=__codelineno-484-2></a>mpp_hw_display
<a href=#__codelineno-484-3 id=__codelineno-484-3 name=__codelineno-484-3></a>mpp_vo
<a href=#__codelineno-484-4 id=__codelineno-484-4 name=__codelineno-484-4></a>mpp_vdec
</code></pre></div> 测试通路： ![image-20221120183915416](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120183915416.png) <center>图 8-50: MPP_sample 测试通路-sample_uvc2vdenc2vo</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-485-1 id=__codelineno-485-1 name=__codelineno-485-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-486-1 id=__codelineno-486-1 name=__codelineno-486-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-487-1 id=__codelineno-487-1 name=__codelineno-487-1></a>dev_name: uvc设备字符串
<a href=#__codelineno-487-2 id=__codelineno-487-2 name=__codelineno-487-2></a>pic_format: uvc输出图像格式
<a href=#__codelineno-487-3 id=__codelineno-487-3 name=__codelineno-487-3></a>capture_width: uvc输出图像宽度
<a href=#__codelineno-487-4 id=__codelineno-487-4 name=__codelineno-487-4></a>capture_height: uvc输出图像高度
<a href=#__codelineno-487-5 id=__codelineno-487-5 name=__codelineno-487-5></a>capture_framerate: uvc采集帧率
<a href=#__codelineno-487-6 id=__codelineno-487-6 name=__codelineno-487-6></a>decode_out_width: vdec解码输出图像的宽度
<a href=#__codelineno-487-7 id=__codelineno-487-7 name=__codelineno-487-7></a>decode_out_height: vdec解码输出图像的高度
<a href=#__codelineno-487-8 id=__codelineno-487-8 name=__codelineno-487-8></a>display_width:显示宽度
<a href=#__codelineno-487-9 id=__codelineno-487-9 name=__codelineno-487-9></a>display_height:显示高度
<a href=#__codelineno-487-10 id=__codelineno-487-10 name=__codelineno-487-10></a>test_duration:测试时间，0代表无限。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-488-1 id=__codelineno-488-1 name=__codelineno-488-1></a># cd /mnt/extsd/
<a href=#__codelineno-488-2 id=__codelineno-488-2 name=__codelineno-488-2></a># ./sample_uvc2vdenc2vo -path ./sample_uvc2vdenc2vo.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-489-1 id=__codelineno-489-1 name=__codelineno-489-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-490-1 id=__codelineno-490-1 name=__codelineno-490-1></a>达到测试帧数后自动退出测试，或者按“ctrl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-491-1 id=__codelineno-491-1 name=__codelineno-491-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-491-2 id=__codelineno-491-2 name=__codelineno-491-2></a>2. LCD屏幕正常显示。
</code></pre></div> #### 8.7.3 sample_uvc2vo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-492-1 id=__codelineno-492-1 name=__codelineno-492-1></a>测试mpi_uvc组件的绑定方式输出。
<a href=#__codelineno-492-2 id=__codelineno-492-2 name=__codelineno-492-2></a>mpi_uvc组件输出yuyv格式（或其他raw格式）到mpi_vo组件显示。mpi_uvc和mpi_vo组件采用绑定方式连接。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-493-1 id=__codelineno-493-1 name=__codelineno-493-1></a>mpp_uvc
<a href=#__codelineno-493-2 id=__codelineno-493-2 name=__codelineno-493-2></a>mpp_hw_display
<a href=#__codelineno-493-3 id=__codelineno-493-3 name=__codelineno-493-3></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120184430678](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120184430678.png) <center>图 8-51: MPP_sample 测试通路-sample_uvc2vo</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-494-1 id=__codelineno-494-1 name=__codelineno-494-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-495-1 id=__codelineno-495-1 name=__codelineno-495-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-496-1 id=__codelineno-496-1 name=__codelineno-496-1></a>dev_name: uvc设备字符串
<a href=#__codelineno-496-2 id=__codelineno-496-2 name=__codelineno-496-2></a>pic_format: uvc输出图像格式
<a href=#__codelineno-496-3 id=__codelineno-496-3 name=__codelineno-496-3></a>capture_width: uvc输出图像宽度
<a href=#__codelineno-496-4 id=__codelineno-496-4 name=__codelineno-496-4></a>capture_height: uvc输出图像高度
<a href=#__codelineno-496-5 id=__codelineno-496-5 name=__codelineno-496-5></a>display_width:显示宽度
<a href=#__codelineno-496-6 id=__codelineno-496-6 name=__codelineno-496-6></a>display_height:显示高度
<a href=#__codelineno-496-7 id=__codelineno-496-7 name=__codelineno-496-7></a>test_duration:测试时间，单位秒
<a href=#__codelineno-496-8 id=__codelineno-496-8 name=__codelineno-496-8></a>brightness:uvc亮度设置
<a href=#__codelineno-496-9 id=__codelineno-496-9 name=__codelineno-496-9></a>contrast:uvc对比度设置
<a href=#__codelineno-496-10 id=__codelineno-496-10 name=__codelineno-496-10></a>hue:uvc色度设置
<a href=#__codelineno-496-11 id=__codelineno-496-11 name=__codelineno-496-11></a>saturation:uvc饱和度设置
<a href=#__codelineno-496-12 id=__codelineno-496-12 name=__codelineno-496-12></a>sharpness:uvc锐度设置
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-497-1 id=__codelineno-497-1 name=__codelineno-497-1></a># cd /mnt/extsd/
<a href=#__codelineno-497-2 id=__codelineno-497-2 name=__codelineno-497-2></a># ./sample_uvc2vo -path ./sample_uvc2vo.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-498-1 id=__codelineno-498-1 name=__codelineno-498-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-499-1 id=__codelineno-499-1 name=__codelineno-499-1></a>达到测试帧数后自动退出测试，或者按“ctrl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-500-1 id=__codelineno-500-1 name=__codelineno-500-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-500-2 id=__codelineno-500-2 name=__codelineno-500-2></a>2. LCD屏幕正常显示。
</code></pre></div> #### 8.7.4 sample_uvc_vo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-501-1 id=__codelineno-501-1 name=__codelineno-501-1></a>测试mpi_uvc组件的非绑定方式输出。
<a href=#__codelineno-501-2 id=__codelineno-501-2 name=__codelineno-501-2></a>从mpi_uvc组件获取yuyv格式（或其他raw格式），交给mpi_vo组件显示。mpi_uvc和mpi_vo组件采用非绑定方式运行。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-502-1 id=__codelineno-502-1 name=__codelineno-502-1></a>mpp_uvc
<a href=#__codelineno-502-2 id=__codelineno-502-2 name=__codelineno-502-2></a>mpp_hw_display
<a href=#__codelineno-502-3 id=__codelineno-502-3 name=__codelineno-502-3></a>mpp_vo
</code></pre></div> 测试通路： ![image-20221120184455995](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120184455995.png) <center>图 8-52: MPP_sample 测试通路-sample_uvc_vo</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-503-1 id=__codelineno-503-1 name=__codelineno-503-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-504-1 id=__codelineno-504-1 name=__codelineno-504-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-505-1 id=__codelineno-505-1 name=__codelineno-505-1></a>dev_name: uvc设备字符串
<a href=#__codelineno-505-2 id=__codelineno-505-2 name=__codelineno-505-2></a>pic_format: uvc输出图像格式
<a href=#__codelineno-505-3 id=__codelineno-505-3 name=__codelineno-505-3></a>capture_width: uvc输出图像宽度
<a href=#__codelineno-505-4 id=__codelineno-505-4 name=__codelineno-505-4></a>capture_height: uvc输出图像高度
<a href=#__codelineno-505-5 id=__codelineno-505-5 name=__codelineno-505-5></a>display_width:显示宽度
<a href=#__codelineno-505-6 id=__codelineno-505-6 name=__codelineno-505-6></a>display_height:显示高度
<a href=#__codelineno-505-7 id=__codelineno-505-7 name=__codelineno-505-7></a>test_frame_count:测试帧数，0代表无限帧数。
<a href=#__codelineno-505-8 id=__codelineno-505-8 name=__codelineno-505-8></a>brightness:uvc亮度设置
<a href=#__codelineno-505-9 id=__codelineno-505-9 name=__codelineno-505-9></a>contrast:uvc对比度设置
<a href=#__codelineno-505-10 id=__codelineno-505-10 name=__codelineno-505-10></a>hue:uvc色度设置
<a href=#__codelineno-505-11 id=__codelineno-505-11 name=__codelineno-505-11></a>saturation:uvc饱和度设置
<a href=#__codelineno-505-12 id=__codelineno-505-12 name=__codelineno-505-12></a>sharpness:uvc锐度设置
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-506-1 id=__codelineno-506-1 name=__codelineno-506-1></a># cd /mnt/extsd/
<a href=#__codelineno-506-2 id=__codelineno-506-2 name=__codelineno-506-2></a># ./sample_uvc_vo -path ./sample_uvc_vo.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-507-1 id=__codelineno-507-1 name=__codelineno-507-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-508-1 id=__codelineno-508-1 name=__codelineno-508-1></a>达到测试帧数后自动退出测试，或者按“ctrl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-509-1 id=__codelineno-509-1 name=__codelineno-509-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-509-2 id=__codelineno-509-2 name=__codelineno-509-2></a>2. LCD屏幕正常显示。
</code></pre></div> #### 8.7.5 sample_uvcout 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-510-1 id=__codelineno-510-1 name=__codelineno-510-1></a>读取jpg文件，反复送由UVC设备输出到电脑（注意：不是获取UVC摄像头的数据，而是把整个板子当作UVC摄像头，将图像送
<a href=#__codelineno-510-2 id=__codelineno-510-2 name=__codelineno-510-2></a>由电脑显示）电脑端使用VLC工具查看。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-511-1 id=__codelineno-511-1 name=__codelineno-511-1></a>mpp_uvc
</code></pre></div> 测试通路： ![image-20221120184516051](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120184516051.png) <center>图 8-53: MPP_sample 测试通路-sample_uvcout</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-512-1 id=__codelineno-512-1 name=__codelineno-512-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-513-1 id=__codelineno-513-1 name=__codelineno-513-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-514-1 id=__codelineno-514-1 name=__codelineno-514-1></a>uvc_dev：uvc设备号
<a href=#__codelineno-514-2 id=__codelineno-514-2 name=__codelineno-514-2></a>vin_dev：摄像头数据采集设备号
<a href=#__codelineno-514-3 id=__codelineno-514-3 name=__codelineno-514-3></a>cap_format：数据采集格式，nv21, nv12, yu12, yv12
<a href=#__codelineno-514-4 id=__codelineno-514-4 name=__codelineno-514-4></a>cap_width：图像采集宽度
<a href=#__codelineno-514-5 id=__codelineno-514-5 name=__codelineno-514-5></a>cap_height：图像采集高度
<a href=#__codelineno-514-6 id=__codelineno-514-6 name=__codelineno-514-6></a>cap_frame_rate：图像采集帧率
<a href=#__codelineno-514-7 id=__codelineno-514-7 name=__codelineno-514-7></a>encoder_type：编码类型
<a href=#__codelineno-514-8 id=__codelineno-514-8 name=__codelineno-514-8></a>enc_frame_quarity：编码质量
<a href=#__codelineno-514-9 id=__codelineno-514-9 name=__codelineno-514-9></a>enc_width：编码宽度
<a href=#__codelineno-514-10 id=__codelineno-514-10 name=__codelineno-514-10></a>enc_height：编码高度
<a href=#__codelineno-514-11 id=__codelineno-514-11 name=__codelineno-514-11></a>enc_frame_rate：编码帧率
<a href=#__codelineno-514-12 id=__codelineno-514-12 name=__codelineno-514-12></a>enc_bit_rate：编码bit率 4M(4194304) 8M(8388608)
<a href=#__codelineno-514-13 id=__codelineno-514-13 name=__codelineno-514-13></a>use_eve：是否使用人脸识别，1－使用，0－不使用
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-515-1 id=__codelineno-515-1 name=__codelineno-515-1></a>1. 执行命令生成video设备节点
<a href=#__codelineno-515-2 id=__codelineno-515-2 name=__codelineno-515-2></a>执行run_otg脚本生成设备节点
<a href=#__codelineno-515-3 id=__codelineno-515-3 name=__codelineno-515-3></a>./run_otg
<a href=#__codelineno-515-4 id=__codelineno-515-4 name=__codelineno-515-4></a>2. 启动数据传输（uvc设备号要改为上述步骤生成的video节点）
<a href=#__codelineno-515-5 id=__codelineno-515-5 name=__codelineno-515-5></a>cd /mnt/extsd/
<a href=#__codelineno-515-6 id=__codelineno-515-6 name=__codelineno-515-6></a>./sample_uvcout -path ./sample_uvcout.conf
<a href=#__codelineno-515-7 id=__codelineno-515-7 name=__codelineno-515-7></a>3. 使用VLC进行查看
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-516-1 id=__codelineno-516-1 name=__codelineno-516-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-517-1 id=__codelineno-517-1 name=__codelineno-517-1></a>按“ctrl + c”退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-518-1 id=__codelineno-518-1 name=__codelineno-518-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-518-2 id=__codelineno-518-2 name=__codelineno-518-2></a>2. PC端使用VLC工具播放正常。
</code></pre></div> 详细配置步骤： <div class=highlight><pre><span></span><code><a href=#__codelineno-519-1 id=__codelineno-519-1 name=__codelineno-519-1></a>==&gt;内核配置：
<a href=#__codelineno-519-2 id=__codelineno-519-2 name=__codelineno-519-2></a>make kernel_menuconfig
<a href=#__codelineno-519-3 id=__codelineno-519-3 name=__codelineno-519-3></a>[*] Device Driver ---&gt;
<a href=#__codelineno-519-4 id=__codelineno-519-4 name=__codelineno-519-4></a>[*] USB support ---&gt;
<a href=#__codelineno-519-5 id=__codelineno-519-5 name=__codelineno-519-5></a>[*] USB Gadget Support ---&gt;
<a href=#__codelineno-519-6 id=__codelineno-519-6 name=__codelineno-519-6></a>[*] USB functions configuarble through configfs
<a href=#__codelineno-519-7 id=__codelineno-519-7 name=__codelineno-519-7></a>[*] USB Webcam function
<a href=#__codelineno-519-8 id=__codelineno-519-8 name=__codelineno-519-8></a>==&gt;删除掉adb 的初始化，防止adb 影响webcam 的功能
<a href=#__codelineno-519-9 id=__codelineno-519-9 name=__codelineno-519-9></a>rm target/allwinner/v459-perf1/busbox-init-base-files/etc/init.d/S50usb
<a href=#__codelineno-519-10 id=__codelineno-519-10 name=__codelineno-519-10></a>==&gt;编译sample_uvcout
<a href=#__codelineno-519-11 id=__codelineno-519-11 name=__codelineno-519-11></a>vim softwinner/eyesee-mpp/middleware/v459/tina.mk
<a href=#__codelineno-519-12 id=__codelineno-519-12 name=__codelineno-519-12></a>#去掉下面行的注释：
<a href=#__codelineno-519-13 id=__codelineno-519-13 name=__codelineno-519-13></a>make -c sample/sample_uvcout -f tina.mk all
<a href=#__codelineno-519-14 id=__codelineno-519-14 name=__codelineno-519-14></a>编译mkmpp， sample_uvcout目录生成sample_uvcout。
<a href=#__codelineno-519-15 id=__codelineno-519-15 name=__codelineno-519-15></a>==&gt;拷贝sample_uvcout/run_otg 脚本到小机
<a href=#__codelineno-519-16 id=__codelineno-519-16 name=__codelineno-519-16></a>==&gt;确定小机生成新的video节点
<a href=#__codelineno-519-17 id=__codelineno-519-17 name=__codelineno-519-17></a>ls /dev/video*
<a href=#__codelineno-519-18 id=__codelineno-519-18 name=__codelineno-519-18></a>/dev/video0 /dev/video1 /dev/video2
<a href=#__codelineno-519-19 id=__codelineno-519-19 name=__codelineno-519-19></a>#初始化usb webcam 驱动，生成新的video节点，用于传输数据
<a href=#__codelineno-519-20 id=__codelineno-519-20 name=__codelineno-519-20></a>./run_otg
<a href=#__codelineno-519-21 id=__codelineno-519-21 name=__codelineno-519-21></a>==&gt;#查看新增vidoe节点
<a href=#__codelineno-519-22 id=__codelineno-519-22 name=__codelineno-519-22></a>ls /dev/video*
<a href=#__codelineno-519-23 id=__codelineno-519-23 name=__codelineno-519-23></a>/dev/video0 /dev/video1 /dev/video2 /dev/video3
<a href=#__codelineno-519-24 id=__codelineno-519-24 name=__codelineno-519-24></a>==&gt;#确定新节点,是video4
<a href=#__codelineno-519-25 id=__codelineno-519-25 name=__codelineno-519-25></a>==&gt;修改sample_uvcout.conf 配置文件
<a href=#__codelineno-519-26 id=__codelineno-519-26 name=__codelineno-519-26></a>vi sample/sample_uvcout/sample_uvcout.conf
<a href=#__codelineno-519-27 id=__codelineno-519-27 name=__codelineno-519-27></a>[parameter]
<a href=#__codelineno-519-28 id=__codelineno-519-28 name=__codelineno-519-28></a>uvc_dev = 2 #将新增节点的序号加入这里。
<a href=#__codelineno-519-29 id=__codelineno-519-29 name=__codelineno-519-29></a>在小机上运行sample
<a href=#__codelineno-519-30 id=__codelineno-519-30 name=__codelineno-519-30></a>==&gt;./sample_uvcout -path ./sample_uvcout.conf
<a href=#__codelineno-519-31 id=__codelineno-519-31 name=__codelineno-519-31></a>==&gt;电脑查看，可使用VLC
<a href=#__codelineno-519-32 id=__codelineno-519-32 name=__codelineno-519-32></a>[媒体] --&gt;
<a href=#__codelineno-519-33 id=__codelineno-519-33 name=__codelineno-519-33></a>[打开捕获设备] --&gt;
<a href=#__codelineno-519-34 id=__codelineno-519-34 name=__codelineno-519-34></a>捕获模式[DirectShow] 适配器设备名称 [UVC camera]
</code></pre></div> #### 8.7.6 sample_uac 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-520-1 id=__codelineno-520-1 name=__codelineno-520-1></a>测试UAC功能。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-521-1 id=__codelineno-521-1 name=__codelineno-521-1></a>无
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-522-1 id=__codelineno-522-1 name=__codelineno-522-1></a>sample_ai_pcm.wav
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-523-1 id=__codelineno-523-1 name=__codelineno-523-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-524-1 id=__codelineno-524-1 name=__codelineno-524-1></a>pcm_file_path = "/mnt/extsd/sample_ai_pcm.wav"
<a href=#__codelineno-524-2 id=__codelineno-524-2 name=__codelineno-524-2></a>pcm_sample_rate = 48000
<a href=#__codelineno-524-3 id=__codelineno-524-3 name=__codelineno-524-3></a>pcm_channel_cnt = 1
<a href=#__codelineno-524-4 id=__codelineno-524-4 name=__codelineno-524-4></a>pcm_bit_width = 16
<a href=#__codelineno-524-5 id=__codelineno-524-5 name=__codelineno-524-5></a>pcm_frame_size =
<a href=#__codelineno-524-6 id=__codelineno-524-6 name=__codelineno-524-6></a>pcm_cap_duration = 60
<a href=#__codelineno-524-7 id=__codelineno-524-7 name=__codelineno-524-7></a>pcm_ai_gain = 23
<a href=#__codelineno-524-8 id=__codelineno-524-8 name=__codelineno-524-8></a>uac_audio_card_name = "hw:UAC1Gadget"
<a href=#__codelineno-524-9 id=__codelineno-524-9 name=__codelineno-524-9></a>环境准备和测试步骤：
<a href=#__codelineno-524-10 id=__codelineno-524-10 name=__codelineno-524-10></a>1. 需要开启内核配置
<a href=#__codelineno-524-11 id=__codelineno-524-11 name=__codelineno-524-11></a>CONFIG_USB_CONFIGFS_F_UAC1
<a href=#__codelineno-524-12 id=__codelineno-524-12 name=__codelineno-524-12></a>CONFIG_SND_PROC_FS
<a href=#__codelineno-524-13 id=__codelineno-524-13 name=__codelineno-524-13></a>2. 执行以下命令打开USB的UAC功能
<a href=#__codelineno-524-14 id=__codelineno-524-14 name=__codelineno-524-14></a>./setusbconfig-configfs uac1
<a href=#__codelineno-524-15 id=__codelineno-524-15 name=__codelineno-524-15></a>3. 此时，PC上将会创建一个新的audio（AC接口），同时板端将创建一个新的声卡。
<a href=#__codelineno-524-16 id=__codelineno-524-16 name=__codelineno-524-16></a>检查声卡的方法：
<a href=#__codelineno-524-17 id=__codelineno-524-17 name=__codelineno-524-17></a>------------------
<a href=#__codelineno-524-18 id=__codelineno-524-18 name=__codelineno-524-18></a>cat /proc/asound/cards
<a href=#__codelineno-524-19 id=__codelineno-524-19 name=__codelineno-524-19></a>0 [sun8iw19codec ]: sun8iw19-codec - sun8iw19-codec
<a href=#__codelineno-524-20 id=__codelineno-524-20 name=__codelineno-524-20></a>sun8iw19-codec
<a href=#__codelineno-524-21 id=__codelineno-524-21 name=__codelineno-524-21></a>1 [snddaudio0 ]: snddaudio0 - snddaudio0
<a href=#__codelineno-524-22 id=__codelineno-524-22 name=__codelineno-524-22></a>snddaudio0
<a href=#__codelineno-524-23 id=__codelineno-524-23 name=__codelineno-524-23></a>2 [UAC1Gadget ]: UAC1_Gadget - UAC1_Gadget
<a href=#__codelineno-524-24 id=__codelineno-524-24 name=__codelineno-524-24></a>UAC1_Gadget 0
<a href=#__codelineno-524-25 id=__codelineno-524-25 name=__codelineno-524-25></a>------------------
<a href=#__codelineno-524-26 id=__codelineno-524-26 name=__codelineno-524-26></a>其中，“2 [UAC1Gadget ]”就是UAC声卡。
<a href=#__codelineno-524-27 id=__codelineno-524-27 name=__codelineno-524-27></a>此时，需要修改配置文件sample_uac.conf中uac_audio_card_name为"hw:UAC1Gadget"。
<a href=#__codelineno-524-28 id=__codelineno-524-28 name=__codelineno-524-28></a>4. 执行sample，测试通路是：mic --&gt; uac --&gt; PC
<a href=#__codelineno-524-29 id=__codelineno-524-29 name=__codelineno-524-29></a>./sample_uac -path ./sample_uac.conf
<a href=#__codelineno-524-30 id=__codelineno-524-30 name=__codelineno-524-30></a>5. 在PC上使用音频工具抓取UAC的PCM数据验证测试结果。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-525-1 id=__codelineno-525-1 name=__codelineno-525-1></a># cd /mnt/extsd/
<a href=#__codelineno-525-2 id=__codelineno-525-2 name=__codelineno-525-2></a># ./sample_uac -path ./sample_uac.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-526-1 id=__codelineno-526-1 name=__codelineno-526-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-527-1 id=__codelineno-527-1 name=__codelineno-527-1></a>达到设定的测试时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-528-1 id=__codelineno-528-1 name=__codelineno-528-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-528-2 id=__codelineno-528-2 name=__codelineno-528-2></a>2. 按以上方法在PC上使用音频工具抓取UAC的PCM数据验证测试结果符合预期。
</code></pre></div> #### 8.7.7 sample_usbcamera 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-529-1 id=__codelineno-529-1 name=__codelineno-529-1></a>测试UVC、UAC复合设备。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-530-1 id=__codelineno-530-1 name=__codelineno-530-1></a>无
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-531-1 id=__codelineno-531-1 name=__codelineno-531-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-532-1 id=__codelineno-532-1 name=__codelineno-532-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-533-1 id=__codelineno-533-1 name=__codelineno-533-1></a>uvc_dev：uvc设备号
<a href=#__codelineno-533-2 id=__codelineno-533-2 name=__codelineno-533-2></a>vin_dev：摄像头数据采集设备号
<a href=#__codelineno-533-3 id=__codelineno-533-3 name=__codelineno-533-3></a>enc_bit_rate：JPEG、H264模式编码码率
<a href=#__codelineno-533-4 id=__codelineno-533-4 name=__codelineno-533-4></a>enable_uac：是否启用测试uac功能
<a href=#__codelineno-533-5 id=__codelineno-533-5 name=__codelineno-533-5></a>uac_dev：uac设备号
<a href=#__codelineno-533-6 id=__codelineno-533-6 name=__codelineno-533-6></a>uac_sample_rate：音频采样率
<a href=#__codelineno-533-7 id=__codelineno-533-7 name=__codelineno-533-7></a>uac_chn_cnt：音频通道号
<a href=#__codelineno-533-8 id=__codelineno-533-8 name=__codelineno-533-8></a>uac_bit_width：音频位宽
<a href=#__codelineno-533-9 id=__codelineno-533-9 name=__codelineno-533-9></a>uac_ai_gain：采集音频音量
<a href=#__codelineno-533-10 id=__codelineno-533-10 name=__codelineno-533-10></a>测试使用步骤
<a href=#__codelineno-533-11 id=__codelineno-533-11 name=__codelineno-533-11></a>uvc内核配置:
<a href=#__codelineno-533-12 id=__codelineno-533-12 name=__codelineno-533-12></a>CONFIG_USB_CONFIGFS_F_UVC=y
<a href=#__codelineno-533-13 id=__codelineno-533-13 name=__codelineno-533-13></a>uac内核配置:
<a href=#__codelineno-533-14 id=__codelineno-533-14 name=__codelineno-533-14></a>CONFIG_USB_CONFIGFS_F_UAC1=y
<a href=#__codelineno-533-15 id=__codelineno-533-15 name=__codelineno-533-15></a>CONFIG_SND_PROC_FS=y
<a href=#__codelineno-533-16 id=__codelineno-533-16 name=__codelineno-533-16></a>初始化uvc、uac复合设备:
<a href=#__codelineno-533-17 id=__codelineno-533-17 name=__codelineno-533-17></a>setusbconfig uvc,uac1
<a href=#__codelineno-533-18 id=__codelineno-533-18 name=__codelineno-533-18></a>确认生成节点:
<a href=#__codelineno-533-19 id=__codelineno-533-19 name=__codelineno-533-19></a>==&gt;#查看新增vidoe节点
<a href=#__codelineno-533-20 id=__codelineno-533-20 name=__codelineno-533-20></a>ls /dev/video*
<a href=#__codelineno-533-21 id=__codelineno-533-21 name=__codelineno-533-21></a>/dev/video0 /dev/video1 /dev/video2 /dev/video3
<a href=#__codelineno-533-22 id=__codelineno-533-22 name=__codelineno-533-22></a>==&gt;#确定新节点,是video4
<a href=#__codelineno-533-23 id=__codelineno-533-23 name=__codelineno-533-23></a>==&gt;修改sample_uvcout.conf 配置文件
<a href=#__codelineno-533-24 id=__codelineno-533-24 name=__codelineno-533-24></a>vi sample/sample_uvcout/sample_uvcout.conf
<a href=#__codelineno-533-25 id=__codelineno-533-25 name=__codelineno-533-25></a>[parameter]
<a href=#__codelineno-533-26 id=__codelineno-533-26 name=__codelineno-533-26></a>uvc_dev = 2 #将新增节点的序号加入这里。
<a href=#__codelineno-533-27 id=__codelineno-533-27 name=__codelineno-533-27></a>cat /proc/asound/cards
<a href=#__codelineno-533-28 id=__codelineno-533-28 name=__codelineno-533-28></a>0 [sun8iw19codec ]: sun8iw19-codec - sun8iw19-codec
<a href=#__codelineno-533-29 id=__codelineno-533-29 name=__codelineno-533-29></a>sun8iw19-codec
<a href=#__codelineno-533-30 id=__codelineno-533-30 name=__codelineno-533-30></a>1 [snddaudio0 ]: snddaudio0 - snddaudio0
<a href=#__codelineno-533-31 id=__codelineno-533-31 name=__codelineno-533-31></a>snddaudio0
<a href=#__codelineno-533-32 id=__codelineno-533-32 name=__codelineno-533-32></a>2 [UAC1Gadget ]: UAC1_Gadget - UAC1_Gadget
<a href=#__codelineno-533-33 id=__codelineno-533-33 name=__codelineno-533-33></a>UAC1_Gadget 0
<a href=#__codelineno-533-34 id=__codelineno-533-34 name=__codelineno-533-34></a>enable_uac = 1
<a href=#__codelineno-533-35 id=__codelineno-533-35 name=__codelineno-533-35></a>uac_audio_card_name = "hw:UAC1Gadget"
<a href=#__codelineno-533-36 id=__codelineno-533-36 name=__codelineno-533-36></a>运行sample
<a href=#__codelineno-533-37 id=__codelineno-533-37 name=__codelineno-533-37></a>./sample_usbcamera -path /mnt/extsd/sample_usbcamera.conf
<a href=#__codelineno-533-38 id=__codelineno-533-38 name=__codelineno-533-38></a>注:
<a href=#__codelineno-533-39 id=__codelineno-533-39 name=__codelineno-533-39></a>uvc、uac复合设备只能在uvc bulk模式下使用，sample已改为usb bulk模式。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-534-1 id=__codelineno-534-1 name=__codelineno-534-1></a># cd /mnt/extsd/
<a href=#__codelineno-534-2 id=__codelineno-534-2 name=__codelineno-534-2></a># ./sample_usbcamera -path ./sample_usbcamera.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-535-1 id=__codelineno-535-1 name=__codelineno-535-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-536-1 id=__codelineno-536-1 name=__codelineno-536-1></a>达到设定的测试时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-537-1 id=__codelineno-537-1 name=__codelineno-537-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-537-2 id=__codelineno-537-2 name=__codelineno-537-2></a>2. 测试UVC、UAC复合设备功能正常。
</code></pre></div> ### 8.8 多媒体文件 #### 8.8.1 sample_demux 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-538-1 id=__codelineno-538-1 name=__codelineno-538-1></a>从视频文件（如：test.mp4）中分离出所有的视频、音频、subtitle数据，分别组成对应文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-539-1 id=__codelineno-539-1 name=__codelineno-539-1></a>mpp_demuxer
</code></pre></div> 测试通路： ![image-20221120184602005](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120184602005.png) <center>图 8-54: MPP_sample 测试通路-sample_demux</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-540-1 id=__codelineno-540-1 name=__codelineno-540-1></a>/mnt/extsd/two_video.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-541-1 id=__codelineno-541-1 name=__codelineno-541-1></a>/mnt/extsd/video.bin
<a href=#__codelineno-541-2 id=__codelineno-541-2 name=__codelineno-541-2></a>/mnt/extsd/audio.bin
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-542-1 id=__codelineno-542-1 name=__codelineno-542-1></a>src_file：指定原始视频文件的路径
<a href=#__codelineno-542-2 id=__codelineno-542-2 name=__codelineno-542-2></a>src_size：指定原始视频文件的视频大小，如1080p
<a href=#__codelineno-542-3 id=__codelineno-542-3 name=__codelineno-542-3></a>seek_position：指定原始视频文件的开始解析位置(ms)
<a href=#__codelineno-542-4 id=__codelineno-542-4 name=__codelineno-542-4></a>video_dst_file:解析出来的视频数据生成的文件路径
<a href=#__codelineno-542-5 id=__codelineno-542-5 name=__codelineno-542-5></a>audio_dst_file:解析出来的音频数据生成的文件路径
<a href=#__codelineno-542-6 id=__codelineno-542-6 name=__codelineno-542-6></a>subtitle_dst_file:解析出来的文字数据生成的文件路径
<a href=#__codelineno-542-7 id=__codelineno-542-7 name=__codelineno-542-7></a>test_duration: sample一次测试时间（单位：s）
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-543-1 id=__codelineno-543-1 name=__codelineno-543-1></a># cd /mnt/extsd/
<a href=#__codelineno-543-2 id=__codelineno-543-2 name=__codelineno-543-2></a># ./sample_demux -path ./sample_demux.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-544-1 id=__codelineno-544-1 name=__codelineno-544-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-545-1 id=__codelineno-545-1 name=__codelineno-545-1></a>测试完文件two_video.mp4，可以自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-546-1 id=__codelineno-546-1 name=__codelineno-546-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-546-2 id=__codelineno-546-2 name=__codelineno-546-2></a>2. 生成解析文件 video.bin 和audio.bin。
</code></pre></div> #### 8.8.2 sample_file_repair 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-547-1 id=__codelineno-547-1 name=__codelineno-547-1></a>该sample 用来修复mp4 文件。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-548-1 id=__codelineno-548-1 name=__codelineno-548-1></a>mpp_muxer
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-549-1 id=__codelineno-549-1 name=__codelineno-549-1></a>/mnt/extsd/1080p.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-550-1 id=__codelineno-550-1 name=__codelineno-550-1></a>覆盖原文件 /mnt/extsd/1080p.mp4
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-551-1 id=__codelineno-551-1 name=__codelineno-551-1></a>无
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-552-1 id=__codelineno-552-1 name=__codelineno-552-1></a># cd /mnt/extsd/
<a href=#__codelineno-552-2 id=__codelineno-552-2 name=__codelineno-552-2></a># ./sample_file_repair 1080p.mp4
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-553-1 id=__codelineno-553-1 name=__codelineno-553-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-554-1 id=__codelineno-554-1 name=__codelineno-554-1></a>修复完源文件，会自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-555-1 id=__codelineno-555-1 name=__codelineno-555-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-555-2 id=__codelineno-555-2 name=__codelineno-555-2></a>2. 使用VLC 软件播放修复后的mp4文件正常。
</code></pre></div> ### 8.9 AI demo #### 8.9.1 sample_odet_demo 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-556-1 id=__codelineno-556-1 name=__codelineno-556-1></a>演示AI demo方案。
<a href=#__codelineno-556-2 id=__codelineno-556-2 name=__codelineno-556-2></a>该方案共有四路主应用，分别为：
<a href=#__codelineno-556-3 id=__codelineno-556-3 name=__codelineno-556-3></a>第一路: 支持H265高清编码存盘。
<a href=#__codelineno-556-4 id=__codelineno-556-4 name=__codelineno-556-4></a>第二路: 支持640*480预览。
<a href=#__codelineno-556-5 id=__codelineno-556-5 name=__codelineno-556-5></a>第三路: 支持NPU检测，返回坐标给其它两路绘框。
<a href=#__codelineno-556-6 id=__codelineno-556-6 name=__codelineno-556-6></a>第四路: 支持抓拍。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-557-1 id=__codelineno-557-1 name=__codelineno-557-1></a>mpp_vi
<a href=#__codelineno-557-2 id=__codelineno-557-2 name=__codelineno-557-2></a>mpp_venc
<a href=#__codelineno-557-3 id=__codelineno-557-3 name=__codelineno-557-3></a>mpp_vo
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-558-1 id=__codelineno-558-1 name=__codelineno-558-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-559-1 id=__codelineno-559-1 name=__codelineno-559-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-560-1 id=__codelineno-560-1 name=__codelineno-560-1></a>环境准备
<a href=#__codelineno-560-2 id=__codelineno-560-2 name=__codelineno-560-2></a>1. 准备TF卡存储模型
<a href=#__codelineno-560-3 id=__codelineno-560-3 name=__codelineno-560-3></a>TF卡的作用是存储模型文件和保存H265编码数据。
<a href=#__codelineno-560-4 id=__codelineno-560-4 name=__codelineno-560-4></a>AI Demo用例对模型文件的存储位置有要求，需要将模型文件存储在TF的指定位置，在本用例中，这个位置是:
<a href=#__codelineno-560-5 id=__codelineno-560-5 name=__codelineno-560-5></a>/mnt/extsd/object_det/model/
<a href=#__codelineno-560-6 id=__codelineno-560-6 name=__codelineno-560-6></a>2. 挂载存储卡到系统
<a href=#__codelineno-560-7 id=__codelineno-560-7 name=__codelineno-560-7></a>执行如下命令将其挂载到 /mnt/extsd目录下：
<a href=#__codelineno-560-8 id=__codelineno-560-8 name=__codelineno-560-8></a>挂载命令: mount -t vfat /dev/mmcblk1p1 /mnt/extsd
<a href=#__codelineno-560-9 id=__codelineno-560-9 name=__codelineno-560-9></a>挂载成功后，执行 ls -l /mnt/extsd/object_det/model/可以看到模型文件
<a href=#__codelineno-560-10 id=__codelineno-560-10 name=__codelineno-560-10></a>3. AI应用放入TF卡
<a href=#__codelineno-560-11 id=__codelineno-560-11 name=__codelineno-560-11></a>有两种办法将测试AI应用放入SD卡，分别介绍：
<a href=#__codelineno-560-12 id=__codelineno-560-12 name=__codelineno-560-12></a>第一种，即使用读卡器手动将应用拷贝到TF卡根目录。
<a href=#__codelineno-560-13 id=__codelineno-560-13 name=__codelineno-560-13></a>第二种，通过ADB将测试AI应用推到平台端系统，这种方式不需要将TF卡从平台端取下来，在线即可完成。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-561-1 id=__codelineno-561-1 name=__codelineno-561-1></a>1. 启动OSD显示应用
<a href=#__codelineno-561-2 id=__codelineno-561-2 name=__codelineno-561-2></a>OSD显示应用的主要作用是对当前的目标检测应用的统计信息进行显示，主要包括检测类别，目标检测个数，NPU检测帧率等
<a href=#__codelineno-561-3 id=__codelineno-561-3 name=__codelineno-561-3></a>等，受限于LCD尺寸的限制，部分信息，比如检测概率通过串口输出。
<a href=#__codelineno-561-4 id=__codelineno-561-4 name=__codelineno-561-4></a>OSD应用已经随Tina系统打包进固件里面，不需要像AI用例一样手工拷贝或者adb推入，所以可以直接在控制台下执行
<a href=#__codelineno-561-5 id=__codelineno-561-5 name=__codelineno-561-5></a>df_andi&amp; 即可。
<a href=#__codelineno-561-6 id=__codelineno-561-6 name=__codelineno-561-6></a>2. 启动AI Demo应用
<a href=#__codelineno-561-7 id=__codelineno-561-7 name=__codelineno-561-7></a># cd /mnt/extsd/
<a href=#__codelineno-561-8 id=__codelineno-561-8 name=__codelineno-561-8></a># ./sample_odet_demo
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-562-1 id=__codelineno-562-1 name=__codelineno-562-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-563-1 id=__codelineno-563-1 name=__codelineno-563-1></a>按"ctrl + c"退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-564-1 id=__codelineno-564-1 name=__codelineno-564-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-564-2 id=__codelineno-564-2 name=__codelineno-564-2></a>2. 录制写卡功能正常。
<a href=#__codelineno-564-3 id=__codelineno-564-3 name=__codelineno-564-3></a>3. 拍照功能正常。
<a href=#__codelineno-564-4 id=__codelineno-564-4 name=__codelineno-564-4></a>4. LCD屏幕预览正常，同时显示人脸识别正常。
</code></pre></div> #### 8.9.2 sample_RegionDetect 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-565-1 id=__codelineno-565-1 name=__codelineno-565-1></a>演示区域检测功能。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-566-1 id=__codelineno-566-1 name=__codelineno-566-1></a>mpp_vi
<a href=#__codelineno-566-2 id=__codelineno-566-2 name=__codelineno-566-2></a>mpp_venc
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-567-1 id=__codelineno-567-1 name=__codelineno-567-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-568-1 id=__codelineno-568-1 name=__codelineno-568-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-569-1 id=__codelineno-569-1 name=__codelineno-569-1></a>环境准备
<a href=#__codelineno-569-2 id=__codelineno-569-2 name=__codelineno-569-2></a>1. 板端接好camera和屏幕。
<a href=#__codelineno-569-3 id=__codelineno-569-3 name=__codelineno-569-3></a>2. 将motion目录复制到tf卡中。
<a href=#__codelineno-569-4 id=__codelineno-569-4 name=__codelineno-569-4></a>motion目录的文件：
<a href=#__codelineno-569-5 id=__codelineno-569-5 name=__codelineno-569-5></a>aw-pdet.nb：模型文件（在mpp sample_RegionDetect目录下）
<a href=#__codelineno-569-6 id=__codelineno-569-6 name=__codelineno-569-6></a>libpdet.so：网络级运行库（在mpp sample_RegionDetect目录下）
<a href=#__codelineno-569-7 id=__codelineno-569-7 name=__codelineno-569-7></a>libVIPlite.so：NPU用户态运行库（单独申请提供）
<a href=#__codelineno-569-8 id=__codelineno-569-8 name=__codelineno-569-8></a>libVIPuser.so：NPU用户态BSP运行库（单独申请提供）
<a href=#__codelineno-569-9 id=__codelineno-569-9 name=__codelineno-569-9></a>run.sh：demo执行脚本（见下面的备注）
<a href=#__codelineno-569-10 id=__codelineno-569-10 name=__codelineno-569-10></a>sample_RegionDetect：编译生成的demo程序
<a href=#__codelineno-569-11 id=__codelineno-569-11 name=__codelineno-569-11></a>备注：
<a href=#__codelineno-569-12 id=__codelineno-569-12 name=__codelineno-569-12></a>run.sh脚本的内容：
<a href=#__codelineno-569-13 id=__codelineno-569-13 name=__codelineno-569-13></a>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$PWD
<a href=#__codelineno-569-14 id=__codelineno-569-14 name=__codelineno-569-14></a>./sample_RegionDetect $@
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-570-1 id=__codelineno-570-1 name=__codelineno-570-1></a>demo演示
<a href=#__codelineno-570-2 id=__codelineno-570-2 name=__codelineno-570-2></a>1. shell进入/mnt/extsd/motion目录。
<a href=#__codelineno-570-3 id=__codelineno-570-3 name=__codelineno-570-3></a>2. 执行./run.sh N开始区域检测demo演示，其中N∈{0，1，2，3}。分别为：移动侦测，区域检测，越界检测，人形检
<a href=#__codelineno-570-4 id=__codelineno-570-4 name=__codelineno-570-4></a>测。
<a href=#__codelineno-570-5 id=__codelineno-570-5 name=__codelineno-570-5></a>3. 检测demo会显示预览界面，其中红色为配置区域或界线，绿色正方形小框显示移动侦测区域，绿色矩形框为人形区域，中
<a href=#__codelineno-570-6 id=__codelineno-570-6 name=__codelineno-570-6></a>心为绿色小点。越界算法以人形中心点为准计算，蓝色点为越界坐标。
<a href=#__codelineno-570-7 id=__codelineno-570-7 name=__codelineno-570-7></a>4. 录像自动保存为motion.h265。 5. 查看log打印，区域检测打印为：&lt;on_cross_callback&gt;
<a href=#__codelineno-570-8 id=__codelineno-570-8 name=__codelineno-570-8></a>on_cross_callback: RECT[0] type: 1；其中RECT[0]表示第0个区域，type: 1表示进入区域，2表示离开区
<a href=#__codelineno-570-9 id=__codelineno-570-9 name=__codelineno-570-9></a>域。越界检测打印为：&lt;on_cross_callback&gt; on_cross_callback: LINE[0] type: 1。其中LINE[0]表示第
<a href=#__codelineno-570-10 id=__codelineno-570-10 name=__codelineno-570-10></a>一条线，type:1表示从左到右，2表示从右到左。
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-571-1 id=__codelineno-571-1 name=__codelineno-571-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-572-1 id=__codelineno-572-1 name=__codelineno-572-1></a>按"ctrl + c" 退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-573-1 id=__codelineno-573-1 name=__codelineno-573-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-573-2 id=__codelineno-573-2 name=__codelineno-573-2></a>2. 查看预览界面，其中红色为配置区域或界线，绿色正方形小框显示移动侦测区域，绿色矩形框为人形区域，中心为绿色小
<a href=#__codelineno-573-3 id=__codelineno-573-3 name=__codelineno-573-3></a>点。
</code></pre></div> ### 8.10 其他 #### 8.10.1 sample_glog 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-574-1 id=__codelineno-574-1 name=__codelineno-574-1></a>该sample 演示glog (Google Logging Library) 的使用方法。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-575-1 id=__codelineno-575-1 name=__codelineno-575-1></a>无
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-576-1 id=__codelineno-576-1 name=__codelineno-576-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-577-1 id=__codelineno-577-1 name=__codelineno-577-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-578-1 id=__codelineno-578-1 name=__codelineno-578-1></a>无
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-579-1 id=__codelineno-579-1 name=__codelineno-579-1></a># cd /mnt/extsd/
<a href=#__codelineno-579-2 id=__codelineno-579-2 name=__codelineno-579-2></a># ./sample_glog
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-580-1 id=__codelineno-580-1 name=__codelineno-580-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-581-1 id=__codelineno-581-1 name=__codelineno-581-1></a>测试完后可以自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-582-1 id=__codelineno-582-1 name=__codelineno-582-1></a>alogd、alogw、aloge 可以正常打印。
</code></pre></div> #### 8.10.2 sample_hello 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-583-1 id=__codelineno-583-1 name=__codelineno-583-1></a>该sample 用来验证mpp middleware sample 运行基本环境是否正常。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-584-1 id=__codelineno-584-1 name=__codelineno-584-1></a>无
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-585-1 id=__codelineno-585-1 name=__codelineno-585-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-586-1 id=__codelineno-586-1 name=__codelineno-586-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-587-1 id=__codelineno-587-1 name=__codelineno-587-1></a>无
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-588-1 id=__codelineno-588-1 name=__codelineno-588-1></a># cd /mnt/extsd/
<a href=#__codelineno-588-2 id=__codelineno-588-2 name=__codelineno-588-2></a># ./sample_hello
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-589-1 id=__codelineno-589-1 name=__codelineno-589-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-590-1 id=__codelineno-590-1 name=__codelineno-590-1></a>测试完后可以自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-591-1 id=__codelineno-591-1 name=__codelineno-591-1></a>运行正常，不死机。
</code></pre></div> #### 8.10.3 sample_pthread_cancel 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-592-1 id=__codelineno-592-1 name=__codelineno-592-1></a>该sample测试pthread_cancel()对目标线程发送cancel信号后，目标线程接收cancel信号的处理过程。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-593-1 id=__codelineno-593-1 name=__codelineno-593-1></a>无
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-594-1 id=__codelineno-594-1 name=__codelineno-594-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-595-1 id=__codelineno-595-1 name=__codelineno-595-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-596-1 id=__codelineno-596-1 name=__codelineno-596-1></a>无
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-597-1 id=__codelineno-597-1 name=__codelineno-597-1></a># cd /mnt/extsd/
<a href=#__codelineno-597-2 id=__codelineno-597-2 name=__codelineno-597-2></a># ./sample_pthread_cancel
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-598-1 id=__codelineno-598-1 name=__codelineno-598-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-599-1 id=__codelineno-599-1 name=__codelineno-599-1></a>按“Enter”可以正常退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-600-1 id=__codelineno-600-1 name=__codelineno-600-1></a>线程可以正常退出测试。
</code></pre></div> #### 8.10.4 sample_motor 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-601-1 id=__codelineno-601-1 name=__codelineno-601-1></a>【说明：该项测试暂不支持】
<a href=#__codelineno-601-2 id=__codelineno-601-2 name=__codelineno-601-2></a>该sample 演示电机motor 测试。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-602-1 id=__codelineno-602-1 name=__codelineno-602-1></a>无
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-603-1 id=__codelineno-603-1 name=__codelineno-603-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-604-1 id=__codelineno-604-1 name=__codelineno-604-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-605-1 id=__codelineno-605-1 name=__codelineno-605-1></a>无
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-606-1 id=__codelineno-606-1 name=__codelineno-606-1></a># cd /mnt/extsd/
<a href=#__codelineno-606-2 id=__codelineno-606-2 name=__codelineno-606-2></a># ./sample_motor
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-607-1 id=__codelineno-607-1 name=__codelineno-607-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-608-1 id=__codelineno-608-1 name=__codelineno-608-1></a>自动结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-609-1 id=__codelineno-609-1 name=__codelineno-609-1></a>无
</code></pre></div> #### 8.10.5 sample_sound_controler 测试目的 <div class=highlight><pre><span></span><code><a href=#__codelineno-610-1 id=__codelineno-610-1 name=__codelineno-610-1></a>说明：该项测试暂不支持】
<a href=#__codelineno-610-2 id=__codelineno-610-2 name=__codelineno-610-2></a>演示语音识别。
<a href=#__codelineno-610-3 id=__codelineno-610-3 name=__codelineno-610-3></a>1.声控：支持的命令词： { "小志开始录像", "小志停止录像", "小志拍照", "小志连拍", "小志关机" }
<a href=#__codelineno-610-4 id=__codelineno-610-4 name=__codelineno-610-4></a>2.每次送给音频320个字节音频数据
<a href=#__codelineno-610-5 id=__codelineno-610-5 name=__codelineno-610-5></a>3.包含的库和头文件在external/sound_controler 目录下
<a href=#__codelineno-610-6 id=__codelineno-610-6 name=__codelineno-610-6></a>4.音频要求：
<a href=#__codelineno-610-7 id=__codelineno-610-7 name=__codelineno-610-7></a>pcm_sample_rate = 16000
<a href=#__codelineno-610-8 id=__codelineno-610-8 name=__codelineno-610-8></a>pcm_bit_width = 16
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-611-1 id=__codelineno-611-1 name=__codelineno-611-1></a>mpp_external_sound_controler
<a href=#__codelineno-611-2 id=__codelineno-611-2 name=__codelineno-611-2></a>mpp_aio
</code></pre></div> 测试通路： ![image-20221120184942099](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120184942099.png) <center>图 8-55: MPP_sample 测试通路-sample_sound_controler</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-612-1 id=__codelineno-612-1 name=__codelineno-612-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-613-1 id=__codelineno-613-1 name=__codelineno-613-1></a>/mnt/extsd/sample_sound_controler.pcm
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-614-1 id=__codelineno-614-1 name=__codelineno-614-1></a>pcm_file_path：指定pcm 文件路径。
<a href=#__codelineno-614-2 id=__codelineno-614-2 name=__codelineno-614-2></a>pcm_sample_rate：指定采样率。
<a href=#__codelineno-614-3 id=__codelineno-614-3 name=__codelineno-614-3></a>pcm_channel_cnt：指定通道数。
<a href=#__codelineno-614-4 id=__codelineno-614-4 name=__codelineno-614-4></a>pcm_bit_width：指定位宽，必须设置为16。
<a href=#__codelineno-614-5 id=__codelineno-614-5 name=__codelineno-614-5></a>pcm_frame_size：指定pcm 帧的大小，单位：bytes。
<a href=#__codelineno-614-6 id=__codelineno-614-6 name=__codelineno-614-6></a>pcm_cap_duration：指定测试时间，单位：s。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-615-1 id=__codelineno-615-1 name=__codelineno-615-1></a># cd /mnt/extsd/
<a href=#__codelineno-615-2 id=__codelineno-615-2 name=__codelineno-615-2></a># ./sample_sound_controler -path ./sample_sound_controler.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-616-1 id=__codelineno-616-1 name=__codelineno-616-1></a>暂不支持。
</code></pre></div> 退出测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-617-1 id=__codelineno-617-1 name=__codelineno-617-1></a>达到设定测试时长后可以自动结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-618-1 id=__codelineno-618-1 name=__codelineno-618-1></a>可以获得正确的控制指令，同时生成pcm 文件sample_sound_controler.pcm。
</code></pre></div> #### 8.10.6 sample_ai_Demo_0.9.2 <div class=highlight><pre><span></span><code><a href=#__codelineno-619-1 id=__codelineno-619-1 name=__codelineno-619-1></a>智能算子demo
</code></pre></div> #### 8.10.7 sample_ai_Demo_0.9.6 <div class=highlight><pre><span></span><code><a href=#__codelineno-620-1 id=__codelineno-620-1 name=__codelineno-620-1></a>智能算子demo
</code></pre></div> #### 8.10.8 sample_thumb 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-621-1 id=__codelineno-621-1 name=__codelineno-621-1></a>演示抓取缩略图。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-622-1 id=__codelineno-622-1 name=__codelineno-622-1></a>mpp_vi
<a href=#__codelineno-622-2 id=__codelineno-622-2 name=__codelineno-622-2></a>mpp_venc
</code></pre></div> 测试通路： ![image-20221120185002099](https://photos.100ask.net/Tina-Sdk/MPPSampleInstructionsUse_image-20221120185002099.png) <center>图 8-56: MPP_sample 测试通路-sample_thumb</center> 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-623-1 id=__codelineno-623-1 name=__codelineno-623-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-624-1 id=__codelineno-624-1 name=__codelineno-624-1></a>无
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-625-1 id=__codelineno-625-1 name=__codelineno-625-1></a>无
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-626-1 id=__codelineno-626-1 name=__codelineno-626-1></a>暂不支持。
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-627-1 id=__codelineno-627-1 name=__codelineno-627-1></a># sample_thumb
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-628-1 id=__codelineno-628-1 name=__codelineno-628-1></a>自动结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-629-1 id=__codelineno-629-1 name=__codelineno-629-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-629-2 id=__codelineno-629-2 name=__codelineno-629-2></a>2. 打印缩略图的大小等信息符合预期。
</code></pre></div> #### 8.10.9 sample_nna 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-630-1 id=__codelineno-630-1 name=__codelineno-630-1></a>演示人形检测、人脸检测。
<a href=#__codelineno-630-2 id=__codelineno-630-2 name=__codelineno-630-2></a>1.将编译出来的sample_nna放到nna_g2d文件夹中
<a href=#__codelineno-630-3 id=__codelineno-630-3 name=__codelineno-630-3></a>2.run ./sample_nna 人形检测
<a href=#__codelineno-630-4 id=__codelineno-630-4 name=__codelineno-630-4></a>3.run ./sample_nna xx 人脸检测
<a href=#__codelineno-630-5 id=__codelineno-630-5 name=__codelineno-630-5></a>4.识别结果 nna_g2d/out/nna.h264
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-631-1 id=__codelineno-631-1 name=__codelineno-631-1></a>mpp_vi
<a href=#__codelineno-631-2 id=__codelineno-631-2 name=__codelineno-631-2></a>mpp_venc
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-632-1 id=__codelineno-632-1 name=__codelineno-632-1></a>图片源文件：nna_g2d/c1080.jpg
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-633-1 id=__codelineno-633-1 name=__codelineno-633-1></a>生成的编码文件：nna_g2d/out/nna.h264
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-634-1 id=__codelineno-634-1 name=__codelineno-634-1></a>无
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-635-1 id=__codelineno-635-1 name=__codelineno-635-1></a>暂不支持。
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-636-1 id=__codelineno-636-1 name=__codelineno-636-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-637-1 id=__codelineno-637-1 name=__codelineno-637-1></a>检测完成后会自动结束测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-638-1 id=__codelineno-638-1 name=__codelineno-638-1></a>生成编码文件nna_g2d/out/nna.h264，标注人脸位置。
</code></pre></div> #### 8.10.10 sample_MotionDetect 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-639-1 id=__codelineno-639-1 name=__codelineno-639-1></a>该sample演示视频编码库的移动侦测功能的使用。
<a href=#__codelineno-639-2 id=__codelineno-639-2 name=__codelineno-639-2></a>创建mpi_vi和mpi_venc，将它们绑定，再分别启动。mpi_vi采集图像，直接传输给mpi_venc进行编码。
<a href=#__codelineno-639-3 id=__codelineno-639-3 name=__codelineno-639-3></a>编码过程中获取移动侦测信息，可保存裸码流视频文件。支持手动按ctrl-c，终止测试。
<a href=#__codelineno-639-4 id=__codelineno-639-4 name=__codelineno-639-4></a>注意：视频编码驱动只支持在VBR, IPC-MODE模式下做移动侦测。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-640-1 id=__codelineno-640-1 name=__codelineno-640-1></a>mpp_vi
<a href=#__codelineno-640-2 id=__codelineno-640-2 name=__codelineno-640-2></a>mpp_venc
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-641-1 id=__codelineno-641-1 name=__codelineno-641-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-642-1 id=__codelineno-642-1 name=__codelineno-642-1></a>/mnt/extsd/md.h265
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-643-1 id=__codelineno-643-1 name=__codelineno-643-1></a>online_en: 指定是否开启在线编码，默认0，表示不开启在线编码，即当前为离线编码。
<a href=#__codelineno-643-2 id=__codelineno-643-2 name=__codelineno-643-2></a>online_share_buf_num: 指定在线编码的共享buffer个数（1或2），默认2，表示2个buffer。注意该配置仅当配置在
<a href=#__codelineno-643-3 id=__codelineno-643-3 name=__codelineno-643-3></a>线模式时才生效。
<a href=#__codelineno-643-4 id=__codelineno-643-4 name=__codelineno-643-4></a>encoder_count: 指定每次测试编码帧数。
<a href=#__codelineno-643-5 id=__codelineno-643-5 name=__codelineno-643-5></a>dev_num: 指定VI Dev设备节点。
<a href=#__codelineno-643-6 id=__codelineno-643-6 name=__codelineno-643-6></a>src_pic_format: 指定采集图像的格式。
<a href=#__codelineno-643-7 id=__codelineno-643-7 name=__codelineno-643-7></a>src_width: 指定camera采集的图像宽度。
<a href=#__codelineno-643-8 id=__codelineno-643-8 name=__codelineno-643-8></a>src_height: 指定camera采集的图像高度。
<a href=#__codelineno-643-9 id=__codelineno-643-9 name=__codelineno-643-9></a>src_frame_rate: 指定camera采集图像的帧率。
<a href=#__codelineno-643-10 id=__codelineno-643-10 name=__codelineno-643-10></a>dst_encoder_type: 指定编码格式。
<a href=#__codelineno-643-11 id=__codelineno-643-11 name=__codelineno-643-11></a>dst_width: 指定编码后图像的宽度。
<a href=#__codelineno-643-12 id=__codelineno-643-12 name=__codelineno-643-12></a>dst_height: 指定编码后图像的高度。
<a href=#__codelineno-643-13 id=__codelineno-643-13 name=__codelineno-643-13></a>dst_frame_rate: 指定编码帧率。
<a href=#__codelineno-643-14 id=__codelineno-643-14 name=__codelineno-643-14></a>dst_bit_rate: 指定编码码率。
<a href=#__codelineno-643-15 id=__codelineno-643-15 name=__codelineno-643-15></a>output_file_path: 指定编码后视频文件的路径。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-644-1 id=__codelineno-644-1 name=__codelineno-644-1></a># cd /mnt/extsd/
<a href=#__codelineno-644-2 id=__codelineno-644-2 name=__codelineno-644-2></a># ./sample_MotionDetect -path ./sample_MotionDetect.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-645-1 id=__codelineno-645-1 name=__codelineno-645-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-646-1 id=__codelineno-646-1 name=__codelineno-646-1></a>达到设定的测试时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-647-1 id=__codelineno-647-1 name=__codelineno-647-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-647-2 id=__codelineno-647-2 name=__codelineno-647-2></a>2. 使用VLC 软件分析生成的raw文件正常。
</code></pre></div> #### 8.10.11 sample_PersonDetect 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-648-1 id=__codelineno-648-1 name=__codelineno-648-1></a>该sample演示使用人形检测库，将检测的人形区域在主码流和子码流上分别画框、编码。
<a href=#__codelineno-648-2 id=__codelineno-648-2 name=__codelineno-648-2></a>针对主码流和子码流分别创建mpi_vi和mpi_venc，将它们绑定，再分别启动。mpi_vi采集图像，直接传输给mpi_venc进
<a href=#__codelineno-648-3 id=__codelineno-648-3 name=__codelineno-648-3></a>行编码。
<a href=#__codelineno-648-4 id=__codelineno-648-4 name=__codelineno-648-4></a>子码流的mpi_vi再开一路虚通道用于人形检测，再开一路虚通道进行预览。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-649-1 id=__codelineno-649-1 name=__codelineno-649-1></a>mpp_vi
<a href=#__codelineno-649-2 id=__codelineno-649-2 name=__codelineno-649-2></a>mpp_venc
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-650-1 id=__codelineno-650-1 name=__codelineno-650-1></a>无
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-651-1 id=__codelineno-651-1 name=__codelineno-651-1></a>/mnt/extsd/mainStreamPd.raw
<a href=#__codelineno-651-2 id=__codelineno-651-2 name=__codelineno-651-2></a>/mnt/extsd/subStreamPd.raw
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-652-1 id=__codelineno-652-1 name=__codelineno-652-1></a>main_vipp: 主码流VIPP号。
<a href=#__codelineno-652-2 id=__codelineno-652-2 name=__codelineno-652-2></a>main_src_width: 主VIPP输出图像宽度。
<a href=#__codelineno-652-3 id=__codelineno-652-3 name=__codelineno-652-3></a>main_src_height: 主VIPP输出图像高度。
<a href=#__codelineno-652-4 id=__codelineno-652-4 name=__codelineno-652-4></a>main_pixel_format: 主VIPP输出图像格式。nv21, lbc25等。
<a href=#__codelineno-652-5 id=__codelineno-652-5 name=__codelineno-652-5></a>sub_vipp: 子码流VIPP号。
<a href=#__codelineno-652-6 id=__codelineno-652-6 name=__codelineno-652-6></a>sub_src_width: 子VIPP输出图像宽度。
<a href=#__codelineno-652-7 id=__codelineno-652-7 name=__codelineno-652-7></a>sub_src_height: 子VIPP输出图像高度。
<a href=#__codelineno-652-8 id=__codelineno-652-8 name=__codelineno-652-8></a>sub_pixel_format: 子VIPP输出图像格式。nv21, lbc25等。
<a href=#__codelineno-652-9 id=__codelineno-652-9 name=__codelineno-652-9></a>src_frame_rate: 采集帧率。
<a href=#__codelineno-652-10 id=__codelineno-652-10 name=__codelineno-652-10></a>orl_color: 指定画人形框的颜色。
<a href=#__codelineno-652-11 id=__codelineno-652-11 name=__codelineno-652-11></a>enable_main_vipp_orl: 是否在主VIPP画人形框。
<a href=#__codelineno-652-12 id=__codelineno-652-12 name=__codelineno-652-12></a>enable_sub_vipp_orl: 是否在子VIPP画人形框。
<a href=#__codelineno-652-13 id=__codelineno-652-13 name=__codelineno-652-13></a>preview_vipp：用于预览的vipp通道号。
<a href=#__codelineno-652-14 id=__codelineno-652-14 name=__codelineno-652-14></a>preview_width: 预览的显示宽度，0表示不预览。
<a href=#__codelineno-652-15 id=__codelineno-652-15 name=__codelineno-652-15></a>preview_height: 预览的显示高度，0表示不预览。
<a href=#__codelineno-652-16 id=__codelineno-652-16 name=__codelineno-652-16></a>main_encode_type: 主码流编码类型, H.265, H.264等。
<a href=#__codelineno-652-17 id=__codelineno-652-17 name=__codelineno-652-17></a>main_encode_width: 主码流的编码目标宽度。
<a href=#__codelineno-652-18 id=__codelineno-652-18 name=__codelineno-652-18></a>main_encode_height: 主码流的编码目标高度。
<a href=#__codelineno-652-19 id=__codelineno-652-19 name=__codelineno-652-19></a>main_encode_frame_rate: 主码流的编码目标帧率。
<a href=#__codelineno-652-20 id=__codelineno-652-20 name=__codelineno-652-20></a>main_encode_bitrate: 主码流的编码目标码率，单位: bps。
<a href=#__codelineno-652-21 id=__codelineno-652-21 name=__codelineno-652-21></a>main_file_path: 保存主码流的文件路径，空表示不保存主码流。
<a href=#__codelineno-652-22 id=__codelineno-652-22 name=__codelineno-652-22></a>sub_encode_type: 子码流编码类型, H.265, H.264等。
<a href=#__codelineno-652-23 id=__codelineno-652-23 name=__codelineno-652-23></a>sub_encode_width: 子码流的编码目标宽度。
<a href=#__codelineno-652-24 id=__codelineno-652-24 name=__codelineno-652-24></a>sub_encode_height: 子码流的编码目标高度。
<a href=#__codelineno-652-25 id=__codelineno-652-25 name=__codelineno-652-25></a>sub_encode_frame_rate: 子码流的编码目标帧率。
<a href=#__codelineno-652-26 id=__codelineno-652-26 name=__codelineno-652-26></a>sub_encode_bitrate: 子码流的编码目标码率，单位: bps。
<a href=#__codelineno-652-27 id=__codelineno-652-27 name=__codelineno-652-27></a>sub_file_path: 保存子码流的文件路径，空表示不保存子码流。
<a href=#__codelineno-652-28 id=__codelineno-652-28 name=__codelineno-652-28></a>test_duration: 测试时间，0表示无限。单位：秒。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-653-1 id=__codelineno-653-1 name=__codelineno-653-1></a># cd /mnt/extsd/
<a href=#__codelineno-653-2 id=__codelineno-653-2 name=__codelineno-653-2></a># ./sample_PersonDetect -path ./sample_PersonDetect.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-654-1 id=__codelineno-654-1 name=__codelineno-654-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-655-1 id=__codelineno-655-1 name=__codelineno-655-1></a>达到设定的测试时间后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-656-1 id=__codelineno-656-1 name=__codelineno-656-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-656-2 id=__codelineno-656-2 name=__codelineno-656-2></a>2. 使用VLC 软件分析生成的raw文件正常。
</code></pre></div> #### 8.10.12 sample_directIORead 测试目的： <div class=highlight><pre><span></span><code><a href=#__codelineno-657-1 id=__codelineno-657-1 name=__codelineno-657-1></a>该sample演示使用directIO方式读文件。理论上不占内存作为缓存。
</code></pre></div> 组件依赖： <div class=highlight><pre><span></span><code><a href=#__codelineno-658-1 id=__codelineno-658-1 name=__codelineno-658-1></a>无
</code></pre></div> 测试通路： 无 源文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-659-1 id=__codelineno-659-1 name=__codelineno-659-1></a>/mnt/extsd/1080p.mp4
</code></pre></div> 目标文件： <div class=highlight><pre><span></span><code><a href=#__codelineno-660-1 id=__codelineno-660-1 name=__codelineno-660-1></a>/mnt/extsd/1080p_rewrite.mp4
</code></pre></div> 参数配置： <div class=highlight><pre><span></span><code><a href=#__codelineno-661-1 id=__codelineno-661-1 name=__codelineno-661-1></a>src_file: 指定被读取的源文件。
<a href=#__codelineno-661-2 id=__codelineno-661-2 name=__codelineno-661-2></a>dst_file: 读出的内容写入目标文件，可以在测试结束后和源文件比对。判断是否读取正确。如果为空，则读取内容不写入
<a href=#__codelineno-661-3 id=__codelineno-661-3 name=__codelineno-661-3></a>目标文件。
<a href=#__codelineno-661-4 id=__codelineno-661-4 name=__codelineno-661-4></a>read_size: 指定一次读取的长度，单位字节。
<a href=#__codelineno-661-5 id=__codelineno-661-5 name=__codelineno-661-5></a>read_interval: 指定读取的间隔时间，单位: ms。
<a href=#__codelineno-661-6 id=__codelineno-661-6 name=__codelineno-661-6></a>loop_cnt: 指定循环读取文件的次数，0表示无限次。
</code></pre></div> 测试指令： 【Tina】 <div class=highlight><pre><span></span><code><a href=#__codelineno-662-1 id=__codelineno-662-1 name=__codelineno-662-1></a># cd /mnt/extsd/
<a href=#__codelineno-662-2 id=__codelineno-662-2 name=__codelineno-662-2></a># ./sample_directIORead -path ./sample_directIORead.conf
</code></pre></div> 【Melis】 <div class=highlight><pre><span></span><code><a href=#__codelineno-663-1 id=__codelineno-663-1 name=__codelineno-663-1></a>暂不支持。
</code></pre></div> 结束测试： <div class=highlight><pre><span></span><code><a href=#__codelineno-664-1 id=__codelineno-664-1 name=__codelineno-664-1></a>达到设定测试次数后，自动退出测试。
</code></pre></div> 预期结果： <div class=highlight><pre><span></span><code><a href=#__codelineno-665-1 id=__codelineno-665-1 name=__codelineno-665-1></a>1. 测试程序运行正常，测试过程没有异常打印。
<a href=#__codelineno-665-2 id=__codelineno-665-2 name=__codelineno-665-2></a>2. 使用VLC 软件分析生成的mp4文件正常。
</code></pre></div></center></center></center> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by using our <a href=... target=_blank>feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2008 - 2022 100ask Team </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "header.autohide", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.13a4f30d.min.js></script> <script src=https://unpkg.com/d3@6.7.0/dist/d3.min.js></script> <script src=https://unpkg.com/markmap-lib@0.14.1/dist/browser/index.min.js></script> <script src=https://unpkg.com/markmap-view@0.14.0/dist/index.min.js></script> </body> </html>